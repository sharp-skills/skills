{"d": {"exhaustive": {"nbHits": false, "typo": false}, "exhaustiveNbHits": false, "exhaustiveTypo": false, "hits": [{"_highlightResult": {"author": {"matchLevel": "none", "matchedWords": [], "value": "wtf_did_we_do"}, "story_text": {"fullyHighlighted": false, "matchLevel": "full", "matchedWords": ["nginx", "config", "production"], "value": "Cloud migrating <em>production</em>  without a plan, and how it made me a better programmer ;)<p>We have a b2b webapp product in cloud_provider_a which started having trouble serving requests, timing out.<p>My team (supporting another product in cloud_provider_b) was tasked with setting up a duplicate of prod in cloud_provider_b. I can't even remember why mgmt thought that would help.<p>By the end of the day, by hook or by crook the call was made to switch <em>PRODUCTION</em> traffic into a newly made stack in a different cloud than where that application was currently hosted. Despite protest from the engineering and QA teams.<p>Its all a blur now. Things went horribly wrong for two days. On the third day my team (with no prior knowledge of how this product works) found that the docker containers running the app had an <em>nginx config</em> with a low worker_connections setting.<p>We changed that one line and the app is back up. But the cost has been high, our customers had a far higher level of disruption these 3 days. Our engineers feel burnt out and disrespected, and our QA teams are appalled.<p>AMA I guess"}, "title": {"fullyHighlighted": false, "matchLevel": "partial", "matchedWords": ["production"], "value": "Cloud migrating <em>production</em> first in 12 hours or less"}}, "_tags": ["story", "author_wtf_did_we_do", "story_21488743", "ask_hn"], "author": "wtf_did_we_do", "children": [21488781, 21488785, 21489047, 21500305], "created_at": "2019-11-09T01:05:12Z", "created_at_i": 1573261512, "num_comments": 8, "objectID": "21488743", "points": 4, "story_id": 21488743, "story_text": "Cloud migrating production  without a plan, and how it made me a better programmer ;)<p>We have a b2b webapp product in cloud_provider_a which started having trouble serving requests, timing out.<p>My team (supporting another product in cloud_provider_b) was tasked with setting up a duplicate of prod in cloud_provider_b. I can&#x27;t even remember why mgmt thought that would help.<p>By the end of the day, by hook or by crook the call was made to switch PRODUCTION traffic into a newly made stack in a different cloud than where that application was currently hosted. Despite protest from the engineering and QA teams.<p>Its all a blur now. Things went horribly wrong for two days. On the third day my team (with no prior knowledge of how this product works) found that the docker containers running the app had an nginx config with a low worker_connections setting.<p>We changed that one line and the app is back up. But the cost has been high, our customers had a far higher level of disruption these 3 days. Our engineers feel burnt out and disrespected, and our QA teams are appalled.<p>AMA I guess", "title": "Cloud migrating production first in 12 hours or less", "updated_at": "2024-09-20T05:14:08Z"}, {"_highlightResult": {"author": {"matchLevel": "none", "matchedWords": [], "value": "walf4431"}, "story_text": {"fullyHighlighted": false, "matchLevel": "full", "matchedWords": ["nginx", "config", "production"], "value": "<p><pre><code>  Hi HN,\n\n  I built nginx-lint, a new linter for nginx configuration files written in Rust using Claude Code.\n\n  Why I built this: <em>nginx configs</em> are deceptively simple but full of subtle pitfalls \u2013 add_header inheritance silently dropping\n  security headers in child blocks, alias path traversal from a missing trailing slash, if inside location causing unpredictable\n  behavior, server_tokens leaking your nginx version by default. These issues are hard to catch in code review and often only surface\n  in <em>production</em>.\n\n  What it does:\n  - 30+ built-in rules covering security, best practices, syntax, and style\n  - Autofix with --fix to automatically correct issues\n  - Lint partial configs \u2013 files in conf.d/ or sites-available/ can be linted standalone with --context http,server or a #\n  nginx-lint:context comment, so you don't need the full nginx.conf to get accurate results\n  - Configurable \u2013 .nginx-lint.toml lets you enable/disable individual rules, adjust severity, and tune rule-specific options (e.g.,\n  allowed TLS protocols, indent size). Generate a default config with nginx-lint config init\n  - WASM plugin system \u2013 write custom rules in Rust, compile to WebAssembly\n  - Web UI that runs entirely client-side via WASM (https://walf443.github.io/nginx-lint/)\n  - JSON output for CI integration\n  - Docker image available: docker run --rm -v /path/to/nginx.conf:/tmp/nginx.conf ghcr.io/walf443/nginx-lint /tmp/nginx.conf\n  Example .nginx-lint.toml:\n  [rules.server-tokens-enabled]\n  enabled = true\n\n  [rules.indent]\n  indent_size = 4\n\n  [rules.deprecated-ssl-protocol]\n  allowed_protocols = [&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;]\n\n  The partial config support is especially useful in CI \u2013 many teams split <em>nginx configs</em> across multiple files and only change one at\n  a time. Context-aware rules like server_tokens detection work correctly even on a snippet that starts with location /api { ... }.\n\n  The WASM plugin architecture lets you add organization-specific rules without modifying the core. Each plugin is a self-contained\n  Rust crate compiled to .wasm. Native execution is ~300x faster than WASM, but the plugin system makes distribution and sandboxing\n  easy.\n\n  GitHub: https://github.com/walf443/nginx-lint\n  Demo: https://walf443.github.io/nginx-lint/\n\n  I'd love feedback on what rules you'd find most useful, or nginx pitfalls you've been bitten by.</code></pre>"}, "title": {"fullyHighlighted": false, "matchLevel": "partial", "matchedWords": ["nginx", "config"], "value": "Show HN: Nginx-lint \u2013 A linter for <em>Nginx configs</em> with plugin support and autofix"}, "url": {"matchLevel": "none", "matchedWords": [], "value": "https://github.com/walf443/nginx-lint"}}, "_tags": ["story", "author_walf4431", "story_46969133", "show_hn"], "author": "walf4431", "created_at": "2026-02-11T00:27:27Z", "created_at_i": 1770769647, "num_comments": 0, "objectID": "46969133", "points": 3, "story_id": 46969133, "story_text": "<p><pre><code>  Hi HN,\n\n  I built nginx-lint, a new linter for nginx configuration files written in Rust using Claude Code.\n\n  Why I built this: nginx configs are deceptively simple but full of subtle pitfalls \u2013 add_header inheritance silently dropping\n  security headers in child blocks, alias path traversal from a missing trailing slash, if inside location causing unpredictable\n  behavior, server_tokens leaking your nginx version by default. These issues are hard to catch in code review and often only surface\n  in production.\n\n  What it does:\n  - 30+ built-in rules covering security, best practices, syntax, and style\n  - Autofix with --fix to automatically correct issues\n  - Lint partial configs \u2013 files in conf.d&#x2F; or sites-available&#x2F; can be linted standalone with --context http,server or a #\n  nginx-lint:context comment, so you don&#x27;t need the full nginx.conf to get accurate results\n  - Configurable \u2013 .nginx-lint.toml lets you enable&#x2F;disable individual rules, adjust severity, and tune rule-specific options (e.g.,\n  allowed TLS protocols, indent size). Generate a default config with nginx-lint config init\n  - WASM plugin system \u2013 write custom rules in Rust, compile to WebAssembly\n  - Web UI that runs entirely client-side via WASM (https:&#x2F;&#x2F;walf443.github.io&#x2F;nginx-lint&#x2F;)\n  - JSON output for CI integration\n  - Docker image available: docker run --rm -v &#x2F;path&#x2F;to&#x2F;nginx.conf:&#x2F;tmp&#x2F;nginx.conf ghcr.io&#x2F;walf443&#x2F;nginx-lint &#x2F;tmp&#x2F;nginx.conf\n  Example .nginx-lint.toml:\n  [rules.server-tokens-enabled]\n  enabled = true\n\n  [rules.indent]\n  indent_size = 4\n\n  [rules.deprecated-ssl-protocol]\n  allowed_protocols = [&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;]\n\n  The partial config support is especially useful in CI \u2013 many teams split nginx configs across multiple files and only change one at\n  a time. Context-aware rules like server_tokens detection work correctly even on a snippet that starts with location &#x2F;api { ... }.\n\n  The WASM plugin architecture lets you add organization-specific rules without modifying the core. Each plugin is a self-contained\n  Rust crate compiled to .wasm. Native execution is ~300x faster than WASM, but the plugin system makes distribution and sandboxing\n  easy.\n\n  GitHub: https:&#x2F;&#x2F;github.com&#x2F;walf443&#x2F;nginx-lint\n  Demo: https:&#x2F;&#x2F;walf443.github.io&#x2F;nginx-lint&#x2F;\n\n  I&#x27;d love feedback on what rules you&#x27;d find most useful, or nginx pitfalls you&#x27;ve been bitten by.</code></pre>", "title": "Show HN: Nginx-lint \u2013 A linter for Nginx configs with plugin support and autofix", "updated_at": "2026-02-11T03:48:25Z", "url": "https://github.com/walf443/nginx-lint"}, {"_highlightResult": {"author": {"matchLevel": "none", "matchedWords": [], "value": "whattodochange"}, "story_text": {"fullyHighlighted": false, "matchLevel": "full", "matchedWords": ["nginx", "config", "production"], "value": "I have to find a strategy to fix this development team without managing them directly. Here is an overview:<p>- this code generates more than 20 million dollars a year of revenue<p>- it runs on PHP<p>- it has been developed for 12 years directly on <em>production</em> with no source control ( hello index-new_2021-test-john_v2.php )<p>- it doesn't use composer or any dependency management. It's all require_once.<p>- it doesn't use any framework<p>- the routing is managed exclusively as rewrites in NGInX ( the <em>NGInX config</em> is around 10,000 lines )<p>- no code has ever been deleted. Things are just added . I gather the reason for that is because it was developed on <em>production</em> directly and deleting things is too risky.<p>- the database structure is the same mess, no migrations, etc... When adding a column, because of the volume of data, they add a new table with a join.<p>- JS and CSS is the same. Multiple versions of jQuery fighting each other depending on which page you are or even on the same page.<p>- no MVC pattern of course, or whatever pattern. No templating library. It's PHP 2003 style.<p>- In many places I see controllers like files making curl requests to its own rest API (via domain name, not localhost) doing oauth authorizations, etc... Just to get the menu items or list of products...<p>- no caching ( but there is memcached but only used for sessions  ...)<p>- team is 3 people, quite junior. One backend, one front, one iOS/android. Resistance to change is huge.<p>- productivity is abysmal which is understandable. The mess is just too huge to be able to build anything.<p>This business unit has a pretty aggressive roadmap as management and HQ has no real understanding of these blockers. And post COVID, budget is really tight.<p>I know a full rewrite is necessary, but how to balance it?"}, "title": {"matchLevel": "none", "matchedWords": [], "value": "Ask HN: Inherited the worst code and tech team I have ever seen. How to fix it?"}}, "_tags": ["story", "author_whattodochange", "story_32883596", "ask_hn"], "author": "whattodochange", "children": [32883654, 32883669, 32883673, 32883676, 32883677, 32883683, 32883692, 32883700, 32883705, 32883709, 32883724, 32883730, 32883731, 32883732, 32883744, 32883745, 32883748, 32883758, 32883768, 32883771, 32883783, 32883791, 32883793, 32883794, 32883798, 32883799, 32883800, 32883807, 32883808, 32883823, 32883830, 32883847, 32883852, 32883857, 32883869, 32883876, 32883877, 32883884, 32883894, 32883903, 32883908, 32883940, 32883959, 32883961, 32884010, 32884054, 32884063, 32884147, 32884148, 32884193, 32884305, 32884328, 32884334, 32884443, 32884507, 32884508, 32884534, 32884539, 32884542, 32884554, 32884567, 32884573, 32884602, 32884609, 32884620, 32884621, 32884643, 32884649, 32884667, 32884682, 32884692, 32884698, 32884707, 32884716, 32884737, 32884758, 32884772, 32884775, 32884789, 32884806, 32884852, 32884860, 32884887, 32884892, 32884910, 32884967, 32884978, 32884997, 32885005, 32885018, 32885026, 32885027, 32885057, 32885080, 32885090, 32885095, 32885125, 32885173, 32885179, 32885187, 32885206, 32885217, 32885221, 32885229, 32885237, 32885239, 32885277, 32885279, 32885335, 32885348, 32885389, 32885396, 32885424, 32885427, 32885439, 32885442, 32885465, 32885468, 32885505, 32885508, 32885533, 32885546, 32885557, 32885589, 32885600, 32885649, 32885684, 32885691, 32885698, 32885713, 32885722, 32885735, 32885749, 32885782, 32885806, 32885821, 32885828, 32885833, 32885835, 32885841, 32885881, 32885889, 32885915, 32885921, 32885929, 32885942, 32885954, 32885972, 32885982, 32886004, 32886013, 32886047, 32886049, 32886051, 32886056, 32886079, 32886115, 32886139, 32886148, 32886185, 32886188, 32886190, 32886197, 32886265, 32886270, 32886304, 32886311, 32886337, 32886349, 32886431, 32886447, 32886456, 32886486, 32886497, 32886514, 32886532, 32886540, 32886592, 32886604, 32886622, 32886692, 32886693, 32886701, 32886715, 32886728, 32886751, 32886752, 32886757, 32886834, 32886899, 32886943, 32886950, 32886951, 32886952, 32886959, 32886988, 32887083, 32887090, 32887108, 32887134, 32887136, 32887257, 32887297, 32887352, 32887397, 32887416, 32887436, 32887439, 32887440, 32887454, 32887475, 32887490, 32887504, 32887518, 32887556, 32887588, 32887592, 32887606, 32887799, 32887800, 32887845, 32887862, 32887872, 32887960, 32887975, 32888011, 32888015, 32888023, 32888031, 32888058, 32888084, 32888194, 32888260, 32888277, 32888314, 32888323, 32888353, 32888354, 32888390, 32888392, 32888419, 32888432, 32888433, 32888469, 32888481, 32888483, 32888553, 32888668, 32888692, 32888694, 32888709, 32888722, 32888823, 32888855, 32888891, 32888899, 32888900, 32888930, 32888931, 32888945, 32888972, 32888982, 32889027, 32889037, 32889131, 32889135, 32889212, 32889245, 32889346, 32889353, 32889419, 32889454, 32889709, 32889839, 32890209, 32890227, 32890374, 32890562, 32890592, 32890636, 32891322, 32891487, 32891522, 32891647, 32891718, 32891758, 32891809, 32892143, 32892163, 32892223, 32892635, 32892890, 32893330, 32893972, 32893994, 32894879, 32894961, 32895119, 32895238, 32896362, 32896439, 32896511, 32896879, 32897527, 32897584, 32898093, 32898442, 32899287, 32902412, 32902667, 32904667, 32906784, 32908537, 32910067, 32924969, 32935806, 32952853, 32953544, 32954768, 32963933, 32969797, 32977181], "created_at": "2022-09-18T01:51:13Z", "created_at_i": 1663465873, "num_comments": 676, "objectID": "32883596", "points": 557, "story_id": 32883596, "story_text": "I have to find a strategy to fix this development team without managing them directly. Here is an overview:<p>- this code generates more than 20 million dollars a year of revenue<p>- it runs on PHP<p>- it has been developed for 12 years directly on production with no source control ( hello index-new_2021-test-john_v2.php )<p>- it doesn&#x27;t use composer or any dependency management. It&#x27;s all require_once.<p>- it doesn&#x27;t use any framework<p>- the routing is managed exclusively as rewrites in NGInX ( the NGInX config is around 10,000 lines )<p>- no code has ever been deleted. Things are just added . I gather the reason for that is because it was developed on production directly and deleting things is too risky.<p>- the database structure is the same mess, no migrations, etc... When adding a column, because of the volume of data, they add a new table with a join.<p>- JS and CSS is the same. Multiple versions of jQuery fighting each other depending on which page you are or even on the same page.<p>- no MVC pattern of course, or whatever pattern. No templating library. It&#x27;s PHP 2003 style.<p>- In many places I see controllers like files making curl requests to its own rest API (via domain name, not localhost) doing oauth authorizations, etc... Just to get the menu items or list of products...<p>- no caching ( but there is memcached but only used for sessions  ...)<p>- team is 3 people, quite junior. One backend, one front, one iOS&#x2F;android. Resistance to change is huge.<p>- productivity is abysmal which is understandable. The mess is just too huge to be able to build anything.<p>This business unit has a pretty aggressive roadmap as management and HQ has no real understanding of these blockers. And post COVID, budget is really tight.<p>I know a full rewrite is necessary, but how to balance it?", "title": "Ask HN: Inherited the worst code and tech team I have ever seen. How to fix it?", "updated_at": "2026-02-25T23:11:19Z"}], "hitsPerPage": 15, "nbHits": 3, "nbPages": 1, "page": 0, "params": "query=nginx-config+production&tags=story&hitsPerPage=15&advancedSyntax=true&analyticsTags=backend", "processingTimeMS": 12, "processingTimingsMS": {"_request": {"roundTrip": 28}, "afterFetch": {"format": {"highlighting": 1, "total": 1}}, "fetch": {"query": 9, "scanning": 1, "total": 11}, "total": 12}, "query": "nginx-config production", "serverTimeMS": 14}}