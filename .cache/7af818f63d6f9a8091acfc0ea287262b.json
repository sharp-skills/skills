{"d": [{"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2389", "id": 2322253890, "node_id": "I_kwDOFqRI7c6KashC", "number": 2389, "title": "[BUG]: drizzle-kit push is not detecting Postgres enum label already exists", "user": {"login": "matowang", "id": 38610107, "node_id": "MDQ6VXNlcjM4NjEwMTA3", "avatar_url": "https://avatars.githubusercontent.com/u/38610107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matowang", "html_url": "https://github.com/matowang", "followers_url": "https://api.github.com/users/matowang/followers", "following_url": "https://api.github.com/users/matowang/following{/other_user}", "gists_url": "https://api.github.com/users/matowang/gists{/gist_id}", "starred_url": "https://api.github.com/users/matowang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matowang/subscriptions", "organizations_url": "https://api.github.com/users/matowang/orgs", "repos_url": "https://api.github.com/users/matowang/repos", "events_url": "https://api.github.com/users/matowang/events{/privacy}", "received_events_url": "https://api.github.com/users/matowang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 73, "created_at": "2024-05-29T03:01:19Z", "updated_at": "2025-06-15T04:22:41Z", "closed_at": "2024-10-22T07:55:32Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.30.9\n\n### What version of `drizzle-kit` are you using?\n\n0.21.2\n\n### Describe the Bug\n\nThis bug happens every so often. Is there a work around?\r\n\r\npnpm drizzle-kit push\r\ndrizzle-kit: v0.21.2\r\ndrizzle-orm: v0.30.9\r\n\r\nNo config path provided, using default path\r\n\r\nUsing 'pg' driver for database querying\r\n\r\nWarning  You are about to execute current statements:\r\n\r\nALTER TYPE \"job_name\" ADD VALUE 'SET_PCS_POWER_KW';\r\n\r\nerror: enum label \"SET_PCS_POWER_KW\" already exists\r\n \r\nkit@0.21.2/node_modules/drizzle-kit/bin.cjs:113632:7) {\r\n  length: 102,\r\n  severity: 'ERROR',\r\n  code: '42710',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'pg_enum.c',\r\n  line: '293',\r\n  routine: 'AddEnumLabel'\r\n}\r\n\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389/reactions", "total_count": 60, "+1": 60, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2389/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2344", "id": 2303512874, "node_id": "I_kwDOFqRI7c6JTNEq", "number": 2344, "title": "[BUG]: TypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [{"login": "L-Mario564", "id": 75393279, "node_id": "MDQ6VXNlcjc1MzkzMjc5", "avatar_url": "https://avatars.githubusercontent.com/u/75393279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/L-Mario564", "html_url": "https://github.com/L-Mario564", "followers_url": "https://api.github.com/users/L-Mario564/followers", "following_url": "https://api.github.com/users/L-Mario564/following{/other_user}", "gists_url": "https://api.github.com/users/L-Mario564/gists{/gist_id}", "starred_url": "https://api.github.com/users/L-Mario564/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/L-Mario564/subscriptions", "organizations_url": "https://api.github.com/users/L-Mario564/orgs", "repos_url": "https://api.github.com/users/L-Mario564/repos", "events_url": "https://api.github.com/users/L-Mario564/events{/privacy}", "received_events_url": "https://api.github.com/users/L-Mario564/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 70, "created_at": "2024-05-17T20:16:49Z", "updated_at": "2024-11-14T10:12:00Z", "closed_at": "2024-11-06T19:40:36Z", "assignee": {"login": "L-Mario564", "id": 75393279, "node_id": "MDQ6VXNlcjc1MzkzMjc5", "avatar_url": "https://avatars.githubusercontent.com/u/75393279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/L-Mario564", "html_url": "https://github.com/L-Mario564", "followers_url": "https://api.github.com/users/L-Mario564/followers", "following_url": "https://api.github.com/users/L-Mario564/following{/other_user}", "gists_url": "https://api.github.com/users/L-Mario564/gists{/gist_id}", "starred_url": "https://api.github.com/users/L-Mario564/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/L-Mario564/subscriptions", "organizations_url": "https://api.github.com/users/L-Mario564/orgs", "repos_url": "https://api.github.com/users/L-Mario564/repos", "events_url": "https://api.github.com/users/L-Mario564/events{/privacy}", "received_events_url": "https://api.github.com/users/L-Mario564/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.2\r\n\r\n### Describe the Bug\r\n\r\nif I have tables with no composite primary keys(table => pk: primaryKey(....) , then i can change my column names and do whatever i want with no issue in push.\r\n\r\nissues arises when:\r\n* changing column names, adding new columns, tables to schema that any table has composite primary key. \r\n* if schema already exists in database and i want to add composite primary key.\r\n\r\neverytime before pushing new version of the schema, i have to drop all my tables in db. otherwise `drizzle-kit push` command keeps failing with this error.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-orm/assets/138553763/e0b69a2b-9af0-4d46-855a-e04620a0b624)\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Environment & setup\r\n\r\nnext.js 14 app router application", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344/reactions", "total_count": 22, "+1": 22, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2344/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2654", "id": 2416958967, "node_id": "I_kwDOFqRI7c6QD933", "number": 2654, "title": "[BUG]: TypeScript error on optional fields during update (and insert) operation", "user": {"login": "DavidHavl", "id": 2153848, "node_id": "MDQ6VXNlcjIxNTM4NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/2153848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidHavl", "html_url": "https://github.com/DavidHavl", "followers_url": "https://api.github.com/users/DavidHavl/followers", "following_url": "https://api.github.com/users/DavidHavl/following{/other_user}", "gists_url": "https://api.github.com/users/DavidHavl/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidHavl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidHavl/subscriptions", "organizations_url": "https://api.github.com/users/DavidHavl/orgs", "repos_url": "https://api.github.com/users/DavidHavl/repos", "events_url": "https://api.github.com/users/DavidHavl/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidHavl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 60, "created_at": "2024-07-18T17:13:37Z", "updated_at": "2025-05-06T23:27:25Z", "closed_at": "2025-04-24T13:45:11Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.32.0\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.23.0\r\n\r\n### Describe the Bug\r\n\r\nI've encountered a TypeScript error when trying to update an optional field using the set method. The error occurs only for optional fields, while required fields work as expected.\r\n\r\nSteps to reproduce:\r\n\r\n- Define a table with both required and optional fields:\r\n```ts\r\nexport const TasksTable = sqliteTable(\r\n  'tasks',\r\n  {\r\n    id: text('id')\r\n      .primaryKey()\r\n      .$defaultFn(() => createId()),\r\n    title: text('title').notNull(),\r\n    description: text('description')\r\n  },\r\n);\r\n```\r\n- Attempt to update the table with both required and optional fields:\r\n```ts\r\nconst result = await db\r\n  .update(TasksTable)\r\n  .set({\r\n    title: 'sdfg',\r\n    description: 'asdf'\r\n  });\r\n```\r\n\r\n\r\nExpected behavior:\r\nThe update operation should work without any TypeScript errors, as all fields being updated are defined in the table schema.\r\n\r\nActual behavior:\r\nTypeScript throws an error for the optional 'description' field:\r\n\"Object literal may only specify known properties, and 'description' does not exist in type\"\r\nThe error does not occur for the required 'title' field.\r\n\r\n\r\n\r\nAdditional notes:\r\n\r\n- The error only occurs for optional fields (those without .notNull())\r\n- Using `as any` type assertion works as a temporary workaround, but it's not a proper solution\r\n\r\nPlease let me know if you need any additional information or clarification to investigate this issue.\r\n\r\n### Expected behavior\r\n\r\nThe update operation should work without any TypeScript errors, as all fields being updated are defined in the table schema.\r\n\r\n### Environment & setup\r\n\r\nDatabase: SQLite\r\nNode: 20\r\nTypescript: 5.3.3", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654/reactions", "total_count": 45, "+1": 40, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 5, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2654/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2251", "id": 2278632898, "node_id": "I_kwDOFqRI7c6H0S3C", "number": 2251, "title": "[BUG]: drizzle-orm@0.30.10 not working with react@18.3.1", "user": {"login": "davidaragundy", "id": 81494336, "node_id": "MDQ6VXNlcjgxNDk0MzM2", "avatar_url": "https://avatars.githubusercontent.com/u/81494336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidaragundy", "html_url": "https://github.com/davidaragundy", "followers_url": "https://api.github.com/users/davidaragundy/followers", "following_url": "https://api.github.com/users/davidaragundy/following{/other_user}", "gists_url": "https://api.github.com/users/davidaragundy/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidaragundy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidaragundy/subscriptions", "organizations_url": "https://api.github.com/users/davidaragundy/orgs", "repos_url": "https://api.github.com/users/davidaragundy/repos", "events_url": "https://api.github.com/users/davidaragundy/events{/privacy}", "received_events_url": "https://api.github.com/users/davidaragundy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [{"login": "RomanNabukhotnyi", "id": 97584054, "node_id": "U_kgDOBdEDtg", "avatar_url": "https://avatars.githubusercontent.com/u/97584054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RomanNabukhotnyi", "html_url": "https://github.com/RomanNabukhotnyi", "followers_url": "https://api.github.com/users/RomanNabukhotnyi/followers", "following_url": "https://api.github.com/users/RomanNabukhotnyi/following{/other_user}", "gists_url": "https://api.github.com/users/RomanNabukhotnyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/RomanNabukhotnyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RomanNabukhotnyi/subscriptions", "organizations_url": "https://api.github.com/users/RomanNabukhotnyi/orgs", "repos_url": "https://api.github.com/users/RomanNabukhotnyi/repos", "events_url": "https://api.github.com/users/RomanNabukhotnyi/events{/privacy}", "received_events_url": "https://api.github.com/users/RomanNabukhotnyi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 53, "created_at": "2024-05-04T01:00:34Z", "updated_at": "2025-02-23T03:40:16Z", "closed_at": "2025-02-10T16:48:28Z", "assignee": {"login": "RomanNabukhotnyi", "id": 97584054, "node_id": "U_kgDOBdEDtg", "avatar_url": "https://avatars.githubusercontent.com/u/97584054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RomanNabukhotnyi", "html_url": "https://github.com/RomanNabukhotnyi", "followers_url": "https://api.github.com/users/RomanNabukhotnyi/followers", "following_url": "https://api.github.com/users/RomanNabukhotnyi/following{/other_user}", "gists_url": "https://api.github.com/users/RomanNabukhotnyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/RomanNabukhotnyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RomanNabukhotnyi/subscriptions", "organizations_url": "https://api.github.com/users/RomanNabukhotnyi/orgs", "repos_url": "https://api.github.com/users/RomanNabukhotnyi/repos", "events_url": "https://api.github.com/users/RomanNabukhotnyi/events{/privacy}", "received_events_url": "https://api.github.com/users/RomanNabukhotnyi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.30.10\n\n### What version of `drizzle-kit` are you using?\n\n_No response_\n\n### Describe the Bug\n\n react@\"18.2.0\" is marked as the peer dependency\r\n\r\n![image](https://github.com/drizzle-team/drizzle-orm/assets/81494336/1613003e-6bbd-42fa-8d14-8a9e6659f473)\r\n\n\n### Expected behavior\n\nthe package should be installed with no problem :)\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251/reactions", "total_count": 32, "+1": 32, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2251/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/781", "id": 1761698189, "node_id": "I_kwDOFqRI7c5pAWGN", "number": 781, "title": "[BUG]:Drizzle-Kit 0.19.0 Fails to Generate Migrations", "user": {"login": "miljan-code", "id": 64324786, "node_id": "MDQ6VXNlcjY0MzI0Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/64324786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miljan-code", "html_url": "https://github.com/miljan-code", "followers_url": "https://api.github.com/users/miljan-code/followers", "following_url": "https://api.github.com/users/miljan-code/following{/other_user}", "gists_url": "https://api.github.com/users/miljan-code/gists{/gist_id}", "starred_url": "https://api.github.com/users/miljan-code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miljan-code/subscriptions", "organizations_url": "https://api.github.com/users/miljan-code/orgs", "repos_url": "https://api.github.com/users/miljan-code/repos", "events_url": "https://api.github.com/users/miljan-code/events{/privacy}", "received_events_url": "https://api.github.com/users/miljan-code/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [{"login": "AlexBlokh", "id": 4045375, "node_id": "MDQ6VXNlcjQwNDUzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4045375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexBlokh", "html_url": "https://github.com/AlexBlokh", "followers_url": "https://api.github.com/users/AlexBlokh/followers", "following_url": "https://api.github.com/users/AlexBlokh/following{/other_user}", "gists_url": "https://api.github.com/users/AlexBlokh/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexBlokh/subscriptions", "organizations_url": "https://api.github.com/users/AlexBlokh/orgs", "repos_url": "https://api.github.com/users/AlexBlokh/repos", "events_url": "https://api.github.com/users/AlexBlokh/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexBlokh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 47, "created_at": "2023-06-17T07:59:19Z", "updated_at": "2024-01-15T01:52:11Z", "closed_at": "2023-06-21T11:40:04Z", "assignee": {"login": "AlexBlokh", "id": 4045375, "node_id": "MDQ6VXNlcjQwNDUzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4045375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexBlokh", "html_url": "https://github.com/AlexBlokh", "followers_url": "https://api.github.com/users/AlexBlokh/followers", "following_url": "https://api.github.com/users/AlexBlokh/following{/other_user}", "gists_url": "https://api.github.com/users/AlexBlokh/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexBlokh/subscriptions", "organizations_url": "https://api.github.com/users/AlexBlokh/orgs", "repos_url": "https://api.github.com/users/AlexBlokh/repos", "events_url": "https://api.github.com/users/AlexBlokh/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexBlokh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.27.0\n\n### What version of `drizzle-kit` are you using?\n\n0.19.0\n\n### Describe the Bug\n\nI was using Drizzle Kit version of 0.18.1 and generating migrations with this command.\r\n\r\n`drizzle-kit generate:pg --config=drizzle.config.ts`\r\n\r\nAs soon as I updated drizzle-kit to 0.19.0 version this command doesn't work anymore throwing the error\r\n\r\n`TypeError [ERR_INVALID_RETURN_PROPERTY_VALUE]: Expected a url string to be returned for the \"url\" from the \"drizzle-kit/loader.mjs 'resolve'\" function but got instance of String.`\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781/reactions", "total_count": 10, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 3}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/781/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2619", "id": 2403949471, "node_id": "I_kwDOFqRI7c6PSVuf", "number": 2619, "title": "[BUG]: TypeError: Object literal may only specify known properties ", "user": {"login": "fn3x", "id": 41343916, "node_id": "MDQ6VXNlcjQxMzQzOTE2", "avatar_url": "https://avatars.githubusercontent.com/u/41343916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fn3x", "html_url": "https://github.com/fn3x", "followers_url": "https://api.github.com/users/fn3x/followers", "following_url": "https://api.github.com/users/fn3x/following{/other_user}", "gists_url": "https://api.github.com/users/fn3x/gists{/gist_id}", "starred_url": "https://api.github.com/users/fn3x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fn3x/subscriptions", "organizations_url": "https://api.github.com/users/fn3x/orgs", "repos_url": "https://api.github.com/users/fn3x/repos", "events_url": "https://api.github.com/users/fn3x/events{/privacy}", "received_events_url": "https://api.github.com/users/fn3x/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3113057252, "node_id": "MDU6TGFiZWwzMTEzMDU3MjUy", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/docs", "name": "docs", "color": "0075ca", "default": false, "description": "Improvements or additions to documentation"}, {"id": 7569311547, "node_id": "LA_kwDOFqRI7c8AAAABwyqHOw", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/docs/undocumented", "name": "docs/undocumented", "color": "D96640", "default": false, "description": ""}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 45, "created_at": "2024-07-11T19:39:55Z", "updated_at": "2025-12-30T12:39:49Z", "closed_at": "2024-12-16T15:56:55Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.32.0\n\n### What version of `drizzle-kit` are you using?\n\n0.23.0\n\n### Describe the Bug\n\nI bumped the versions of drizzle-orm 0.31.4 -> 0.32.0 and drizzle-kit 0.22.8 -> 0.23.0. After that my project stopped from building because some of the columns are not being recognized by the type system. I provided the error log, table definition and code that uses it below.\r\n\r\nTS compiler error log:\r\n```\r\nsrc/services/sessions/index.ts:31:8 - error TS2769: No overload matches this call.\r\n  Overload 1 of 2, '(value: { currency: string | SQL<unknown> | Placeholder<string, any>; platformType: number | SQL<unknown> | Placeholder<string, any>; sessionId: string | SQL<...> | Placeholder<...>; playerId: number | ... 1 more ... | Placeholder<...>; startTime: string | ... 1 more ... | Placeholder<...>; partnerTokenId: number | ... 1 more ... | Placeholder<...>; partnerSessionId: string | ... 1 more ... | Placeholder<...>; }): MySqlInsertBase<...>', gave the following error.\r\n    Object literal may only specify known properties, and 'isUsed' does not exist in type '{ currency: string | SQL<unknown> | Placeholder<string, any>; platformType: number | SQL<unknown> | Placeholder<string, any>; sessionId: string | SQL<unknown> | Placeholder<...>; playerId: number | ... 1 more ... | Placeholder<...>; startTime: string | ... 1 more ... | Placeholder<...>; partnerTokenId: number | ... ...'.\r\n  Overload 2 of 2, '(values: { currency: string | SQL<unknown> | Placeholder<string, any>; platformType: number | SQL<unknown> | Placeholder<string, any>; sessionId: string | SQL<...> | Placeholder<...>; playerId: number | ... 1 more ... | Placeholder<...>; startTime: string | ... 1 more ... | Placeholder<...>; partnerTokenId: number | ... 1 more ... | Placeholder<...>; partnerSessionId: string | ... 1 more ... | Placeholder<...>; }[]): MySqlInsertBase<...>', gave the following error.\r\n    Object literal may only specify known properties, and 'sessionId' does not exist in type '{ currency: string | SQL<unknown> | Placeholder<string, any>; platformType: number | SQL<unknown> | Placeholder<string, any>; sessionId: string | SQL<unknown> | Placeholder<...>; playerId: number | ... 1 more ... | Placeholder<...>; startTime: string | ... 1 more ... | Placeholder<...>; partnerTokenId: number | ... ...'.\r\n\r\n31       .values({\r\n```\r\n\r\nTable definition in schema.ts:\r\n```\r\nexport const playersAuthSessions = mysqlTable(\"players_auth_sessions\", {\r\n\tid: int(\"id\").autoincrement().notNull(),\r\n\tsessionId: varchar(\"sessionId\", { length: 40 }).notNull(),\r\n\tplayerId: int(\"playerId\").notNull(),\r\n\tcurrency: varchar(\"currency\", { length: 4 }).notNull(),\r\n\tplatformType: int(\"platformType\").notNull(),\r\n\tstartTime: datetime(\"startTime\", { mode: 'string'}).notNull(),\r\n\tendTime: datetime(\"endTime\", { mode: 'string'}),\r\n\tisActive: tinyint(\"isActive\"),\r\n\tisUsed: tinyint(\"isUsed\"),\r\n\tpartnerTokenId: int(\"partnerTokenId\").notNull(),\r\n\tpartnerSessionId: varchar(\"partnerSessionId\", { length: 64 }).notNull(),\r\n\tplayerAddress: varchar(\"playerAddress\", { length: 64 }),\r\n\thttpCFIPCountry: varchar(\"httpCFIPCountry\", { length: 2 }),\r\n\thttpCFCoordinates: varchar(\"httpCFCoordinates\", { length: 64 }),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tsessionId: index(\"sessionId\").on(table.sessionId),\r\n\t\tplayerId_idx: index(\"playerId_idx\").on(table.playerId),\r\n\t\tplayers_auth_sessions_id: primaryKey({ columns: [table.id], name: \"players_auth_sessions_id\"}),\r\n\t\tsessionId_UNIQUE: unique(\"sessionId_UNIQUE\").on(table.sessionId),\r\n\t}\r\n});\r\n```\r\n\r\nUsage of table to perform queries:\r\n```\r\n    import { partners, partnersTokens, players, playersAuthSessions } from \"../../schema\"\r\n\r\n    const session = {\r\n      playerId: request.body.player.id,\r\n      currency: request.body.player.currency,\r\n      platformType: +request.body.settings.platform.type,\r\n      sessionId: uuidv4(),\r\n      partnerTokenId: request.tokenId,\r\n      partnerSessionId: request.body.player.session.sid,\r\n      startTime: DateTime.now().toUTC().toSQL({ includeOffset: false })\r\n    }\r\n\r\n    await this.db.insert(playersAuthSessions)\r\n      .values({\r\n        sessionId: session.sessionId,\r\n        playerId: session.playerId,\r\n        platformType: session.platformType,\r\n        partnerSessionId: session.partnerSessionId,\r\n        partnerTokenId: session.partnerTokenId,\r\n        currency: session.currency,\r\n        startTime: session.startTime,\r\n        isUsed: 0,\r\n        isActive: 0\r\n      })\r\n```\n\n### Expected behavior\n\nAll specified columns being recognized by the type system on writing queries\n\n### Environment & setup\n\nNode.js v20.12.2\r\ndrizzle-kit v0.32.0\r\ndrizzle-orm v0.23.0", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619/reactions", "total_count": 23, "+1": 19, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2619/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/1554", "id": 2010571930, "node_id": "I_kwDOFqRI7c531uSa", "number": 1554, "title": "[BUG]: how to recover from snapshot.json data is malformed", "user": {"login": "quantuminformation", "id": 216566, "node_id": "MDQ6VXNlcjIxNjU2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/216566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quantuminformation", "html_url": "https://github.com/quantuminformation", "followers_url": "https://api.github.com/users/quantuminformation/followers", "following_url": "https://api.github.com/users/quantuminformation/following{/other_user}", "gists_url": "https://api.github.com/users/quantuminformation/gists{/gist_id}", "starred_url": "https://api.github.com/users/quantuminformation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quantuminformation/subscriptions", "organizations_url": "https://api.github.com/users/quantuminformation/orgs", "repos_url": "https://api.github.com/users/quantuminformation/repos", "events_url": "https://api.github.com/users/quantuminformation/events{/privacy}", "received_events_url": "https://api.github.com/users/quantuminformation/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 43, "created_at": "2023-11-25T11:01:08Z", "updated_at": "2025-10-29T01:14:41Z", "closed_at": "2024-01-12T12:02:49Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\nlatest\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\nlatest\r\n\r\n### Describe the Bug\r\n\r\nWhen trying `drizzle-kit generate:sqlite --config drizzle.config.ts` I get\r\n```\r\ndrizzle-kit: v0.20.4\r\ndrizzle-orm: v0.29.0\r\n\r\nReading config file '/Users/nikos/WebstormProjects/coffeeconnect/drizzle.config.ts'\r\ndrizzle/meta/0000_snapshot.json data is malformed\r\n```\r\n\r\nthe json doesnt have any syntax errors\r\n\r\n### Expected behavior\r\n\r\nmigration created\r\n\r\n### Environment & setup\r\n\r\nMAC OS 14.0 (23A339)\r\nnode v20.9.0\r\n\r\nthe JSON:\r\n\r\n```json\r\n{\r\n  \"version\": \"5\",\r\n  \"dialect\": \"sqlite\",\r\n  \"id\": \"2420c080-21b9-47c6-9e05-77c947766f87\",\r\n  \"prevId\": \"00000000-0000-0000-0000-000000000000\",\r\n  \"tables\": {\r\n    \"audit_log\": {\r\n      \"name\": \"audit_log\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"action\": {\r\n          \"name\": \"action\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"table\": {\r\n          \"name\": \"table\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"record_id\": {\r\n          \"name\": \"record_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"data\": {\r\n          \"name\": \"data\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"user_id\": {\r\n          \"name\": \"user_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"audit_log_user_id_user_id_fk\": {\r\n          \"name\": \"audit_log_user_id_user_id_fk\",\r\n          \"tableFrom\": \"audit_log\",\r\n          \"tableTo\": \"user\",\r\n          \"columnsFrom\": [\r\n            \"user_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"booking\": {\r\n      \"name\": \"booking\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"user_id\": {\r\n          \"name\": \"user_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"coupon_id\": {\r\n          \"name\": \"coupon_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"discount_percentage\": {\r\n          \"name\": \"discount_percentage\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"discount_value\": {\r\n          \"name\": \"discount_value\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"coupon_snapshot\": {\r\n          \"name\": \"coupon_snapshot\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"booking_user_id_user_id_fk\": {\r\n          \"name\": \"booking_user_id_user_id_fk\",\r\n          \"tableFrom\": \"booking\",\r\n          \"tableTo\": \"user\",\r\n          \"columnsFrom\": [\r\n            \"user_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"booking_coupon_id_coupon_id_fk\": {\r\n          \"name\": \"booking_coupon_id_coupon_id_fk\",\r\n          \"tableFrom\": \"booking\",\r\n          \"tableTo\": \"coupon\",\r\n          \"columnsFrom\": [\r\n            \"coupon_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"no action\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"booking_option\": {\r\n      \"name\": \"booking_option\",\r\n      \"columns\": {\r\n        \"booking_id\": {\r\n          \"name\": \"booking_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"option_id\": {\r\n          \"name\": \"option_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"quantity\": {\r\n          \"name\": \"quantity\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": 1\r\n        },\r\n        \"unit_price\": {\r\n          \"name\": \"unit_price\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"option_snapshot\": {\r\n          \"name\": \"option_snapshot\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"booking_option_booking_id_booking_id_fk\": {\r\n          \"name\": \"booking_option_booking_id_booking_id_fk\",\r\n          \"tableFrom\": \"booking_option\",\r\n          \"tableTo\": \"booking\",\r\n          \"columnsFrom\": [\r\n            \"booking_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"booking_option_option_id_option_id_fk\": {\r\n          \"name\": \"booking_option_option_id_option_id_fk\",\r\n          \"tableFrom\": \"booking_option\",\r\n          \"tableTo\": \"option\",\r\n          \"columnsFrom\": [\r\n            \"option_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {\r\n        \"booking_option_booking_id_option_id_pk\": {\r\n          \"columns\": [\r\n            \"booking_id\",\r\n            \"option_id\"\r\n          ]\r\n        }\r\n      },\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"booking_slot\": {\r\n      \"name\": \"booking_slot\",\r\n      \"columns\": {\r\n        \"booking_id\": {\r\n          \"name\": \"booking_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"slot_id\": {\r\n          \"name\": \"slot_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"start_time\": {\r\n          \"name\": \"start_time\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"length\": {\r\n          \"name\": \"length\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"block_price\": {\r\n          \"name\": \"block_price\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"block_quantity\": {\r\n          \"name\": \"block_quantity\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"slot_snapshot\": {\r\n          \"name\": \"slot_snapshot\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"booking_slot_booking_id_booking_id_fk\": {\r\n          \"name\": \"booking_slot_booking_id_booking_id_fk\",\r\n          \"tableFrom\": \"booking_slot\",\r\n          \"tableTo\": \"booking\",\r\n          \"columnsFrom\": [\r\n            \"booking_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"booking_slot_slot_id_slot_id_fk\": {\r\n          \"name\": \"booking_slot_slot_id_slot_id_fk\",\r\n          \"tableFrom\": \"booking_slot\",\r\n          \"tableTo\": \"slot\",\r\n          \"columnsFrom\": [\r\n            \"slot_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {\r\n        \"booking_slot_booking_id_slot_id_pk\": {\r\n          \"columns\": [\r\n            \"booking_id\",\r\n            \"slot_id\"\r\n          ]\r\n        }\r\n      },\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"coupon\": {\r\n      \"name\": \"coupon\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"code\": {\r\n          \"name\": \"code\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"discount_percentage\": {\r\n          \"name\": \"discount_percentage\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"discount_value\": {\r\n          \"name\": \"discount_value\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"quantity\": {\r\n          \"name\": \"quantity\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"valid_from\": {\r\n          \"name\": \"valid_from\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"valid_to\": {\r\n          \"name\": \"valid_to\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"expires_at\": {\r\n          \"name\": \"expires_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"organisation_id\": {\r\n          \"name\": \"organisation_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"space_id\": {\r\n          \"name\": \"space_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"slot_id\": {\r\n          \"name\": \"slot_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"deleted_at\": {\r\n          \"name\": \"deleted_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {\r\n        \"coupon_code_organisation_id_deleted_at_unique\": {\r\n          \"name\": \"coupon_code_organisation_id_deleted_at_unique\",\r\n          \"columns\": [\r\n            \"code\",\r\n            \"organisation_id\",\r\n            \"deleted_at\"\r\n          ],\r\n          \"isUnique\": true\r\n        }\r\n      },\r\n      \"foreignKeys\": {\r\n        \"coupon_organisation_id_organisation_id_fk\": {\r\n          \"name\": \"coupon_organisation_id_organisation_id_fk\",\r\n          \"tableFrom\": \"coupon\",\r\n          \"tableTo\": \"organisation\",\r\n          \"columnsFrom\": [\r\n            \"organisation_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"coupon_space_id_space_id_fk\": {\r\n          \"name\": \"coupon_space_id_space_id_fk\",\r\n          \"tableFrom\": \"coupon\",\r\n          \"tableTo\": \"space\",\r\n          \"columnsFrom\": [\r\n            \"space_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"coupon_slot_id_slot_id_fk\": {\r\n          \"name\": \"coupon_slot_id_slot_id_fk\",\r\n          \"tableFrom\": \"coupon\",\r\n          \"tableTo\": \"slot\",\r\n          \"columnsFrom\": [\r\n            \"slot_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"option\": {\r\n      \"name\": \"option\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"unit_price\": {\r\n          \"name\": \"unit_price\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"max_units\": {\r\n          \"name\": \"max_units\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": 1\r\n        },\r\n        \"organisation_id\": {\r\n          \"name\": \"organisation_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"space_id\": {\r\n          \"name\": \"space_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"slote_id\": {\r\n          \"name\": \"slote_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"deleted_at\": {\r\n          \"name\": \"deleted_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"option_organisation_id_organisation_id_fk\": {\r\n          \"name\": \"option_organisation_id_organisation_id_fk\",\r\n          \"tableFrom\": \"option\",\r\n          \"tableTo\": \"organisation\",\r\n          \"columnsFrom\": [\r\n            \"organisation_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"option_space_id_space_id_fk\": {\r\n          \"name\": \"option_space_id_space_id_fk\",\r\n          \"tableFrom\": \"option\",\r\n          \"tableTo\": \"space\",\r\n          \"columnsFrom\": [\r\n            \"space_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"no action\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"option_slote_id_slot_id_fk\": {\r\n          \"name\": \"option_slote_id_slot_id_fk\",\r\n          \"tableFrom\": \"option\",\r\n          \"tableTo\": \"slot\",\r\n          \"columnsFrom\": [\r\n            \"slote_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"no action\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"organisation\": {\r\n      \"name\": \"organisation\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"lat\": {\r\n          \"name\": \"lat\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"long\": {\r\n          \"name\": \"long\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"organisation_user\": {\r\n      \"name\": \"organisation_user\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"organisation_id\": {\r\n          \"name\": \"organisation_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"user_id\": {\r\n          \"name\": \"user_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"role\": {\r\n          \"name\": \"role\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"organisation_user_organisation_id_organisation_id_fk\": {\r\n          \"name\": \"organisation_user_organisation_id_organisation_id_fk\",\r\n          \"tableFrom\": \"organisation_user\",\r\n          \"tableTo\": \"organisation\",\r\n          \"columnsFrom\": [\r\n            \"organisation_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"organisation_user_user_id_user_id_fk\": {\r\n          \"name\": \"organisation_user_user_id_user_id_fk\",\r\n          \"tableFrom\": \"organisation_user\",\r\n          \"tableTo\": \"user\",\r\n          \"columnsFrom\": [\r\n            \"user_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"slot\": {\r\n      \"name\": \"slot\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"start_time\": {\r\n          \"name\": \"start_time\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"space_id\": {\r\n          \"name\": \"space_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"block_length\": {\r\n          \"name\": \"block_length\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": 30\r\n        },\r\n        \"block_price\": {\r\n          \"name\": \"block_price\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": 0\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"deleted_at\": {\r\n          \"name\": \"deleted_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"slot_space_id_space_id_fk\": {\r\n          \"name\": \"slot_space_id_space_id_fk\",\r\n          \"tableFrom\": \"slot\",\r\n          \"tableTo\": \"space\",\r\n          \"columnsFrom\": [\r\n            \"space_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"slot_day_of_month\": {\r\n      \"name\": \"slot_day_of_month\",\r\n      \"columns\": {\r\n        \"slot_id\": {\r\n          \"name\": \"slot_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"day_of_month\": {\r\n          \"name\": \"day_of_month\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {\r\n        \"slot_day_of_month_slot_id_day_of_month_pk\": {\r\n          \"columns\": [\r\n            \"day_of_month\",\r\n            \"slot_id\"\r\n          ]\r\n        }\r\n      },\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"slot_weekday\": {\r\n      \"name\": \"slot_weekday\",\r\n      \"columns\": {\r\n        \"slot_id\": {\r\n          \"name\": \"slot_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"weekday_id\": {\r\n          \"name\": \"weekday_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {\r\n        \"slot_weekday_slot_id_weekday_id_pk\": {\r\n          \"columns\": [\r\n            \"slot_id\",\r\n            \"weekday_id\"\r\n          ]\r\n        }\r\n      },\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"space\": {\r\n      \"name\": \"space\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"organisation_id\": {\r\n          \"name\": \"organisation_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"seats\": {\r\n          \"name\": \"seats\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"lat\": {\r\n          \"name\": \"lat\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"long\": {\r\n          \"name\": \"long\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"deleted_at\": {\r\n          \"name\": \"deleted_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"space_organisation_id_organisation_id_fk\": {\r\n          \"name\": \"space_organisation_id_organisation_id_fk\",\r\n          \"tableFrom\": \"space\",\r\n          \"tableTo\": \"organisation\",\r\n          \"columnsFrom\": [\r\n            \"organisation_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"space_image\": {\r\n      \"name\": \"space_image\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"space_id\": {\r\n          \"name\": \"space_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"key\": {\r\n          \"name\": \"key\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {\r\n        \"space_image_key_unique\": {\r\n          \"name\": \"space_image_key_unique\",\r\n          \"columns\": [\r\n            \"key\"\r\n          ],\r\n          \"isUnique\": true\r\n        }\r\n      },\r\n      \"foreignKeys\": {\r\n        \"space_image_space_id_space_id_fk\": {\r\n          \"name\": \"space_image_space_id_space_id_fk\",\r\n          \"tableFrom\": \"space_image\",\r\n          \"tableTo\": \"space\",\r\n          \"columnsFrom\": [\r\n            \"space_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"unavailable\": {\r\n      \"name\": \"unavailable\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"reason\": {\r\n          \"name\": \"reason\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"organisation_id\": {\r\n          \"name\": \"organisation_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"space_id\": {\r\n          \"name\": \"space_id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"start_time\": {\r\n          \"name\": \"start_time\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"end_time\": {\r\n          \"name\": \"end_time\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {\r\n        \"unavailable_organisation_id_organisation_id_fk\": {\r\n          \"name\": \"unavailable_organisation_id_organisation_id_fk\",\r\n          \"tableFrom\": \"unavailable\",\r\n          \"tableTo\": \"organisation\",\r\n          \"columnsFrom\": [\r\n            \"organisation_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        },\r\n        \"unavailable_space_id_space_id_fk\": {\r\n          \"name\": \"unavailable_space_id_space_id_fk\",\r\n          \"tableFrom\": \"unavailable\",\r\n          \"tableTo\": \"space\",\r\n          \"columnsFrom\": [\r\n            \"space_id\"\r\n          ],\r\n          \"columnsTo\": [\r\n            \"id\"\r\n          ],\r\n          \"onDelete\": \"cascade\",\r\n          \"onUpdate\": \"no action\"\r\n        }\r\n      },\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"user\": {\r\n      \"name\": \"user\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"email\": {\r\n          \"name\": \"email\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"phone\": {\r\n          \"name\": \"phone\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false\r\n        },\r\n        \"password_hash\": {\r\n          \"name\": \"password_hash\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"email_verified\": {\r\n          \"name\": \"email_verified\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": false\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        },\r\n        \"updated_at\": {\r\n          \"name\": \"updated_at\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {\r\n        \"user_email_unique\": {\r\n          \"name\": \"user_email_unique\",\r\n          \"columns\": [\r\n            \"email\"\r\n          ],\r\n          \"isUnique\": true\r\n        }\r\n      },\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    },\r\n    \"weekday\": {\r\n      \"name\": \"weekday\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"integer\",\r\n          \"primaryKey\": true,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"name\": {\r\n          \"name\": \"name\",\r\n          \"type\": \"text\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        }\r\n      },\r\n      \"indexes\": {},\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {},\r\n      \"uniqueConstraints\": {}\r\n    }\r\n  },\r\n  \"enums\": {},\r\n  \"_meta\": {\r\n    \"schemas\": {},\r\n    \"tables\": {},\r\n    \"columns\": {}\r\n  }\r\n}\r\n```", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1554/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2066", "id": 2207196056, "node_id": "I_kwDOFqRI7c6DjyOY", "number": 2066, "title": "[BUG]: Deeply nested queries fail due to table name length", "user": {"login": "EamonHeffernan", "id": 16983388, "node_id": "MDQ6VXNlcjE2OTgzMzg4", "avatar_url": "https://avatars.githubusercontent.com/u/16983388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EamonHeffernan", "html_url": "https://github.com/EamonHeffernan", "followers_url": "https://api.github.com/users/EamonHeffernan/followers", "following_url": "https://api.github.com/users/EamonHeffernan/following{/other_user}", "gists_url": "https://api.github.com/users/EamonHeffernan/gists{/gist_id}", "starred_url": "https://api.github.com/users/EamonHeffernan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EamonHeffernan/subscriptions", "organizations_url": "https://api.github.com/users/EamonHeffernan/orgs", "repos_url": "https://api.github.com/users/EamonHeffernan/repos", "events_url": "https://api.github.com/users/EamonHeffernan/events{/privacy}", "received_events_url": "https://api.github.com/users/EamonHeffernan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 7605218566, "node_id": "LA_kwDOFqRI7c8AAAABxU5tBg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/rqb", "name": "rqb", "color": "0052CC", "default": false, "description": "relational queries"}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}, {"id": 9343697333, "node_id": "LA_kwDOFqRI7c8AAAACLO2BtQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug/fixed-in-beta", "name": "bug/fixed-in-beta", "color": "a31879", "default": false, "description": "This bug has been fixed in beta (or will be soon)."}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 42, "created_at": "2024-03-26T04:03:48Z", "updated_at": "2026-01-12T19:34:40Z", "closed_at": "2026-01-03T19:27:32Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.30.1\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.20.14\r\n\r\n### Describe the Bug\r\n\r\nWhen creating a query with deeply nested data, the sql generated uses names based on the relation names that have been set up, with more text being appended to the name for each level of depth.\r\n\"table1\"\r\n\"table1_table2\"\r\n\"table1_table2_table3\"\r\netc...\r\n\r\nIf this reaches the limit for the length of a table name, the database will truncate the names to the number of allowed characters, and fail with the error `error: table name \"documentVersions_workflowStep_workflow_contract_entities_userEn\" specified more than once` because there were multiple more tables in the name that are cut off. They instead all get truncated to the same string which causes an error.\r\n\r\n### Expected behavior\r\n\r\nDrizzle should either use shorter names upon reaching the limit for a table name, or use aliases within the request that get turned back into the correct names upon response. This ideally should not be something the drizzle user has to worry about, as the query builder should preferably work without having to manually set table names for all the joins.\r\n\r\n### Environment & setup\r\n\r\nThis occurs using postgresql", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066/reactions", "total_count": 60, "+1": 55, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 5}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2066/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/724", "id": 1744552137, "node_id": "I_kwDOFqRI7c5n-8DJ", "number": 724, "title": "[BUG]: jsonb always inserted as a json string when using postgres-js.", "user": {"login": "RyanDurk", "id": 3519748, "node_id": "MDQ6VXNlcjM1MTk3NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/3519748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RyanDurk", "html_url": "https://github.com/RyanDurk", "followers_url": "https://api.github.com/users/RyanDurk/followers", "following_url": "https://api.github.com/users/RyanDurk/following{/other_user}", "gists_url": "https://api.github.com/users/RyanDurk/gists{/gist_id}", "starred_url": "https://api.github.com/users/RyanDurk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RyanDurk/subscriptions", "organizations_url": "https://api.github.com/users/RyanDurk/orgs", "repos_url": "https://api.github.com/users/RyanDurk/repos", "events_url": "https://api.github.com/users/RyanDurk/events{/privacy}", "received_events_url": "https://api.github.com/users/RyanDurk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "Angelelz", "id": 34462576, "node_id": "MDQ6VXNlcjM0NDYyNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/34462576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Angelelz", "html_url": "https://github.com/Angelelz", "followers_url": "https://api.github.com/users/Angelelz/followers", "following_url": "https://api.github.com/users/Angelelz/following{/other_user}", "gists_url": "https://api.github.com/users/Angelelz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Angelelz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Angelelz/subscriptions", "organizations_url": "https://api.github.com/users/Angelelz/orgs", "repos_url": "https://api.github.com/users/Angelelz/repos", "events_url": "https://api.github.com/users/Angelelz/events{/privacy}", "received_events_url": "https://api.github.com/users/Angelelz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 42, "created_at": "2023-06-06T20:30:16Z", "updated_at": "2025-11-14T02:52:00Z", "closed_at": "2024-08-08T14:31:01Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.26.5\n\n### What version of `drizzle-kit` are you using?\n\n0.18.1\n\n### Describe the Bug\n\nInserting an object into a postgres jsonb field with db.insert only inserts a string when using the postgres-js.adapter.\n\n### Expected behavior\n\nWith the pg package, an object is inserted using the code below, which is the expected behavior.\r\n\r\nWith the postgres-js package, a string is inserted into the table using the same code.\n\n### Environment & setup\n\ndrizzle packages as above, and, \"pg\": \"8.11.0\" and \"postgres\": \"3.3.5\"\r\n\r\nschema.ts:\r\nimport { pgTable, jsonb } from \"drizzle-orm/pg-core\";\r\n\r\nexport const logs = pgTable(\"log\", {\r\n  line: jsonb(\"line\").$type<object>(),\r\n});\r\n\r\nload.ts:\r\n\r\n  let lines: { line: object }[] = [];\r\n  let n = 0;\r\n\r\n  for await (const line of rl) {\r\n    const lineObj = JSON.parse(line);\r\n    lines.push({ line: lineObj });\r\n\r\n    if (++n > numLines) {\r\n      await runFunction(lines);\r\n      lines = [];\r\n      n = 0;\r\n    }\r\n  }\r\n\r\n  await runFunction(lines);\r\n\r\nrunFunction: async (lines) => {\r\n      await db.insert(logs).values(lines);\r\n    }\r\n  \r\n  ", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724/reactions", "total_count": 54, "+1": 54, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/724/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/636", "id": 1727315324, "node_id": "I_kwDOFqRI7c5m9L18", "number": 636, "title": "[BUG]: drizzle-kit generates incorrect foreign key references to a table from a different schema when using pgSchema", "user": {"login": "cs-clarence", "id": 71768661, "node_id": "MDQ6VXNlcjcxNzY4NjYx", "avatar_url": "https://avatars.githubusercontent.com/u/71768661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cs-clarence", "html_url": "https://github.com/cs-clarence", "followers_url": "https://api.github.com/users/cs-clarence/followers", "following_url": "https://api.github.com/users/cs-clarence/following{/other_user}", "gists_url": "https://api.github.com/users/cs-clarence/gists{/gist_id}", "starred_url": "https://api.github.com/users/cs-clarence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cs-clarence/subscriptions", "organizations_url": "https://api.github.com/users/cs-clarence/orgs", "repos_url": "https://api.github.com/users/cs-clarence/repos", "events_url": "https://api.github.com/users/cs-clarence/events{/privacy}", "received_events_url": "https://api.github.com/users/cs-clarence/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 42, "created_at": "2023-05-26T10:07:44Z", "updated_at": "2024-12-09T03:38:50Z", "closed_at": "2024-01-05T09:49:21Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.26.1\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.18.1\r\n\r\n### Describe the Bug\r\n\r\nI have this file that has two schemas, `iam` and `chat`. The `iam` scheme has `users` table and `chat` schema has `chatRooms` table. That `chatRooms` table has a foreign key that references the primary key for `users`.\r\n```ts\r\nimport { bigserial, pgSchema, uniqueIndex, varchar } from \"drizzle-orm/pg-core\";\r\n\r\nexport const iamSchema = pgSchema(\"iam\");\r\nconst iamTable = iamSchema.table;\r\n\r\nexport const users = iamTable(\r\n  \"users\",\r\n  {\r\n    id: bigserial(\"id\", { mode: \"bigint\" }).primaryKey(),\r\n    username: varchar(\"username\").notNull(),\r\n    emailAddress: varchar(\"email_address\").notNull(),\r\n    passwordHash: varchar(\"password_hash\").notNull(),\r\n  },\r\n  (users) => {\r\n    return {\r\n      usernameIndex: uniqueIndex(\"username_idx\").on(users.username),\r\n      emailAddressIndex: uniqueIndex(\"email_address_idx\").on(\r\n        users.emailAddress,\r\n      ),\r\n    };\r\n  },\r\n);\r\n\r\nexport const chatSchema = pgSchema(\"chat\");\r\n\r\nexport const chatTable = chatSchema.table;\r\n\r\nexport const chatRooms = chatTable(\"chat_rooms\", {\r\n  id: bigserial(\"id\", { mode: \"bigint\" }).primaryKey(),\r\n});\r\n\r\nexport const chatRoomMemberships = chatTable(\"chat_room_memberships\", {\r\n  chatRoomID: bigserial(\"chat_room_id\", { mode: \"bigint\" })\r\n    .notNull()\r\n    .references(() => chatRooms.id),\r\n  userID: bigserial(\"user_id\", { mode: \"bigint\" })\r\n    .notNull()\r\n    .references(() => users.id),\r\n});\r\n```\r\n\r\nUsing `drizzle-kit generate:pg` generates the following sql:\r\n```sql\r\n-- snipped\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"chat\".\"chat_room_memberships\" ADD CONSTRAINT \"chat_room_memberships_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"chat\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nThe foreign key references `\"chat\".\"users\"(\"id\")` instead of `\"iam\".\"users\"(\"id\")`.\r\n\r\n### Expected behavior\r\n\r\nThe migration file generated by `drizzle-kit` should correctly reference table and columns from another schema in foreign keys.\r\n\r\n### Environment & setup\r\n\r\nPostgres\r\nFedora Linux", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636/reactions", "total_count": 18, "+1": 12, "-1": 0, "laugh": 0, "hooray": 0, "confused": 6, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/636/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2699", "id": 2433401472, "node_id": "I_kwDOFqRI7c6RCsKA", "number": 2699, "title": "[BUG]: Please install latest version of \"drizzle-orm\" - with latest Drizzle version", "user": {"login": "TobiTRy", "id": 67070141, "node_id": "MDQ6VXNlcjY3MDcwMTQx", "avatar_url": "https://avatars.githubusercontent.com/u/67070141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiTRy", "html_url": "https://github.com/TobiTRy", "followers_url": "https://api.github.com/users/TobiTRy/followers", "following_url": "https://api.github.com/users/TobiTRy/following{/other_user}", "gists_url": "https://api.github.com/users/TobiTRy/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiTRy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiTRy/subscriptions", "organizations_url": "https://api.github.com/users/TobiTRy/orgs", "repos_url": "https://api.github.com/users/TobiTRy/repos", "events_url": "https://api.github.com/users/TobiTRy/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiTRy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}, {"id": 7605220461, "node_id": "LA_kwDOFqRI7c8AAAABxU50bQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/monorepo", "name": "monorepo", "color": "DE6893", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 40, "created_at": "2024-07-27T09:55:58Z", "updated_at": "2025-12-05T02:43:15Z", "closed_at": "2024-12-16T17:54:47Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.32.1\n\n### What version of `drizzle-kit` are you using?\n\n0.23.0\n\n### Describe the Bug\n\n**Steps to Reproduce:**\r\n\r\n1. Created a new package within my npm workspace dedicated to database handling.\r\n2. Set up a new Drizzle configuration, ensuring I installed the latest versions of both `drizzle-orm` and `drizzle-kit`.\r\n3. Ran the command `npx drizzle-kit generate:pg`.\r\n\r\n**Actual Behavior:**\r\nI consistently receive the following error message:\r\n\r\n```\r\ndrizzle-kit: v0.23.0\r\n\r\nPlease install latest version of drizzle-orm\r\n```\r\n\r\n**Additional Information:**\r\n* **npm workspace structure:**\r\n ```\r\n \"workspaces\": [\r\n    \"apps/*\",\r\n    \"packages/*\"\r\n  ],\r\n```\r\n* **Operating System:** Windows 10\r\n* **Node.js version:** 20.10.0\r\n\r\n**Possible Workarounds:**\r\n\r\n* Tried updating all `drizzle-orm` dependencies in my workspace to the latest version, but the issue persists.\r\n\r\n**Notes:**\r\n\r\nCurrently i downgraded to:\r\n```\r\n    \"drizzle-kit\": \"^0.20.17\",\r\n    \"drizzle-orm\": \"^0.30.10\",\r\n```\r\nBut the issue on this versions is, drizzle studio does not work... ist very frustrating\r\n\r\nThis issue seems similar to the one reported in [[#406](https://github.com/drizzle-team/drizzle-kit-mirror/issues/406)](https://github.com/drizzle-team/drizzle-kit-mirror/issues/406), but the solution there did not resolve my problem.  It could be a dependency resolution issue within the npm workspace.\r\n\n\n### Expected behavior\n\nDrizzle should work without errors.\r\n\r\n\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2699/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2636", "id": 2408817617, "node_id": "I_kwDOFqRI7c6Pk6PR", "number": 2636, "title": "[BUG]: type obtained with $inferInsert is empty", "user": {"login": "xegulon", "id": 74178038, "node_id": "MDQ6VXNlcjc0MTc4MDM4", "avatar_url": "https://avatars.githubusercontent.com/u/74178038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xegulon", "html_url": "https://github.com/xegulon", "followers_url": "https://api.github.com/users/xegulon/followers", "following_url": "https://api.github.com/users/xegulon/following{/other_user}", "gists_url": "https://api.github.com/users/xegulon/gists{/gist_id}", "starred_url": "https://api.github.com/users/xegulon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xegulon/subscriptions", "organizations_url": "https://api.github.com/users/xegulon/orgs", "repos_url": "https://api.github.com/users/xegulon/repos", "events_url": "https://api.github.com/users/xegulon/events{/privacy}", "received_events_url": "https://api.github.com/users/xegulon/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 42, "created_at": "2024-07-15T13:57:52Z", "updated_at": "2025-04-22T03:51:15Z", "closed_at": "2024-12-16T17:50:43Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.32.0\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.23.0\r\n\r\n### Describe the Bug\r\n\r\nI defined a users table in my drizzle schema, and the NewUser type obtained with users.$inferInsert is empty:\r\n\r\n![image](https://github.com/user-attachments/assets/a7f7ff43-dbd0-4124-97bd-05b171ea78d7)\r\n\r\n\r\n### Expected behavior\r\n\r\nNewUser type should have most of the users table properties.\r\n\r\n### Environment & setup\r\n\r\nFedora Linux\r\nnode-postgres\r\ntypescript: 5.5.3", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636/reactions", "total_count": 26, "+1": 26, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2636/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/1857", "id": 2116687449, "node_id": "I_kwDOFqRI7c5-KhZZ", "number": 1857, "title": "[BUG]: Drizzle Studio CORS error", "user": {"login": "bitbytebit1", "id": 11243425, "node_id": "MDQ6VXNlcjExMjQzNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/11243425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitbytebit1", "html_url": "https://github.com/bitbytebit1", "followers_url": "https://api.github.com/users/bitbytebit1/followers", "following_url": "https://api.github.com/users/bitbytebit1/following{/other_user}", "gists_url": "https://api.github.com/users/bitbytebit1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitbytebit1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitbytebit1/subscriptions", "organizations_url": "https://api.github.com/users/bitbytebit1/orgs", "repos_url": "https://api.github.com/users/bitbytebit1/repos", "events_url": "https://api.github.com/users/bitbytebit1/events{/privacy}", "received_events_url": "https://api.github.com/users/bitbytebit1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 5887594114, "node_id": "LA_kwDOFqRI7c8AAAABXu2Ogg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/studio", "name": "drizzle/studio", "color": "C5FC5E", "default": false, "description": "Issues related to Drizzle Studio"}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 40, "created_at": "2024-02-03T21:41:53Z", "updated_at": "2026-02-22T07:20:36Z", "closed_at": "2024-10-30T14:19:56Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.29.3\n\n### What version of `drizzle-kit` are you using?\n\n0.20.13\n\n### Describe the Bug\n\nUnable to use drizzle-studio due to CORS error.\r\n1. Visit https://local.drizzle.studio/\r\n2. Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:4983/. (Reason: CORS request did not succeed). Status code: (null).\r\n\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1857/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2590", "id": 2393297001, "node_id": "I_kwDOFqRI7c6OptBp", "number": 2590, "title": "[BUG]: drizzle-kit push stuck at \"Pulling schema from database...\" / not detecting \"dialect\"", "user": {"login": "daneus", "id": 87745855, "node_id": "MDQ6VXNlcjg3NzQ1ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/87745855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daneus", "html_url": "https://github.com/daneus", "followers_url": "https://api.github.com/users/daneus/followers", "following_url": "https://api.github.com/users/daneus/following{/other_user}", "gists_url": "https://api.github.com/users/daneus/gists{/gist_id}", "starred_url": "https://api.github.com/users/daneus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daneus/subscriptions", "organizations_url": "https://api.github.com/users/daneus/orgs", "repos_url": "https://api.github.com/users/daneus/repos", "events_url": "https://api.github.com/users/daneus/events{/privacy}", "received_events_url": "https://api.github.com/users/daneus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 37, "created_at": "2024-07-06T01:22:08Z", "updated_at": "2025-12-28T14:40:35Z", "closed_at": "2024-07-11T03:55:07Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.31.2\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.22.8\r\n\r\n### Describe the Bug\r\n\r\nI have a setup that connects to a Supabase Postgres database.\r\n\r\nWhen I run `npx drizzle-kit push` it hangs at \"Pulling schema from database...\":\r\n\r\nWhen I run `npx drizzle-kit push --verbose` I get this error:\r\n\r\n```\r\nconst error2 = new ZodError(ctx.common.issues);\r\n                           ^\r\n\r\n_ZodError: [\r\n  {\r\n    \"expected\": \"'postgresql' | 'mysql' | 'sqlite'\",\r\n    \"received\": \"undefined\",\r\n    \"code\": \"invalid_type\",\r\n    \"path\": [\r\n      \"dialect\"\r\n    ],\r\n    \"message\": \"Required\"\r\n  }\r\n]\r\n    at get error (D:\\repos\\-----\\-------api\\node_modules\\drizzle-kit\\bin.cjs:5183:28)\r\n    at _ZodObject.parse (D:\\repos\\------\\-------api\\node_modules\\drizzle-kit\\bin.cjs:5263:22)\r\n    at preparePushConfig (D:\\repos\\------\\-------api\\node_modules\\drizzle-kit\\bin.cjs:20208:33)\r\n    at _Command.<anonymous> (D:\\repos\\------\\-------api\\node_modules\\drizzle-kit\\bin.cjs:129662:13) {\r\n  issues: [\r\n    {\r\n      expected: \"'postgresql' | 'mysql' | 'sqlite'\",\r\n      received: 'undefined',\r\n      code: 'invalid_type',\r\n      path: [ 'dialect' ],\r\n      message: 'Required'\r\n    }\r\n  ],\r\n  addIssue: [Function (anonymous)],\r\n  addIssues: [Function (anonymous)],\r\n  errors: [\r\n    {\r\n      expected: \"'postgresql' | 'mysql' | 'sqlite'\",\r\n    {\r\n      expected: \"'postgresql' | 'mysql' | 'sqlite'\",\r\n      received: 'undefined',\r\n      code: 'invalid_type',\r\n      path: [ 'dialect' ],\r\n      message: 'Required'\r\n    }\r\n  ]\r\n}\r\n    {\r\n      expected: \"'postgresql' | 'mysql' | 'sqlite'\",\r\n      received: 'undefined',\r\n    {\r\n    {\r\n      expected: \"'postgresql' | 'mysql' | 'sqlite'\",\r\n      received: 'undefined',\r\n      code: 'invalid_type',\r\n      path: [ 'dialect' ],\r\n      message: 'Required'\r\n    }\r\n  ]\r\n}\r\n```", "closed_by": {"login": "daneus", "id": 87745855, "node_id": "MDQ6VXNlcjg3NzQ1ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/87745855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daneus", "html_url": "https://github.com/daneus", "followers_url": "https://api.github.com/users/daneus/followers", "following_url": "https://api.github.com/users/daneus/following{/other_user}", "gists_url": "https://api.github.com/users/daneus/gists{/gist_id}", "starred_url": "https://api.github.com/users/daneus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daneus/subscriptions", "organizations_url": "https://api.github.com/users/daneus/orgs", "repos_url": "https://api.github.com/users/daneus/repos", "events_url": "https://api.github.com/users/daneus/events{/privacy}", "received_events_url": "https://api.github.com/users/daneus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590/reactions", "total_count": 7, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2590/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/2338", "id": 2301715629, "node_id": "I_kwDOFqRI7c6JMWSt", "number": 2338, "title": "[BUG]: drizzle-kit introspect TypeError: Cannot read properties of undefined (reading 'toLowerCase')", "user": {"login": "xkalf", "id": 68588557, "node_id": "MDQ6VXNlcjY4NTg4NTU3", "avatar_url": "https://avatars.githubusercontent.com/u/68588557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xkalf", "html_url": "https://github.com/xkalf", "followers_url": "https://api.github.com/users/xkalf/followers", "following_url": "https://api.github.com/users/xkalf/following{/other_user}", "gists_url": "https://api.github.com/users/xkalf/gists{/gist_id}", "starred_url": "https://api.github.com/users/xkalf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xkalf/subscriptions", "organizations_url": "https://api.github.com/users/xkalf/orgs", "repos_url": "https://api.github.com/users/xkalf/repos", "events_url": "https://api.github.com/users/xkalf/events{/privacy}", "received_events_url": "https://api.github.com/users/xkalf/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 35, "created_at": "2024-05-17T02:59:34Z", "updated_at": "2025-02-10T12:58:58Z", "closed_at": "2024-08-22T13:44:48Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.3.10\n\n### What version of `drizzle-kit` are you using?\n\n0.21.2\n\n### Describe the Bug\n\n``bun version 1.1.8\r\n\r\n\r\n```\r\nC:\\Users\\hitech\\code\\nomad_db\\node_modules\\drizzle-kit\\bin.cjs:15875\r\n              const onUpdate = fk4.update_rule.toLowerCase();\r\n                                               ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'toLowerCase')\r\n    at C:\\Users\\hitech\\code\\nomad_db\\node_modules\\drizzle-kit\\bin.cjs:15875:48\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n\r\nNode.js v18.18.2\r\n```\r\n\r\ngetting this error on bunx drizzle-kit introspect command \r\n\r\ndb schema is here\r\n\r\n```typescript\r\nimport { relations, sql } from \"drizzle-orm\";\r\nimport {\r\n  boolean,\r\n  date,\r\n  index,\r\n  integer,\r\n  numeric,\r\n  pgEnum,\r\n  pgTableCreator,\r\n  primaryKey,\r\n  real,\r\n  serial,\r\n  text,\r\n  time,\r\n  timestamp,\r\n  unique,\r\n  varchar,\r\n} from \"drizzle-orm/pg-core\";\r\nimport { type AdapterAccount } from \"next-auth/adapters\";\r\n\r\n/**\r\n * This is an example of how to use the multi-project schema feature of Drizzle ORM. Use the same\r\n * database instance for multiple projects.\r\n *\r\n * @see https://orm.drizzle.team/docs/goodies#multi-project-schema\r\n */\r\nexport const createTable = pgTableCreator(\r\n  (name) => `nomad_competition_${name}`,\r\n);\r\n\r\nexport const users = createTable(\"user\", {\r\n  id: varchar(\"id\", { length: 255 }).notNull().primaryKey(),\r\n  firstname: varchar(\"firstname\", { length: 255 }).notNull(),\r\n  lastname: varchar(\"lastname\", { length: 255 }).notNull(),\r\n  wcaId: varchar(\"wca_id\", { length: 255 }).unique(),\r\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\r\n  phone: integer(\"phone\").notNull(),\r\n  birthDate: date(\"birth_date\").notNull(),\r\n  emailVerified: timestamp(\"emailVerified\", {\r\n    mode: \"date\",\r\n  }).default(sql`CURRENT_TIMESTAMP`),\r\n  image: varchar(\"image\", { length: 255 }),\r\n  isAdmin: boolean(\"is_admin\").notNull().default(false),\r\n  password: varchar(\"password\", { length: 255 }).notNull(),\r\n});\r\n\r\nexport const usersRelations = relations(users, ({ many }) => ({\r\n  accounts: many(accounts),\r\n  competitors: many(competitors),\r\n}));\r\n\r\nexport const accounts = createTable(\r\n  \"account\",\r\n  {\r\n    userId: varchar(\"userId\", { length: 255 })\r\n      .notNull()\r\n      .references(() => users.id),\r\n    type: varchar(\"type\", { length: 255 })\r\n      .$type<AdapterAccount[\"type\"]>()\r\n      .notNull(),\r\n    provider: varchar(\"provider\", { length: 255 }).notNull(),\r\n    providerAccountId: varchar(\"providerAccountId\", { length: 255 }).notNull(),\r\n    refresh_token: text(\"refresh_token\"),\r\n    access_token: text(\"access_token\"),\r\n    expires_at: integer(\"expires_at\"),\r\n    token_type: varchar(\"token_type\", { length: 255 }),\r\n    scope: varchar(\"scope\", { length: 255 }),\r\n    id_token: text(\"id_token\"),\r\n    session_state: varchar(\"session_state\", { length: 255 }),\r\n  },\r\n  (account) => ({\r\n    compoundKey: primaryKey({\r\n      columns: [account.provider, account.providerAccountId],\r\n    }),\r\n    userIdIdx: index(\"account_userId_idx\").on(account.userId),\r\n  }),\r\n);\r\n\r\nexport const accountsRelations = relations(accounts, ({ one }) => ({\r\n  user: one(users, { fields: [accounts.userId], references: [users.id] }),\r\n}));\r\n\r\nexport const sessions = createTable(\r\n  \"session\",\r\n  {\r\n    sessionToken: varchar(\"sessionToken\", { length: 255 })\r\n      .notNull()\r\n      .primaryKey(),\r\n    userId: varchar(\"userId\", { length: 255 })\r\n      .notNull()\r\n      .references(() => users.id),\r\n    expires: timestamp(\"expires\", { mode: \"date\" }).notNull(),\r\n  },\r\n  (session) => ({\r\n    userIdIdx: index(\"session_userId_idx\").on(session.userId),\r\n  }),\r\n);\r\n\r\nexport const sessionsRelations = relations(sessions, ({ one }) => ({\r\n  user: one(users, { fields: [sessions.userId], references: [users.id] }),\r\n}));\r\n\r\nexport const verificationTokens = createTable(\r\n  \"verificationToken\",\r\n  {\r\n    identifier: varchar(\"identifier\", { length: 255 }).notNull(),\r\n    token: varchar(\"token\", { length: 255 }).notNull(),\r\n    expires: timestamp(\"expires\", { mode: \"date\" }).notNull(),\r\n  },\r\n  (vt) => ({\r\n    compoundKey: primaryKey({ columns: [vt.identifier, vt.token] }),\r\n  }),\r\n);\r\n\r\nexport const cubeTypes = createTable(\"cube_types\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: varchar(\"name\").notNull(),\r\n  image: varchar(\"image\"),\r\n  order: real(\"order\").notNull().default(1),\r\n});\r\n\r\nexport const cubeTypesRelations = relations(cubeTypes, ({ many }) => ({\r\n  competitorsToCubeTypes: many(competitorsToCubeTypes),\r\n  competitionsToCubeTypes: many(competitionsToCubeType),\r\n}));\r\n\r\nexport const competitions = createTable(\"competitions\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: varchar(\"name\").notNull(),\r\n  address: varchar(\"address\").notNull(),\r\n  addressLink: varchar(\"address_link\"),\r\n  maxCompetitors: integer(\"max_competitors\").notNull(),\r\n  startDate: date(\"start_date\").notNull(),\r\n  endDate: date(\"end_date\").notNull(),\r\n  registerStartDate: timestamp(\"register_start_date\", {\r\n    withTimezone: true,\r\n  }),\r\n  registerEndDate: timestamp(\"register_end_date\", {\r\n    withTimezone: true,\r\n  }),\r\n  contact: text(\"contact\"),\r\n  registrationRequirments: text(\"registration_requirments\"),\r\n  baseFee: numeric(\"base_fee\").notNull().default(\"0\"),\r\n  guestFee: numeric(\"guest_fee\").notNull().default(\"0\"),\r\n  freeGuests: integer(\"free_guests\").notNull().default(0),\r\n});\r\n\r\nexport const competitionsRelations = relations(competitions, ({ many }) => ({\r\n  competitors: many(competitors),\r\n  competitionsToCubeTypes: many(competitionsToCubeType),\r\n  schedules: many(schedules),\r\n  ageGroups: many(ageGroups),\r\n  fees: many(fees),\r\n}));\r\n\r\nexport const competitionsToCubeType = createTable(\r\n  \"competitions_to_cube_type\",\r\n  {\r\n    cubeTypeId: integer(\"cube_type_id\")\r\n      .notNull()\r\n      .references(() => cubeTypes.id),\r\n    competitionId: integer(\"competition_id\")\r\n      .notNull()\r\n      .references(() => competitions.id),\r\n  },\r\n  (t) => ({\r\n    pk: primaryKey({\r\n      columns: [t.competitionId, t.cubeTypeId],\r\n    }),\r\n  }),\r\n);\r\n\r\nexport const competitionsToCubeTypeRelations = relations(\r\n  competitionsToCubeType,\r\n  ({ one }) => ({\r\n    cubeType: one(cubeTypes, {\r\n      fields: [competitionsToCubeType.cubeTypeId],\r\n      references: [cubeTypes.id],\r\n    }),\r\n    competition: one(competitions, {\r\n      fields: [competitionsToCubeType.competitionId],\r\n      references: [competitions.id],\r\n    }),\r\n  }),\r\n);\r\n\r\nexport const competitors = createTable(\r\n  \"competitors\",\r\n  {\r\n    id: serial(\"id\").primaryKey(),\r\n    userId: varchar(\"user_id\")\r\n      .notNull()\r\n      .references(() => users.id),\r\n    competitionId: integer(\"competition_id\")\r\n      .notNull()\r\n      .references(() => competitions.id),\r\n    guestCount: integer(\"guest_count\").notNull().default(0),\r\n    description: varchar(\"description\"),\r\n    requestedAt: timestamp(\"requested_at\").notNull().defaultNow(),\r\n    verifiedAt: timestamp(\"verified_at\"),\r\n  },\r\n  (t) => ({\r\n    competitionIdUserIdUniq: unique().on(t.competitionId, t.userId),\r\n  }),\r\n);\r\n\r\nexport const competitorsRelations = relations(competitors, ({ one, many }) => ({\r\n  user: one(users, {\r\n    fields: [competitors.userId],\r\n    references: [users.id],\r\n  }),\r\n  competition: one(competitions, {\r\n    fields: [competitors.competitionId],\r\n    references: [competitions.id],\r\n  }),\r\n  competitorsToCubeTypes: many(competitorsToCubeTypes),\r\n  invoices: many(invoices),\r\n}));\r\n\r\nexport const competitorsToCubeTypes = createTable(\r\n  \"competitors_to_cube_types\",\r\n  {\r\n    competitorId: integer(\"competitor_id\")\r\n      .notNull()\r\n      .references(() => competitors.id),\r\n    cubeTypeId: integer(\"cube_type_id\")\r\n      .notNull()\r\n      .references(() => cubeTypes.id),\r\n  },\r\n  (t) => ({\r\n    pk: primaryKey({\r\n      columns: [t.competitorId, t.cubeTypeId],\r\n    }),\r\n  }),\r\n);\r\n\r\nexport const competitorsToCubeTypesRelations = relations(\r\n  competitorsToCubeTypes,\r\n  ({ one }) => ({\r\n    competitor: one(competitors, {\r\n      fields: [competitorsToCubeTypes.competitorId],\r\n      references: [competitors.id],\r\n    }),\r\n    cubeType: one(cubeTypes, {\r\n      fields: [competitorsToCubeTypes.cubeTypeId],\r\n      references: [cubeTypes.id],\r\n    }),\r\n  }),\r\n);\r\n\r\nexport const schedules = createTable(\"schedules\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: varchar(\"name\").notNull(),\r\n  startTime: time(\"start_time\").notNull(),\r\n  endTime: time(\"end_time\").notNull(),\r\n  date: date(\"date\").notNull(),\r\n  cutOff: varchar(\"cut_off\"),\r\n  timeLimit: varchar(\"time_limit\"),\r\n  competitorLimit: integer(\"competitor_limit\"),\r\n  competitionId: integer(\"competition_id\")\r\n    .references(() => competitions.id)\r\n    .notNull(),\r\n});\r\n\r\nexport const schedulesRelations = relations(schedules, ({ one }) => ({\r\n  competition: one(competitions, {\r\n    fields: [schedules.competitionId],\r\n    references: [competitions.id],\r\n  }),\r\n}));\r\n\r\nexport const ageGroups = createTable(\"age_groups\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: varchar(\"name\").notNull(),\r\n  start: integer(\"start\").notNull(),\r\n  end: integer(\"end\"),\r\n  order: real(\"order\").notNull().default(1),\r\n  competitionId: integer(\"competition_id\")\r\n    .notNull()\r\n    .references(() => competitions.id),\r\n  cubeTypeId: integer(\"cube_type_id\")\r\n    .references(() => cubeTypes.id)\r\n    .notNull(),\r\n});\r\n\r\nexport const ageGroupsRelations = relations(ageGroups, ({ one }) => ({\r\n  competition: one(competitions, {\r\n    fields: [ageGroups.competitionId],\r\n    references: [competitions.id],\r\n  }),\r\n  cubeType: one(cubeTypes, {\r\n    fields: [ageGroups.cubeTypeId],\r\n    references: [cubeTypes.id],\r\n  }),\r\n}));\r\n\r\nexport const paymentsTypeEnum = pgEnum(\"payment_type\", [\"qpay\"]);\r\n\r\nexport const payments = createTable(\"qpay\", {\r\n  type: paymentsTypeEnum(\"type\").notNull().primaryKey().unique(),\r\n  accessToken: text(\"access_token\").notNull(),\r\n  refreshToken: text(\"refresh_token\").notNull(),\r\n  accessExpiresAt: timestamp(\"access_expires_at\", {\r\n    mode: \"date\",\r\n    withTimezone: true,\r\n  }).notNull(),\r\n  refreshExpiresAt: timestamp(\"refresh_expires_at\", {\r\n    mode: \"date\",\r\n    withTimezone: true,\r\n  }).notNull(),\r\n});\r\n\r\nexport const invoices = createTable(\"invoices\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  invoiceCode: varchar(\"invoice_code\"),\r\n  amount: numeric(\"amount\").notNull(),\r\n  isPaid: boolean(\"is_paid\").notNull().default(false),\r\n  competitorId: integer(\"competitor_id\")\r\n    .references(() => competitors.id)\r\n    .notNull(),\r\n  userId: varchar(\"user_id\")\r\n    .notNull()\r\n    .references(() => users.id),\r\n});\r\n\r\nexport const invoicesRelations = relations(invoices, ({ one }) => ({\r\n  competitor: one(competitors, {\r\n    fields: [invoices.competitorId],\r\n    references: [competitors.id],\r\n  }),\r\n}));\r\n\r\nexport const fees = createTable(\"fees\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  cubeTypeId: integer(\"cube_type_id\")\r\n    .notNull()\r\n    .references(() => cubeTypes.id),\r\n  amount: numeric(\"amount\").default(\"0\").notNull(),\r\n  competitionId: integer(\"competition_id\").references(() => competitions.id),\r\n});\r\n\r\nexport const feesRelation = relations(fees, ({ one }) => ({\r\n  cubeType: one(cubeTypes, {\r\n    fields: [fees.cubeTypeId],\r\n    references: [cubeTypes.id],\r\n  }),\r\n  competition: one(competitions, {\r\n    fields: [fees.competitionId],\r\n    references: [competitions.id],\r\n  }),\r\n}));\r\n```\r\n\r\n\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\n_No response_", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338/reactions", "total_count": 10, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 3}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/2338/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/3732", "id": 2728634479, "node_id": "I_kwDOFqRI7c6io6hv", "number": 3732, "title": "[BUG]: The inferred type of X cannot be named without a reference to ../../../../../node_modules/drizzle-zod/schema.types.internal.mjs", "user": {"login": "thedevdavid", "id": 15244882, "node_id": "MDQ6VXNlcjE1MjQ0ODgy", "avatar_url": "https://avatars.githubusercontent.com/u/15244882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thedevdavid", "html_url": "https://github.com/thedevdavid", "followers_url": "https://api.github.com/users/thedevdavid/followers", "following_url": "https://api.github.com/users/thedevdavid/following{/other_user}", "gists_url": "https://api.github.com/users/thedevdavid/gists{/gist_id}", "starred_url": "https://api.github.com/users/thedevdavid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thedevdavid/subscriptions", "organizations_url": "https://api.github.com/users/thedevdavid/orgs", "repos_url": "https://api.github.com/users/thedevdavid/repos", "events_url": "https://api.github.com/users/thedevdavid/events{/privacy}", "received_events_url": "https://api.github.com/users/thedevdavid/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 5410250095, "node_id": "LA_kwDOFqRI7c8AAAABQnndbw", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug/cant-reproduce", "name": "bug/cant-reproduce", "color": "d73a4a", "default": false, "description": "Lack steps to fully reproduce. A repository for reproduction may be necessary"}, {"id": 5887599515, "node_id": "LA_kwDOFqRI7c8AAAABXu2jmw", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/zod", "name": "drizzle/zod", "color": "EEB2E5", "default": false, "description": ""}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 34, "created_at": "2024-12-10T00:41:28Z", "updated_at": "2025-03-20T07:50:53Z", "closed_at": "2025-01-27T11:42:34Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Report hasn't been filed before.\n\n- [X] I have verified that the bug I'm about to report hasn't been filed before.\n\n### What version of `drizzle-orm` are you using?\n\n0.38.0\n\n### What version of `drizzle-kit` are you using?\n\n0.30.0\n\n### Other packages\n\ndrizzle-zod@0.6.0\n\n### Describe the Bug\n\nSince the latest update, all previously working drizzle-zod functions show a type error. \r\n\r\n`The inferred type of updateUserProfileSchema cannot be named without a reference to ../../../../../node_modules/drizzle-zod/schema.types.internal.mjs`\r\n\r\n<img width=\"1154\" alt=\"image\" src=\"https://github.com/user-attachments/assets/98380270-b2d3-4e8a-9577-fd01b6e9f129\">\r\n<img width=\"1140\" alt=\"image\" src=\"https://github.com/user-attachments/assets/94a9a4e4-466f-4c1d-8945-3932a2a6955b\">\r\n\r\nNode.js v22.10.0\r\nBun  v1.1.38\r\nTurborepo v2.3.3\r\n\r\nWorkaround is disabling declaration and declarationMap in tsconfig.json:\r\n```\r\n\"declaration\": false,\r\n \"declarationMap\": false\r\n```", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732/reactions", "total_count": 18, "+1": 17, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3732/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/646", "id": 1728920232, "node_id": "I_kwDOFqRI7c5nDTqo", "number": 646, "title": "[BUG]: using `pgEnum` generates faulty sql migration", "user": {"login": "errmayank", "id": 64462998, "node_id": "MDQ6VXNlcjY0NDYyOTk4", "avatar_url": "https://avatars.githubusercontent.com/u/64462998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/errmayank", "html_url": "https://github.com/errmayank", "followers_url": "https://api.github.com/users/errmayank/followers", "following_url": "https://api.github.com/users/errmayank/following{/other_user}", "gists_url": "https://api.github.com/users/errmayank/gists{/gist_id}", "starred_url": "https://api.github.com/users/errmayank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/errmayank/subscriptions", "organizations_url": "https://api.github.com/users/errmayank/orgs", "repos_url": "https://api.github.com/users/errmayank/repos", "events_url": "https://api.github.com/users/errmayank/events{/privacy}", "received_events_url": "https://api.github.com/users/errmayank/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [{"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 34, "created_at": "2023-05-27T20:11:16Z", "updated_at": "2025-07-24T20:10:53Z", "closed_at": "2023-07-21T17:53:35Z", "assignee": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.26.1\n\n### What version of `drizzle-kit` are you using?\n\n0.18.1\n\n### Describe the Bug\n\nCreating a user schema with role enum\r\n\r\n```ts\r\nexport const roleEnum = pgEnum('Role', ['ADMIN', 'USER']);\r\n\r\nexport const user = pgTable('user', {\r\n  id: varchar('id', { length: 256 }).primaryKey().notNull(),\r\n  email: varchar('email', { length: 256 }).notNull(),\r\n  role: roleEnum('role').default('USER').notNull(),\r\n  name: varchar('name', { length: 256 }).notNull(),\r\n  fullName: varchar('full_name', { length: 256 }).notNull(),\r\n  locale: varchar('locale', { length: 256 }).default('en-US').notNull(),\r\n  timezone: varchar('timezone', { length: 256 }),\r\n  imageURL: text('image_url'),\r\n  createdAt: timestamp('created_at', { precision: 6, withTimezone: true }).defaultNow().notNull(),\r\n  updatedAt: timestamp('updated_at', { precision: 6, withTimezone: true }).defaultNow().notNull(),\r\n  deletedAt: timestamp('deleted_at', { precision: 6, withTimezone: true }),\r\n});\r\n```\r\n\r\ngenerates this sql migration\r\n\r\n```sql\r\nDO $$ BEGIN\r\n CREATE TYPE \"Role\" AS ENUM('ADMIN', 'USER');\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n\r\nCREATE TABLE IF NOT EXISTS \"user\" (\r\n\t\"id\" varchar(256) PRIMARY KEY NOT NULL,\r\n\t\"email\" varchar(256) NOT NULL,\r\n\t\"role\" Role DEFAULT 'USER' NOT NULL,\r\n\t\"name\" varchar(256) NOT NULL,\r\n\t\"full_name\" varchar(256) NOT NULL,\r\n\t\"locale\" varchar(256) DEFAULT 'en-US' NOT NULL,\r\n\t\"timezone\" varchar(256),\r\n\t\"image_url\" text,\r\n\t\"created_at\" timestamp (6) with time zone DEFAULT now() NOT NULL,\r\n\t\"updated_at\" timestamp (6) with time zone DEFAULT now() NOT NULL,\r\n\t\"deleted_at\" timestamp (6) with time zone\r\n);\r\n```\r\n\r\nwhich fails when running with error `PostgresError: type \"role\" does not exist` unless i wrap `Role` in double quotes manually like this\r\n\r\n```sql\r\n\"role\" \"Role\" DEFAULT 'USER' NOT NULL,\r\n```\n\n### Expected behavior\n\nDouble quotes should be added automatically\n\n### Environment & setup\n\nnode v18.16.0", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/3391", "id": 2630453331, "node_id": "I_kwDOFqRI7c6cyYhT", "number": 3391, "title": "[BUG]: Undefined properties when using drizzle-kit push", "user": {"login": "aokigit", "id": 20214774, "node_id": "MDQ6VXNlcjIwMjE0Nzc0", "avatar_url": "https://avatars.githubusercontent.com/u/20214774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aokigit", "html_url": "https://github.com/aokigit", "followers_url": "https://api.github.com/users/aokigit/followers", "following_url": "https://api.github.com/users/aokigit/following{/other_user}", "gists_url": "https://api.github.com/users/aokigit/gists{/gist_id}", "starred_url": "https://api.github.com/users/aokigit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aokigit/subscriptions", "organizations_url": "https://api.github.com/users/aokigit/orgs", "repos_url": "https://api.github.com/users/aokigit/repos", "events_url": "https://api.github.com/users/aokigit/events{/privacy}", "received_events_url": "https://api.github.com/users/aokigit/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4976546561, "node_id": "LA_kwDOFqRI7c8AAAABKKATAQ", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/drizzle/kit", "name": "drizzle/kit", "color": "798DCF", "default": false, "description": ""}, {"id": 7569305367, "node_id": "LA_kwDOFqRI7c8AAAABwypvFw", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/driver/supabase", "name": "driver/supabase", "color": "3EDAA2", "default": false, "description": ""}, {"id": 7605220154, "node_id": "LA_kwDOFqRI7c8AAAABxU5zOg", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/priority", "name": "priority", "color": "E1F424", "default": false, "description": "Will be worked on next"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 32, "created_at": "2024-11-02T13:24:29Z", "updated_at": "2025-11-08T04:52:18Z", "closed_at": "2024-11-06T13:33:59Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\n\n0.36.0\n\n### What version of `drizzle-kit` are you using?\n\n0.27.1\n\n### Describe the Bug\n\nWhen using `drizzle-kit push` I'm receiving the following error: \r\n`TypeError: Cannot read properties of undefined (reading 'isRLSEnabled')`\r\n\r\nMy client setup:\r\n```ts\r\nimport { drizzle } from \"drizzle-orm/neon-http\";\r\nimport * as schema from \"@/lib/database/schema\";\r\n\r\nexport const db = drizzle(process.env.DATABASE_URL!, { schema: schema });\r\n```\r\n\r\nDrizzle config:\r\n```ts\r\nimport dotenv from \"dotenv\";\r\nimport { defineConfig } from \"drizzle-kit\";\r\n\r\ndotenv.config({ path: \".env.local\" });\r\n\r\nexport default defineConfig({\r\n  dialect: \"postgresql\",\r\n  schema: \"./lib/database/schema.ts\",\r\n  out: \"./lib/database/migrations\",\r\n  dbCredentials: {\r\n    url: process.env.DATABASE_URL!,\r\n  },\r\n  strict: true,\r\n});\r\n```\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\nDevelopment", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391/reactions", "total_count": 10, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/3391/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/1558", "id": 2010908950, "node_id": "I_kwDOFqRI7c533AkW", "number": 1558, "title": "[BUG]: Splitting database schemas into a separate package in monorepo causes TS2345 Property `[IsDrizzleTable]` is missing in type", "user": {"login": "ari-becker", "id": 1388505, "node_id": "MDQ6VXNlcjEzODg1MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1388505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ari-becker", "html_url": "https://github.com/ari-becker", "followers_url": "https://api.github.com/users/ari-becker/followers", "following_url": "https://api.github.com/users/ari-becker/following{/other_user}", "gists_url": "https://api.github.com/users/ari-becker/gists{/gist_id}", "starred_url": "https://api.github.com/users/ari-becker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ari-becker/subscriptions", "organizations_url": "https://api.github.com/users/ari-becker/orgs", "repos_url": "https://api.github.com/users/ari-becker/repos", "events_url": "https://api.github.com/users/ari-becker/events{/privacy}", "received_events_url": "https://api.github.com/users/ari-becker/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [{"login": "dankochetov", "id": 33990502, "node_id": "MDQ6VXNlcjMzOTkwNTAy", "avatar_url": "https://avatars.githubusercontent.com/u/33990502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dankochetov", "html_url": "https://github.com/dankochetov", "followers_url": "https://api.github.com/users/dankochetov/followers", "following_url": "https://api.github.com/users/dankochetov/following{/other_user}", "gists_url": "https://api.github.com/users/dankochetov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dankochetov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dankochetov/subscriptions", "organizations_url": "https://api.github.com/users/dankochetov/orgs", "repos_url": "https://api.github.com/users/dankochetov/repos", "events_url": "https://api.github.com/users/dankochetov/events{/privacy}", "received_events_url": "https://api.github.com/users/dankochetov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "Angelelz", "id": 34462576, "node_id": "MDQ6VXNlcjM0NDYyNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/34462576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Angelelz", "html_url": "https://github.com/Angelelz", "followers_url": "https://api.github.com/users/Angelelz/followers", "following_url": "https://api.github.com/users/Angelelz/following{/other_user}", "gists_url": "https://api.github.com/users/Angelelz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Angelelz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Angelelz/subscriptions", "organizations_url": "https://api.github.com/users/Angelelz/orgs", "repos_url": "https://api.github.com/users/Angelelz/repos", "events_url": "https://api.github.com/users/Angelelz/events{/privacy}", "received_events_url": "https://api.github.com/users/Angelelz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 31, "created_at": "2023-11-26T06:20:41Z", "updated_at": "2024-07-11T08:41:43Z", "closed_at": "2024-07-11T08:41:43Z", "assignee": {"login": "dankochetov", "id": 33990502, "node_id": "MDQ6VXNlcjMzOTkwNTAy", "avatar_url": "https://avatars.githubusercontent.com/u/33990502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dankochetov", "html_url": "https://github.com/dankochetov", "followers_url": "https://api.github.com/users/dankochetov/followers", "following_url": "https://api.github.com/users/dankochetov/following{/other_user}", "gists_url": "https://api.github.com/users/dankochetov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dankochetov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dankochetov/subscriptions", "organizations_url": "https://api.github.com/users/dankochetov/orgs", "repos_url": "https://api.github.com/users/dankochetov/repos", "events_url": "https://api.github.com/users/dankochetov/events{/privacy}", "received_events_url": "https://api.github.com/users/dankochetov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n0.29.0\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.20.4 (but not relevant)\r\n\r\n### Describe the Bug\r\n\r\n1. Copy/paste the example drizzle adapter code from https://github.com/nextauthjs/next-auth/blob/693a0723a7bad2b0950e4c6006a99c98852c4beb/packages/adapter-drizzle/src/lib/pg.ts into my own project\r\n2. Note that the example code works (leave aside the deprecated `primaryKey(col1, col2)`, which I fixed).\r\n3. My project is a monorepo, so the database schemas (which were in Prisma) are in a separate package. Move the table definitions for `users`, `accounts`, `sessions`, and `verificationTokens` into a separate package, where `tsc --build` is producing a `dist/` folder and `package.json`'s `exports` references `dist/index.d.ts` etc., then import the table definitions in the original `app` package which is making the `insert` calls.\r\n4. Receive the following error: `TS2345` and `Property [isDrizzleTable] is missing in type`:\r\n\r\n![image](https://github.com/drizzle-team/drizzle-orm/assets/1388505/765dcec6-a07f-4956-945f-fc3f1945d429)\r\n\r\nthe compiled `.d.ts` looks like this:\r\n\r\n![image](https://github.com/drizzle-team/drizzle-orm/assets/1388505/041d2872-d37a-40f4-a1cc-dfa1305feff4)\r\n\r\n### Expected behavior\r\n\r\nNot to have the `tsc` error. I expect the types to be portable.\r\n\r\n### Environment & setup\r\n\r\nI use a monorepo with `pnpm` and `syncpack` and have confirmed that both the main `app` package and the database schema package are using the same `0.29.0` version of `drizzle-orm`.", "closed_by": {"login": "AndriiSherman", "id": 29543764, "node_id": "MDQ6VXNlcjI5NTQzNzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29543764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndriiSherman", "html_url": "https://github.com/AndriiSherman", "followers_url": "https://api.github.com/users/AndriiSherman/followers", "following_url": "https://api.github.com/users/AndriiSherman/following{/other_user}", "gists_url": "https://api.github.com/users/AndriiSherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndriiSherman/subscriptions", "organizations_url": "https://api.github.com/users/AndriiSherman/orgs", "repos_url": "https://api.github.com/users/AndriiSherman/repos", "events_url": "https://api.github.com/users/AndriiSherman/events{/privacy}", "received_events_url": "https://api.github.com/users/AndriiSherman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1558/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207", "repository_url": "https://api.github.com/repos/drizzle-team/drizzle-orm", "labels_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207/labels{/name}", "comments_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207/comments", "events_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207/events", "html_url": "https://github.com/drizzle-team/drizzle-orm/issues/1207", "id": 1893240844, "node_id": "I_kwDOFqRI7c5w2JAM", "number": 1207, "title": "[BUG]: Many TypeScript Compile Errors (drizzle-orm/neon-http ; Postgres)", "user": {"login": "JS-GitRepo", "id": 9299019, "node_id": "MDQ6VXNlcjkyOTkwMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9299019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JS-GitRepo", "html_url": "https://github.com/JS-GitRepo", "followers_url": "https://api.github.com/users/JS-GitRepo/followers", "following_url": "https://api.github.com/users/JS-GitRepo/following{/other_user}", "gists_url": "https://api.github.com/users/JS-GitRepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/JS-GitRepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JS-GitRepo/subscriptions", "organizations_url": "https://api.github.com/users/JS-GitRepo/orgs", "repos_url": "https://api.github.com/users/JS-GitRepo/repos", "events_url": "https://api.github.com/users/JS-GitRepo/events{/privacy}", "received_events_url": "https://api.github.com/users/JS-GitRepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3113057247, "node_id": "MDU6TGFiZWwzMTEzMDU3MjQ3", "url": "https://api.github.com/repos/drizzle-team/drizzle-orm/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 31, "created_at": "2023-09-12T20:48:18Z", "updated_at": "2025-07-10T18:39:09Z", "closed_at": "2023-12-04T20:11:58Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### What version of `drizzle-orm` are you using?\r\n\r\n^0.28.6\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n^0.19.13\r\n\r\n### Describe the Bug\r\n\r\nDuring the build step for Typescript, I run into the same \"10 errors in 9 files\" within the drizzle-orm Node modules package. Reproduced in 3 different projects, one of new was fresh, following the instructions step-by-step for [Neon integration over http](https://orm.drizzle.team/docs/quick-postgresql/neon), as Firebase Cloud Functions do not support Web Sockets (to my knowledge; I could be wrong.)\r\n\r\nStep 1:\r\n```bash\r\nyarn add drizzle-orm @neondatabase/serverless\r\nyarn add -D drizzle-kit\r\n```\r\n\r\nStep 2: \r\nEnsure your env contains the string you need and is being read, then -\r\n```js\r\nimport { neon, neonConfig } from '@neondatabase/serverless';\r\nimport { drizzle } from 'drizzle-orm/neon-http';\r\n \r\nneonConfig.fetchConnectionCache = true;\r\n \r\nconst sql = neon(process.env.DRIZZLE_DATABASE_URL!);\r\nconst db = drizzle(sql);\r\n```\r\n\r\nStep 3:\r\n```bash\r\nyarn tsc\r\n```\r\n\r\n**Build Errors** (Same In all Projects Tested):\r\n```bash\r\n$ yarn build\r\nyarn run v1.22.19\r\n$ tsc\r\nnode_modules/drizzle-orm/mysql-core/db.d.ts:1:38 - error TS2307: Cannot find module 'mysql2/promise' or its corresponding type declarations.\r\n\r\n1 import type { ResultSetHeader } from 'mysql2/promise';\r\n                                       ~~~~~~~~~~~~~~~~\r\n\r\nnode_modules/drizzle-orm/mysql-core/query-builders/delete.d.ts:15:22 - error TS2420: Class 'MySqlDelete<TTable, TQueryResult, TPreparedQueryHKT>' incorrectly implements interface 'SQLWrapper'.\r\n  Property 'getSQL' is missing in type 'MySqlDelete<TTable, TQueryResult, TPreparedQueryHKT>' but required in type 'SQLWrapper'.\r\n\r\n15 export declare class MySqlDelete<TTable extends MySqlTable, TQueryResult extends QueryResultHKT, TPreparedQueryHKT extends PreparedQueryHKTBase> extends QueryPromise<QueryResultKind<TQueryResult, never>> implements SQLWrapper {\r\n                        ~~~~~~~~~~~\r\n\r\n  node_modules/drizzle-orm/sql/index.d.ts:47:5\r\n    47     getSQL(): SQL;\r\n           ~~~~~~~~~~~~~~\r\n    'getSQL' is declared here.\r\n\r\nnode_modules/drizzle-orm/mysql-core/query-builders/select.d.ts:74:22 - error TS2515: Non-abstract class 'MySqlSelect<TTableName, TSelection, TSelectMode, TPreparedQueryHKT, TNullabilityMap>' does not implement inherited abstract member 'getSQL' from class 'MySqlSelectQueryBuilder<MySqlSelectHKT, TTableName, TSelection, TSelectMode, TNullabilityMap>'.\r\n\r\n74 export declare class MySqlSelect<TTableName extends string | undefined, TSelection, TSelectMode extends SelectMode, TPreparedQueryHKT extends PreparedQueryHKTBase, TNullabilityMap extends Record<string, JoinNullability> = TTableName extends string ? Record<TTableName, 'not-null'> : {}> extends MySqlSelectQueryBuilder<MySqlSelectHKT, TTableName, TSelection, TSelectMode, TNullabilityMap> {\r\n                        ~~~~~~~~~~~\r\n\r\nnode_modules/drizzle-orm/pg-core/query-builders/delete.d.ts:17:22 - error TS2420: Class 'PgDelete<TTable, TQueryResult, TReturning>' incorrectly implements interface 'SQLWrapper'.\r\n  Property 'getSQL' is missing in type 'PgDelete<TTable, TQueryResult, TReturning>' but required in type 'SQLWrapper'.\r\n\r\n17 export declare class PgDelete<TTable extends PgTable, TQueryResult extends QueryResultHKT, TReturning extends Record<string, unknown> | undefined = undefined> extends QueryPromise<TReturning extends undefined ? QueryResultKind<TQueryResult, never> : TReturning[]> implements SQLWrapper {\r\n                        ~~~~~~~~\r\n\r\n  node_modules/drizzle-orm/sql/index.d.ts:47:5\r\n    47     getSQL(): SQL;\r\n           ~~~~~~~~~~~~~~\r\n    'getSQL' is declared here.\r\n\r\nnode_modules/drizzle-orm/pg-core/query-builders/select.d.ts:193:22 - error TS2515: Non-abstract class 'PgSelect<TTableName, TSelection, TSelectMode, TNullabilityMap>' does not implement inherited abstract member 'getSQL' from class 'PgSelectQueryBuilder<PgSelectHKT, TTableName, TSelection, TSelectMode, TNullabilityMap>'.\r\n\r\n193 export declare class PgSelect<TTableName extends string | undefined, TSelection, TSelectMode extends SelectMode, TNullabilityMap extends Record<string, JoinNullability> = TTableName extends string ? Record<TTableName, 'not-null'> : {}> extends PgSelectQueryBuilder<PgSelectHKT, TTableName, TSelection, TSelectMode, TNullabilityMap> {\r\n                         ~~~~~~~~\r\n\r\nnode_modules/drizzle-orm/sqlite-core/columns/blob.d.ts:1:23 - error TS1452: 'resolution-mode' assertions are only supported when `moduleResolution` is `node16` or `nodenext`.\r\n\r\n1 /// <reference types=\"node\" resolution-mode=\"require\"/>\r\n                        ~~~~\r\n\r\nnode_modules/drizzle-orm/sqlite-core/columns/blob.d.ts:2:23 - error TS2688: Cannot find type definition file for 'bun-types'.\r\n\r\n2 /// <reference types=\"bun-types\" />\r\n                        ~~~~~~~~~\r\n\r\nnode_modules/drizzle-orm/sqlite-core/query-builders/query.d.ts:24:22 - error TS2420: Class 'SQLiteRelationalQuery<TType, TResult>' incorrectly implements interface 'SQLWrapper'.\r\n  Property 'getSQL' is missing in type 'SQLiteRelationalQuery<TType, TResult>' but required in type 'SQLWrapper'.\r\n\r\n24 export declare class SQLiteRelationalQuery<TType extends 'sync' | 'async', TResult> extends QueryPromise<TResult> implements SQLWrapper {\r\n                        ~~~~~~~~~~~~~~~~~~~~~\r\n\r\n  node_modules/drizzle-orm/sql/index.d.ts:47:5\r\n    47     getSQL(): SQL;\r\n           ~~~~~~~~~~~~~~\r\n    'getSQL' is declared here.\r\n\r\nnode_modules/drizzle-orm/sqlite-core/query-builders/raw.d.ts:8:22 - error TS2420: Class 'SQLiteRaw<TRunResult>' incorrectly implements interface 'SQLWrapper'.\r\n  Property 'getSQL' is missing in type 'SQLiteRaw<TRunResult>' but required in type 'SQLWrapper'.\r\n\r\n8 export declare class SQLiteRaw<TRunResult> extends QueryPromise<TRunResult> implements SQLWrapper {\r\n                       ~~~~~~~~~\r\n\r\n  node_modules/drizzle-orm/sql/index.d.ts:47:5\r\n    47     getSQL(): SQL;\r\n           ~~~~~~~~~~~~~~\r\n    'getSQL' is declared here.\r\n\r\nnode_modules/drizzle-orm/sqlite-core/query-builders/select.d.ts:74:22 - error TS2515: Non-abstract class 'SQLiteSelect<TTableName, TResultType, TRunResult, TSelection, TSelectMode, TNullabilityMap>' does not implement inherited abstract member 'getSQL' from class 'SQLiteSelectQueryBuilder<SQLiteSelectHKT, TTableName, TResultType, TRunResult, TSelection, TSelectMode, TNullabilityMap>'.\r\n\r\n74 export declare class SQLiteSelect<TTableName extends string | undefined, TResultType extends 'sync' | 'async', TRunResult, TSelection, TSelectMode extends SelectMode = 'single', TNullabilityMap extends Record<string, JoinNullability> = TTableName extends string ? Record<TTableName, 'not-null'> : {}> extends SQLiteSelectQueryBuilder<SQLiteSelectHKT, TTableName, TResultType, TRunResult, TSelection, TSelectMode, TNullabilityMap> {\r\n                        ~~~~~~~~~~~~\r\n\r\n\r\nFound 10 errors in 9 files.\r\n\r\nErrors  Files\r\n     1  node_modules/drizzle-orm/mysql-core/db.d.ts:1\r\n     1  node_modules/drizzle-orm/mysql-core/query-builders/delete.d.ts:15\r\n     1  node_modules/drizzle-orm/mysql-core/query-builders/select.d.ts:74\r\n     1  node_modules/drizzle-orm/pg-core/query-builders/delete.d.ts:17\r\n     1  node_modules/drizzle-orm/pg-core/query-builders/select.d.ts:193\r\n     2  node_modules/drizzle-orm/sqlite-core/columns/blob.d.ts:1\r\n     1  node_modules/drizzle-orm/sqlite-core/query-builders/query.d.ts:24\r\n     1  node_modules/drizzle-orm/sqlite-core/query-builders/raw.d.ts:8\r\n     1  node_modules/drizzle-orm/sqlite-core/query-builders/select.d.ts:74\r\nerror Command failed with exit code 2.\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nExpect TypeScript to be able to build. Confirmed errors exist in individual node_module files noted in build process as well\r\n\r\n### Environment & setup\r\n\r\n**Server Platform:** Firebase Cloud Functions\r\n**Node Version:** 18\r\n**Database Type:** Neon.tech PostgreSQL\r\n**Connection Type:** http, ssl\r\n**TypeScript Version:** \"^4.9.0\"\r\n**Editor:** VSCode", "closed_by": {"login": "Angelelz", "id": 34462576, "node_id": "MDQ6VXNlcjM0NDYyNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/34462576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Angelelz", "html_url": "https://github.com/Angelelz", "followers_url": "https://api.github.com/users/Angelelz/followers", "following_url": "https://api.github.com/users/Angelelz/following{/other_user}", "gists_url": "https://api.github.com/users/Angelelz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Angelelz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Angelelz/subscriptions", "organizations_url": "https://api.github.com/users/Angelelz/orgs", "repos_url": "https://api.github.com/users/Angelelz/repos", "events_url": "https://api.github.com/users/Angelelz/events{/privacy}", "received_events_url": "https://api.github.com/users/Angelelz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207/reactions", "total_count": 33, "+1": 26, "-1": 0, "laugh": 0, "hooray": 0, "confused": 3, "heart": 0, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/drizzle-team/drizzle-orm/issues/1207/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}]}