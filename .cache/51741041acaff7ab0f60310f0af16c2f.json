{"d": {"facets": {"category": [{"count": 55, "value": "QnA"}, {"count": 9, "value": "Documentation"}, {"count": 9, "value": "Reference"}]}, "results": [{"title": "How do I run multiple processes using pm2 ? on Azure App Service - Microsoft Q&A", "url": "https://learn.microsoft.com/en-us/answers/questions/681248/how-do-i-run-multiple-processes-using-pm2-on-azure", "displayUrl": {"content": "/answers/questions/681248/how-do-i-run-multiple-processes-using-pm2-on-azure", "hitHighlights": [{"start": 64, "length": 3}]}, "description": "I am trying to deploy a simple NodeJS app to Azure App Service, I would like the app to run using PM2 with the option to configure multiple processes using PM2\nI tried few options:\nOption 1: with\nin package.json, the app serves requests but does not run on PM2. No processes were running when I run PM2 list command in app service ssh console.\nAlthough Azure docs indicate that the container automatically starts the app with PM2 when index.js file is in the root folder, this did not happen.\nOption 2: with\nin package.json, the app was started with PM2, only 1 process was running (confirmed this by running PM2 list command in app service ssh console).\nHow do I run multiple processes using pm2 ? on Azure App Service\nOption 3: With the intention of running multiple processes, In addition to\nin package.json, I also created a ecosystem.config file using pm2 init. I get this error\nERROR - Container test didn't respond to HTTP pings on port: 8080, failing site start\necosystem.config file:\nPackage.JSON\nIndex.js", "descriptions": [{"content": "How do I run multiple processes using pm2 ?", "hitHighlights": [{"start": 38, "length": 3}]}, {"content": "To start your app with PM2, set the startup command to pm2 start &lt;.js-file-or-PM2-file&gt; --no-daemon.", "hitHighlights": [{"start": 23, "length": 3}, {"start": 55, "length": 3}, {"start": 81, "length": 3}]}], "lastUpdatedDate": "2022-01-05T21:27:55.657+00:00", "breadcrumbs": [], "category": "QnA", "createdAt": "2022-01-03T05:59:29.22+00:00", "acceptedAnswer": false, "answerCount": 1, "author": {"userId": "a9b970ae-afa6-40ad-a49c-031d4d443fdc", "displayName": "Pravishanth", "isPrivate": false, "isMicrosoftUser": false, "isMvp": false, "reputationPoints": 0}}, {"title": "Configure Node.js Apps - Azure App Service", "url": "https://learn.microsoft.com/en-us/azure/app-service/configure-language-nodejs", "displayUrl": {"content": "/azure/app-service/configure-language-nodejs", "hitHighlights": []}, "description": "Learn how to configure a Node.js app in the native Windows instances, or in a prebuilt Linux container, in Azure App Service.", "descriptions": [{"content": "Tool Purpose Run with PM2 Recommended.", "hitHighlights": [{"start": 22, "length": 3}]}, {"content": "PM2 provides a full-service app management platform.", "hitHighlights": [{"start": 0, "length": 3}]}, {"content": "To start your app with PM2, set the startup command to pm2 start <.js-file-or-PM2-file> --no-daemon.", "hitHighlights": [{"start": 23, "length": 3}, {"start": 55, "length": 3}, {"start": 78, "length": 3}]}], "lastUpdatedDate": "2025-11-18T18:43:00+00:00", "breadcrumbs": [], "category": "Documentation"}, {"title": "How to write startup command in nodejs App Service (Stack: node20 LTS   OS:Linux)\uff1f - Microsoft Q&A", "url": "https://learn.microsoft.com/en-us/answers/questions/1808795/how-to-write-startup-command-in-nodejs-app-service", "displayUrl": {"content": "/answers/questions/1808795/how-to-write-startup-command-in-nodejs-app-service", "hitHighlights": []}, "description": "We need to install pm2-logrotate module in webapp, however the webapp can't start when input startup command in App Service. Could you please help to confirm how to write the start command in nodejs webapp and let the webapp start successfully?\nError screenshot : If we don't input start command in webapp, the webapp can start successfully.\nStart command: install pm2-logrotate module\nDoker log:\n2024-07-11T15:24:33.300Z INFO  - Starting container for site\n2024-07-11T15:24:33.301Z INFO  - docker run -d --expose=8080 --name nodejs0711_0_3d6f0176 -e WEBSITE_USE_DIAGNOSTIC_SERVER=true -e WEBSITE_SITE_NAME=nodejs0711 -e WEBSITE_AUTH_ENABLED=False -e WEBSITE_ROLE_INSTANCE_ID=0 -e WEBSITE_HOSTNAME=nodejs0711.chinacloudsites.cn -e WEBSITE_INSTANCE_ID=37c77572be775c3da9e718e75bdd3dcd6c69246656e6f77972070ce4bfef6455 appsvc/node:20-lts_20240619.2.tuxprod\npm2 install pm2-logrotate\n2024-07-11T15:24:33.302Z INFO  - Logging is not enabled for this container.\nPlease use\nhttps://aka.ms/linux-diagnostics\nto enable logging to see container logs here.\n2024-07-11T15:24:36.378Z INFO  - Initiating warmup request to container nodejs0711_0_3d6f0176 for site nodejs0711\n2024-07-11T15:24:53.479Z INFO  - Waiting for response to warmup request for container nodejs0711_0_3d6f0176. Elapsed time = 17.1014129 sec\n2024-07-11T15:25:09.013Z INFO  - Waiting for response to warmup request for container nodejs0711_0_3d6f0176. Elapsed time = 32.6347812 sec\n2024-07-11T15:25:24.567Z INFO  - Waiting for response to warmup request for container nodejs0711_0_3d6f0176. Elapsed time = 48.1890842 sec\n2024-07-11T15:25:40.122Z INFO  - Waiting for response to warmup request for container nodejs0711_0_3d6f0176. Elapsed time = 63.7435066 sec\n2024-07-11T15:25:54.622Z ERROR -\nContainer nodejs0711_0_3d6f0176 for site nodejs0711 has exited, failing site start\n2024-07-11T15:25:54.643Z ERROR -\nContainer nodejs0711_0_3d6f0176 didn't respond to HTTP pings on port: 8080, failing site start. See container logs for debugging.\n2024-07-11T15:25:54.714Z INFO  -\nStopping site nodejs0711 because it failed during startup.\nDefault docker log: we can see the pm2-logrotate module was installed successfully.\n2024-07-11T15:24:34.303085997Z    _____\n2024-07-11T15:24:34.303142997Z   /  _  \\ __________ _________   ____\n2024-07-11T15:24:34.303149297Z  /  /\n\\  \\\n__   /  |  _  __ _/ __ \\\n2024-07-11T15:24:34.303153097Z /    |    /    /|  |  /|  | /\\  ___/\n2024-07-11T15:24:34.303156597Z _\n|\n/_____ _\n/ |\n|    ___  &gt;\n2024-07-11T15:24:34.303160297Z         /      /                  /\n2024-07-11T15:24:34.303163697Z A P P   S E R V I C E   O N   L I N U X\n2024-07-11T15:24:34.303167197Z\n2024-07-11T15:24:34.303170597Z Documentation:\nhttp://aka.ms/webapp-linux\n2024-07-11T15:24:34.303173897Z NodeJS quickstart:\nhttps://aka.ms/node-qs\n2024-07-11T15:24:34.303177197Z NodeJS Version : v20.14.0\n2024-07-11T15:24:34.303180497Z Note: Any data outside '/home' is not persisted\n2024-07-11T15:24:34.303184697Z\n2024-07-11T15:24:39.240284014Z Starting OpenBSD Secure Shell server: sshd.\n2024-07-11T15:24:39.299857429Z WEBSITES_INCLUDE_CLOUD_CERTS is not set to true.\n2024-07-11T15:24:39.816415227Z Starting periodic command scheduler: cron.\n2024-07-11T15:24:40.143405158Z Could not find build manifest file at '/home/site/wwwroot/oryx-manifest.toml'\n2024-07-11T15:24:40.145019161Z Could not find operation ID in manifest. Generating an operation id...\n2024-07-11T15:24:40.145039361Z Build Operation ID: 3493ae99-b7d4-40b1-916b-aa04a3f58819\n2024-07-11T15:24:42.293290080Z Environment Variables for Application Insight's IPA Codeless Configuration exists..\n2024-07-11T15:24:42.518576910Z Writing output script to '/opt/startup/startup.sh'\n2024-07-11T15:24:42.795027137Z Running #!/bin/sh\n2024-07-11T15:24:42.795077737Z\n2024-07-11T15:24:42.795084137Z # Enter the source directory to make sure the script runs where the user expects\n2024-07-11T15:24:42.795088537Z cd &quot;/home/site/wwwroot&quot;\n2024-07-11T15:24:42.795092537Z\n2024-07-11T15:24:42.795096337Z export NODE_PATH=/usr/local/lib/node_modules:$NODE_PATH\n2024-07-11T15:24:42.795100337Z if [ -z &quot;$PORT&quot; ]; then\n2024-07-11T15:24:42.795104337Z \t\texport PORT=8080\n2024-07-11T15:24:42.795108437Z fi\n2024-07-11T15:24:42.795113037Z\n2024-07-11T15:24:42.795116837Z PATH=&quot;$PATH:/home/site/wwwroot&quot; pm2 install pm2-logrotate\n2024-07-11T15:24:46.745956269Z\n2024-07-11T15:24:46.746033770Z                         -------------\n2024-07-11T15:24:46.746042071Z\n2024-07-11T15:24:46.746046971Z\n/\\\\\\\\\\\\_\n/\\\\\n___________/\\\\\n/\\\\\\\\_\n2024-07-11T15:24:46.746052471Z  _/\\/////////\\_/\\\\\\____\n/\\\\\\\n/\\///////\\_\n2024-07-11T15:24:46.746058071Z\n/\\_\n/\\_/\\//\\_\n/\\//\\_///\n___\n//\\_\n2024-07-11T15:24:46.746083171Z\n/\\\\\\\\\\\\/__/\\\\///\\/\\/\n/\\________\n/\\/\n2024-07-11T15:24:46.746089971Z\n/\\/////////\n/\\_\n///\\/\n/\\_\n_\n/\\//\n2024-07-11T15:24:46.746095071Z\n/\\_\n/\\_\n///\n/\\_\n_/\\//________\n2024-07-11T15:24:46.746100171Z\n/\\_\n/\\_\n/\\_\n/\\/\n________\n2024-07-11T15:24:46.746104971Z\n/\\_\n/\\_\n/\\_\n/\\\\\\\\\\\\\\_\n2024-07-11T15:24:46.746110072Z         _///\n///\n///\n///////////////\n2024-07-11T15:24:46.746114772Z\n2024-07-11T15:24:46.746119372Z\n2024-07-11T15:24:46.746123772Z                           Runtime Edition\n2024-07-11T15:24:46.746128272Z\n2024-07-11T15:24:46.746132672Z         PM2 is a Production Process Manager for Node.js applications\n2024-07-11T15:24:46.746137272Z                      with a built-in Load Balancer.\n2024-07-11T15:24:46.746141872Z\n2024-07-11T15:24:46.746146172Z                 Start and Daemonize any application:\n2024-07-11T15:24:46.746150772Z                 $ pm2 start app.js\n2024-07-11T15:24:46.746155272Z\n2024-07-11T15:24:46.746159672Z                 Load Balance 4 instances of api.js:\n2024-07-11T15:24:46.746164172Z                 $ pm2 start api.js -i 4\n2024-07-11T15:24:46.746168672Z\n2024-07-11T15:24:46.746173072Z                 Monitor in production:\n2024-07-11T15:24:46.746177873Z                 $ pm2 monitor\n2024-07-11T15:24:46.746182373Z\n2024-07-11T15:24:46.746186673Z                 Make pm2 auto-boot at server restart:\n2024-07-11T15:24:46.746191273Z                 $ pm2 startup\n2024-07-11T15:24:46.746195773Z\n2024-07-11T15:24:46.746200073Z                 To go further checkout:\n2024-07-11T15:24:46.746204473Z\nhttp://pm2.io/\n2024-07-11T15:24:46.746208973Z\n2024-07-11T15:24:46.746213273Z\n2024-07-11T15:24:46.746217673Z                         -------------\n2024-07-11T15:24:46.746222173Z\n2024-07-11T15:24:46.960528992Z [PM2] Spawning PM2 daemon with pm2_home=/root/.pm2\n2024-07-11T15:24:48.159437444Z [PM2] This PM2 is not UP TO DATE\n2024-07-11T15:24:48.254012303Z [PM2] Upgrade to version 5.4.2\n2024-07-11T15:24:49.460544609Z [PM2] PM2 Successfully daemonized\n2024-07-11T15:24:49.557142264Z [PM2][Module]\nInstalling NPM pm2-logrotate module\n2024-07-11T15:24:49.686806771Z [PM2][Module] Calling [NPM] to install pm2-logrotate ...\n2024-07-11T15:25:52.906496053Z\n2024-07-11T15:25:52.914779470Z added 178 packages in 1m\n2024-07-11T15:25:52.925089790Z\n2024-07-11T15:25:52.925114590Z 22 packages are looking for funding\n2024-07-11T15:25:52.925120290Z   run\nfor details\n2024-07-11T15:25:52.934718610Z npm notice\n2024-07-11T15:25:52.936759714Z npm notice New minor version of npm available! 10.5.0 -&gt; 10.8.2\n2024-07-11T15:25:52.943107326Z npm notice Changelog:\nhttps://github.com/npm/cli/releases/tag/v10.8.2\n2024-07-11T15:25:52.952904546Z npm notice Run\nto update!\n2024-07-11T15:25:52.952965946Z npm notice\n2024-07-11T15:25:53.035646011Z [PM2][Module] Module downloaded\n2024-07-11T15:25:53.080548800Z [PM2][WARN] Applications pm2-logrotate not running, starting...\n2024-07-11T15:25:53.188017714Z [PM2]\nApp [pm2-logrotate] launched (1 instances)\n2024-07-11T15:25:53.197364433Z Module:\npm2-logrotate\n2024-07-11T15:25:53.197985334Z\n$\npm2 set pm2-logrotate:max_size 10M\n2024-07-11T15:25:53.199967838Z\n$ pm2 set pm2-logrotate:retain 30\n2024-07-11T15:25:53.206671551Z\n$ pm2 set pm2-logrotate:compress false\n2024-07-11T15:25:53.208114954Z\n$ pm2 set pm2-logrotate:dateFormat YYYY-MM-DD_HH-mm-ss\n2024-07-11T15:25:53.208132554Z\n$ pm2 set pm2-logrotate:workerInterval 30\n2024-07-11T15:25:53.208453355Z **$ pm2 set pm2-logrotate:rotateInterval 0 0 * * ***\n2024-07-11T15:25:53.209702557Z\n$ pm2 set pm2-logrotate:rotateModule true\n2024-07-11T15:25:53.209722157Z Modules configuration. Copy/Paste line to edit values.\n2024-07-11T15:25:53.217413973Z [PM2][Module]\nModule successfully installed and launched\n2024-07-11T15:25:53.226902092Z [PM2][Module] Checkout module options:\n2024-07-11T15:25:53.403106642Z \u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n2024-07-11T15:25:53.403164742Z \u2502 id \u2502 name             \u2502 namespace   \u2502 version \u2502 mode    \u2502 pid      \u2502 uptime \u2502 \u21ba    \u2502 status    \u2502 cpu      \u2502 mem      \u2502 user     \u2502 watching \u2502\n2024-07-11T15:25:53.403173142Z \u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n2024-07-11T15:25:53.406698349Z Module\n2024-07-11T15:25:53.433406102Z \u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n2024-07-11T15:25:53.433458903Z \u2502 id \u2502 module                       \u2502 version       \u2502 pid      \u2502 status   \u2502 \u21ba    \u2502 cpu      \u2502 mem      \u2502 user     \u2502\n2024-07-11T15:25:53.433466003Z \u251c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n2024-07-11T15:25:53.433470903Z \u2502 0  \u2502 pm2-logrotate                \u2502 2.7.0         \u2502 150      \u2502 online   \u2502 0    \u2502 0%       \u2502 20.7mb   \u2502 root     \u2502\n2024-07-11T15:25:53.433475703Z \u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518", "descriptions": [{"content": "We need to install pm2-logrotate module in webapp, however the webapp can't start when input startup command in App Service.", "hitHighlights": [{"start": 19, "length": 3}]}], "lastUpdatedDate": "2024-07-22T12:15:59.32+00:00", "breadcrumbs": [], "category": "QnA", "createdAt": "2024-07-11T16:11:14.54+00:00", "acceptedAnswer": false, "answerCount": 0, "author": {"userId": "8b1ae071-499f-4d51-a064-d57eee909c50", "displayName": "Gallatin 21V", "isPrivate": false, "isMicrosoftUser": false, "isMvp": false, "reputationPoints": 0}}], "spellingCorrection": [], "scopeRemoved": false, "count": 73, "nextLink": "https://learn.microsoft.com/api/Search?search=pm2&locale=en-us&$top=3&facet=category&$skip=3", "srcheng": "02", "termHasSynonyms": false}}