{"d": [{"url": "https://api.github.com/repos/gin-gonic/gin/issues/1580", "repository_url": "https://api.github.com/repos/gin-gonic/gin", "labels_url": "https://api.github.com/repos/gin-gonic/gin/issues/1580/labels{/name}", "comments_url": "https://api.github.com/repos/gin-gonic/gin/issues/1580/comments", "events_url": "https://api.github.com/repos/gin-gonic/gin/issues/1580/events", "html_url": "https://github.com/gin-gonic/gin/pull/1580", "id": 365584508, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE5NDcwMzA5", "number": 1580, "title": "fix(gin): data race warning for gin mode", "user": {"login": "kplachkov", "id": 20207730, "node_id": "MDQ6VXNlcjIwMjA3NzMw", "avatar_url": "https://avatars.githubusercontent.com/u/20207730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kplachkov", "html_url": "https://github.com/kplachkov", "followers_url": "https://api.github.com/users/kplachkov/followers", "following_url": "https://api.github.com/users/kplachkov/following{/other_user}", "gists_url": "https://api.github.com/users/kplachkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/kplachkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kplachkov/subscriptions", "organizations_url": "https://api.github.com/users/kplachkov/orgs", "repos_url": "https://api.github.com/users/kplachkov/repos", "events_url": "https://api.github.com/users/kplachkov/events{/privacy}", "received_events_url": "https://api.github.com/users/kplachkov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 107421005, "node_id": "MDU6TGFiZWwxMDc0MjEwMDU=", "url": "https://api.github.com/repos/gin-gonic/gin/labels/type/bug", "name": "type/bug", "color": "fc2929", "default": false, "description": "Found something you weren't expecting? Report it here!"}, {"id": 107421007, "node_id": "MDU6TGFiZWwxMDc0MjEwMDc=", "url": "https://api.github.com/repos/gin-gonic/gin/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/gin-gonic/gin/milestones/26", "html_url": "https://github.com/gin-gonic/gin/milestone/26", "labels_url": "https://api.github.com/repos/gin-gonic/gin/milestones/26/labels", "id": 10682029, "node_id": "MI_kwDOAT759c4Aov6t", "number": 26, "title": "v1.11", "description": "", "creator": {"login": "appleboy", "id": 21979, "node_id": "MDQ6VXNlcjIxOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/21979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appleboy", "html_url": "https://github.com/appleboy", "followers_url": "https://api.github.com/users/appleboy/followers", "following_url": "https://api.github.com/users/appleboy/following{/other_user}", "gists_url": "https://api.github.com/users/appleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/appleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appleboy/subscriptions", "organizations_url": "https://api.github.com/users/appleboy/orgs", "repos_url": "https://api.github.com/users/appleboy/repos", "events_url": "https://api.github.com/users/appleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/appleboy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 117, "state": "closed", "created_at": "2024-03-14T03:24:25Z", "updated_at": "2025-09-20T12:29:20Z", "due_on": "2024-09-30T00:00:00Z", "closed_at": "2025-09-20T12:29:20Z"}, "comments": 9, "created_at": "2018-10-01T18:24:20Z", "updated_at": "2024-05-08T18:59:39Z", "closed_at": "2024-05-08T01:13:36Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/gin-gonic/gin/pulls/1580", "html_url": "https://github.com/gin-gonic/gin/pull/1580", "diff_url": "https://github.com/gin-gonic/gin/pull/1580.diff", "patch_url": "https://github.com/gin-gonic/gin/pull/1580.patch", "merged_at": "2024-05-08T01:13:36Z"}, "body": "Added atomic operations.  \r\nFixes #1180 ", "closed_by": {"login": "appleboy", "id": 21979, "node_id": "MDQ6VXNlcjIxOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/21979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appleboy", "html_url": "https://github.com/appleboy", "followers_url": "https://api.github.com/users/appleboy/followers", "following_url": "https://api.github.com/users/appleboy/following{/other_user}", "gists_url": "https://api.github.com/users/appleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/appleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appleboy/subscriptions", "organizations_url": "https://api.github.com/users/appleboy/orgs", "repos_url": "https://api.github.com/users/appleboy/repos", "events_url": "https://api.github.com/users/appleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/appleboy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/gin-gonic/gin/issues/1580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gin-gonic/gin/issues/1580/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2473", "repository_url": "https://api.github.com/repos/gin-gonic/gin", "labels_url": "https://api.github.com/repos/gin-gonic/gin/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/gin-gonic/gin/issues/2473/comments", "events_url": "https://api.github.com/repos/gin-gonic/gin/issues/2473/events", "html_url": "https://github.com/gin-gonic/gin/issues/2473", "id": 682646045, "node_id": "MDU6SXNzdWU2ODI2NDYwNDU=", "number": 2473, "title": "X-Forwarded-For handling is unsafe", "user": {"login": "sorenisanerd", "id": 160090, "node_id": "MDQ6VXNlcjE2MDA5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/160090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sorenisanerd", "html_url": "https://github.com/sorenisanerd", "followers_url": "https://api.github.com/users/sorenisanerd/followers", "following_url": "https://api.github.com/users/sorenisanerd/following{/other_user}", "gists_url": "https://api.github.com/users/sorenisanerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/sorenisanerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sorenisanerd/subscriptions", "organizations_url": "https://api.github.com/users/sorenisanerd/orgs", "repos_url": "https://api.github.com/users/sorenisanerd/repos", "events_url": "https://api.github.com/users/sorenisanerd/events{/privacy}", "received_events_url": "https://api.github.com/users/sorenisanerd/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 107421005, "node_id": "MDU6TGFiZWwxMDc0MjEwMDU=", "url": "https://api.github.com/repos/gin-gonic/gin/labels/type/bug", "name": "type/bug", "color": "fc2929", "default": false, "description": "Found something you weren't expecting? Report it here!"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-20T11:40:37Z", "updated_at": "2021-05-06T17:24:44Z", "closed_at": "2021-05-06T13:25:19Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "https://github.com/gin-gonic/gin/blob/b94d23d1b48d7b5078035ddbab0c3b5df138b827/context.go#L716-L725\r\n\r\nIf Gin is exposed directly to the internet, a client can easily spoof its client IP by simply setting an X-Forwarded-For header.\r\n\r\nThe correct way to handle this is to require a list of trusted proxies to be configured. If unset, X-Forwarded-For should be ignored.\r\n\r\nI filed a similar issue against Cloud Foundry's gorouter a few years ago. cloudfoundry/gorouter#179  In case that repo should migrate elsewhere, I'm copying the contents of the report in its entirety here:\r\n\r\n## Issue\r\n\r\nX-Forwarded-For is passed through unfiltered, allowing anyone to spoof their origin IP.\r\n\r\n## Context\r\n\r\nX-Forwarded-For records the path a given request has taken. The first IP is the origin client, each subsequent IP denotes a path along the way (proxies, load balancers, whatever). It's the only way for a backend service to determine the original IP, since the incoming connection is from the gorouter.\r\n\r\nHowever, blindly trusting the header obviously allows anyone to spoof the origin IP. Common ways to address this security problem is to only trust X-Forwarded-For headers from trusted sources.\r\n\r\nExamples of how to mitigate this problem:\r\nhttps://httpd.apache.org/docs/current/mod/mod_remoteip.html#remoteiptrustedproxy\r\nhttp://nginx.org/en/docs/http/ngx_http_realip_module.html#set_real_ip_from\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nPass a X-Forwarded-For header with someone else's IP (e.g. 8.8.8.8) in it to your application, and it'll appear as though that's where the request came from.\r\n\r\n## Expected result\r\n\r\nSince I'm not a trusted client, my X-Forwarded-For header should have been discarded, and my IP should be the first in the X-Forwarded-For header received by the backend.\r\n\r\n## Current result\r\n\r\nThe backend service will see an X-Forwarded-For header reading \"8.8.8.8, [my real IP], [gorouter IP]\" (possibly more, if there's a load balancer or something in the path). It will think the request came from 8.8.8.8.\r\n\r\n## Possible Fix\r\n\r\nAllow specifying a list of IPs (or CIDR's) of trusted proxies and load balancers. If the request didn't come from one of them, discard the X-Forwarded-For. For bonus points, do what nginx does: Go through the list (starting from the last entry) and check each entry to see if it's the list of trusted proxies. When one is encountered that's not on the list, discard everything before it.\r\n\r\n\r\n\r\nAll of the above also applies to X-Forwarded-Proto. We shouldn't trust people to say that their request was ever HTTPS if it never was.", "closed_by": {"login": "appleboy", "id": 21979, "node_id": "MDQ6VXNlcjIxOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/21979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appleboy", "html_url": "https://github.com/appleboy", "followers_url": "https://api.github.com/users/appleboy/followers", "following_url": "https://api.github.com/users/appleboy/following{/other_user}", "gists_url": "https://api.github.com/users/appleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/appleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appleboy/subscriptions", "organizations_url": "https://api.github.com/users/appleboy/orgs", "repos_url": "https://api.github.com/users/appleboy/repos", "events_url": "https://api.github.com/users/appleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/appleboy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2473/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gin-gonic/gin/issues/2473/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2282", "repository_url": "https://api.github.com/repos/gin-gonic/gin", "labels_url": "https://api.github.com/repos/gin-gonic/gin/issues/2282/labels{/name}", "comments_url": "https://api.github.com/repos/gin-gonic/gin/issues/2282/comments", "events_url": "https://api.github.com/repos/gin-gonic/gin/issues/2282/events", "html_url": "https://github.com/gin-gonic/gin/issues/2282", "id": 578802712, "node_id": "MDU6SXNzdWU1Nzg4MDI3MTI=", "number": 2282, "title": "RedirectFixedPath redirecting trailing slashes", "user": {"login": "japettyjohn", "id": 1334370, "node_id": "MDQ6VXNlcjEzMzQzNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1334370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japettyjohn", "html_url": "https://github.com/japettyjohn", "followers_url": "https://api.github.com/users/japettyjohn/followers", "following_url": "https://api.github.com/users/japettyjohn/following{/other_user}", "gists_url": "https://api.github.com/users/japettyjohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/japettyjohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japettyjohn/subscriptions", "organizations_url": "https://api.github.com/users/japettyjohn/orgs", "repos_url": "https://api.github.com/users/japettyjohn/repos", "events_url": "https://api.github.com/users/japettyjohn/events{/privacy}", "received_events_url": "https://api.github.com/users/japettyjohn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 107421005, "node_id": "MDU6TGFiZWwxMDc0MjEwMDU=", "url": "https://api.github.com/repos/gin-gonic/gin/labels/type/bug", "name": "type/bug", "color": "fc2929", "default": false, "description": "Found something you weren't expecting? Report it here!"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-10T19:13:34Z", "updated_at": "2022-11-06T09:02:42Z", "closed_at": "2022-11-06T09:02:42Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "## Description\r\n\r\nRedirectFixedPath is redirecting trailing slashes regardless of the RedirectTrailingSlash setting.\r\n\r\nIn [gin.go](https://github.com/gin-gonic/gin/blob/master/gin.go#L73) there is a comment that the RedirectTrailingSlash is independent, but then the comment does not indicate that the behavior would be to also redirect trailing slashes in RedirectFixedPath always. If it's the intended behavior then the comment should be clarified.\r\n\r\nIf it's not the intended behavior then the trouble is in [gin.go](https://github.com/gin-gonic/gin/blob/master/gin.go#L421) where it uses engine.RedirectFixedPath for the trailingSlash parameter, which is always going to evaluate to true in where RedirectFixedPath is in use.\r\n\r\n## How to reproduce\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"net/http/httptest\"\r\n\r\n\t\"github.com/gin-gonic/gin\"\r\n)\r\n\r\nfunc main() {\r\n\tr := gin.Default()\r\n\tr.RedirectTrailingSlash = false\r\n\tr.RedirectFixedPath = true\r\n\tr.GET(\"/ping\", func(c *gin.Context) {\r\n\t\tc.String(200, \"pong\")\r\n\t})\r\n\r\n\tresp := httptest.NewRecorder()\r\n\tr.ServeHTTP(resp, httptest.NewRequest(\"GET\", \"/ping/\", nil))\r\n\tfmt.Println(resp.Result().StatusCode, resp.Header().Get(\"Location\"))\r\n}\r\n```\r\n\r\n## Expectations\r\n\r\n```\r\n$ curl localhost:8080/ping/\r\n404 page not found\r\n```\r\n\r\n## Actual result\r\n\r\n```\r\n$ curl localhost:8080/ping/\r\n<a href=\"/ping\">Moved Permanently</a>.\r\n```\r\n\r\n## Environment\r\n\r\n- go version: go version go1.13.8 darwin/amd64\r\n- gin version (or commit ref): v1.5.0\r\n- operating system: macOS High Sierra\r\n", "closed_by": {"login": "appleboy", "id": 21979, "node_id": "MDQ6VXNlcjIxOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/21979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appleboy", "html_url": "https://github.com/appleboy", "followers_url": "https://api.github.com/users/appleboy/followers", "following_url": "https://api.github.com/users/appleboy/following{/other_user}", "gists_url": "https://api.github.com/users/appleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/appleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appleboy/subscriptions", "organizations_url": "https://api.github.com/users/appleboy/orgs", "repos_url": "https://api.github.com/users/appleboy/repos", "events_url": "https://api.github.com/users/appleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/appleboy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2282/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gin-gonic/gin/issues/2282/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2211", "repository_url": "https://api.github.com/repos/gin-gonic/gin", "labels_url": "https://api.github.com/repos/gin-gonic/gin/issues/2211/labels{/name}", "comments_url": "https://api.github.com/repos/gin-gonic/gin/issues/2211/comments", "events_url": "https://api.github.com/repos/gin-gonic/gin/issues/2211/events", "html_url": "https://github.com/gin-gonic/gin/issues/2211", "id": 550602515, "node_id": "MDU6SXNzdWU1NTA2MDI1MTU=", "number": 2211, "title": "RedirectTrailingSlash not working if there are more than one child route", "user": {"login": "ashishraman", "id": 50578401, "node_id": "MDQ6VXNlcjUwNTc4NDAx", "avatar_url": "https://avatars.githubusercontent.com/u/50578401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashishraman", "html_url": "https://github.com/ashishraman", "followers_url": "https://api.github.com/users/ashishraman/followers", "following_url": "https://api.github.com/users/ashishraman/following{/other_user}", "gists_url": "https://api.github.com/users/ashishraman/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashishraman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashishraman/subscriptions", "organizations_url": "https://api.github.com/users/ashishraman/orgs", "repos_url": "https://api.github.com/users/ashishraman/repos", "events_url": "https://api.github.com/users/ashishraman/events{/privacy}", "received_events_url": "https://api.github.com/users/ashishraman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 107421005, "node_id": "MDU6TGFiZWwxMDc0MjEwMDU=", "url": "https://api.github.com/repos/gin-gonic/gin/labels/type/bug", "name": "type/bug", "color": "fc2929", "default": false, "description": "Found something you weren't expecting? Report it here!"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-16T06:31:01Z", "updated_at": "2022-11-06T09:02:43Z", "closed_at": "2022-11-06T09:02:43Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "## Description\r\nRedirectTrailingSlash not working if there are more than two child route.\r\n\r\n## How to reproduce\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"github.com/gin-gonic/gin\"\r\n)\r\n\r\nfunc main() {\r\n\tg := gin.New()\r\n        router := g.Group(\"/v1\")\r\n\trouter.GET(\"/hello\", dummyFunction)\r\n        router.GET(\"/hello/a\", dummyFunction)\r\n        router.GET(\"/hello/b\", dummyFunction)\r\n\tg.Run(\":9000\")\r\n}\r\n```\r\n\r\n## Expectations\r\n```\r\n$ curl http://localhost:8201/hello/ should redirect [301] to {{URL}}/hello \r\n```\r\n## Actual result\r\nGetting 404\r\n\r\nThe same works if there is only one child /hello/a \r\n## Environment\r\n\r\n- go version: go version go1.13.3 linux/amd64\r\n- gin version (or commit ref):  v1.5.0\r\n- operating system: ubuntu 16.04\r\n", "closed_by": {"login": "appleboy", "id": 21979, "node_id": "MDQ6VXNlcjIxOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/21979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appleboy", "html_url": "https://github.com/appleboy", "followers_url": "https://api.github.com/users/appleboy/followers", "following_url": "https://api.github.com/users/appleboy/following{/other_user}", "gists_url": "https://api.github.com/users/appleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/appleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appleboy/subscriptions", "organizations_url": "https://api.github.com/users/appleboy/orgs", "repos_url": "https://api.github.com/users/appleboy/repos", "events_url": "https://api.github.com/users/appleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/appleboy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/gin-gonic/gin/issues/2211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gin-gonic/gin/issues/2211/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}]}