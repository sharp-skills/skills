{"d": [{"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1577", "id": 3455277459, "node_id": "PR_kwDOF8_QEs6qmHe6", "number": 1577, "title": "\ud83d\udc1b Fix `alias` support for Pydantic v2", "user": {"login": "ravishan16", "id": 4581463, "node_id": "MDQ6VXNlcjQ1ODE0NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/4581463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravishan16", "html_url": "https://github.com/ravishan16", "followers_url": "https://api.github.com/users/ravishan16/followers", "following_url": "https://api.github.com/users/ravishan16/following{/other_user}", "gists_url": "https://api.github.com/users/ravishan16/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravishan16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravishan16/subscriptions", "organizations_url": "https://api.github.com/users/ravishan16/orgs", "repos_url": "https://api.github.com/users/ravishan16/repos", "events_url": "https://api.github.com/users/ravishan16/events{/privacy}", "received_events_url": "https://api.github.com/users/ravishan16/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-09-25T22:56:03Z", "updated_at": "2025-12-23T20:57:44Z", "closed_at": "2025-12-23T20:57:44Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1577", "html_url": "https://github.com/fastapi/sqlmodel/pull/1577", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1577.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1577.patch", "merged_at": "2025-12-23T20:57:43Z"}, "body": "## Description\r\n\r\nThis PR fixes the Field(alias=\"...\") functionality that was broken in Pydantic v2 while maintaining full backward compatibility with Pydantic v1.\r\n\r\n## Problem\r\n\r\nIn Pydantic v2, the `alias` parameter in SQLModel's `Field` function was not working correctly for validation and serialization. The issue was that Pydantic v2 requires explicit `validation_alias` and `serialization_alias` parameters, but SQLModel wasn't automatically propagating the `alias` value to these parameters.\r\n\r\n## Solution\r\n\r\n### Changes Made:\r\n\r\n1. **Enhanced Field function**:\r\n   - Added `validation_alias` and `serialization_alias` parameters\r\n   - Implemented version-specific parameter handling\r\n\r\n2. **Automatic alias propagation**:\r\n   - ~~Modified `post_init_field_info` in `_compat.py` to automatically set `validation_alias` and `serialization_alias` from `alias` when not explicitly provided (Pydantic v2 only)~~ UPD YuriiMotov: updated it to just using `alias` value for `validation_alias` and `serialization_alias` if they are not specified directly\r\n\r\n3. **Backward compatibility**:\r\n   - Filter out v2-only parameters from FieldInfo in Pydantic v1\r\n   - Raise clear RuntimeError when v2 features are used with v1\r\n   - Conditional test execution based on Pydantic version\r\n\r\n4. **Comprehensive testing**:\r\n   - Added extensive test coverage for both Pydantic v1 and v2\r\n   - Tests automatically skip v2-specific features when running with v1\r\n   - Covers all alias scenarios including edge cases\r\n   \r\nBreaking Changes\r\nNone. This is purely a bug fix with backward compatibility maintained.\r\n\r\nCloses\r\nFixes #1536\r\n\r\n", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577/reactions", "total_count": 6, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 5, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1577/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/189", "id": 1078858933, "node_id": "I_kwDOF8_QEs5AThS1", "number": 189, "title": "SAWarning from sqlalchemy", "user": {"login": "poupryc", "id": 25421857, "node_id": "MDQ6VXNlcjI1NDIxODU3", "avatar_url": "https://avatars.githubusercontent.com/u/25421857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poupryc", "html_url": "https://github.com/poupryc", "followers_url": "https://api.github.com/users/poupryc/followers", "following_url": "https://api.github.com/users/poupryc/following{/other_user}", "gists_url": "https://api.github.com/users/poupryc/gists{/gist_id}", "starred_url": "https://api.github.com/users/poupryc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poupryc/subscriptions", "organizations_url": "https://api.github.com/users/poupryc/orgs", "repos_url": "https://api.github.com/users/poupryc/repos", "events_url": "https://api.github.com/users/poupryc/events{/privacy}", "received_events_url": "https://api.github.com/users/poupryc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 28, "created_at": "2021-12-13T18:40:43Z", "updated_at": "2024-08-29T20:27:13Z", "closed_at": "2024-08-29T20:27:13Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\r\n\r\n- [X] I added a very descriptive title to this issue.\r\n- [x] I used the GitHub search to find a similar issue and didn't find it.\r\n- [X] I searched the SQLModel documentation, with the integrated search.\r\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\r\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\r\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\r\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\r\n\r\n### Commit to Help\r\n\r\n- [X] I commit to help with one of those options \ud83d\udc46\r\n\r\n### Example Code\r\n\r\n```python\r\nNo code\r\n```\r\n\r\n\r\n### Description\r\n\r\nEvery time I use the SQLModel ORM, I get this warning.\r\n\r\n```\r\n/.../sqlmodel/orm/session.py:60: SAWarning: Class SelectOfScalar will not make use of SQL compilation caching as it does \r\nnot set the 'inherit_cache' attribute to ``True``.  This can have significant performance implications including some \r\nperformance degradations in comparison to prior SQLAlchemy versions.  Set this attribute to True if this object can make \r\nuse of the cache key generated by the superclass.  Alternatively, this attribute may be set to False which will disable this \r\nwarning. (Background on this error at: https://sqlalche.me/e/14/cprf)\r\n  results = super().execute(\r\n```\r\n\r\nA [link is given](https://sqlalche.me/e/14/cprf).\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Operating System Details\r\n\r\nLinux 5.15.7-arch1-1 x86_64 GNU/Linux\r\n\r\n\r\n### SQLModel Version\r\n\r\n0.0.4\r\n\r\n### Python Version\r\n\r\nPython 3.9.9\r\n\r\n### Additional Context\r\n\r\nThe only other reference to this problem that I have found is this one\r\nhttps://github.com/tiangolo/sqlmodel/issues/129#issuecomment-991074972 ", "closed_by": {"login": "poupryc", "id": 25421857, "node_id": "MDQ6VXNlcjI1NDIxODU3", "avatar_url": "https://avatars.githubusercontent.com/u/25421857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poupryc", "html_url": "https://github.com/poupryc", "followers_url": "https://api.github.com/users/poupryc/followers", "following_url": "https://api.github.com/users/poupryc/following{/other_user}", "gists_url": "https://api.github.com/users/poupryc/gists{/gist_id}", "starred_url": "https://api.github.com/users/poupryc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poupryc/subscriptions", "organizations_url": "https://api.github.com/users/poupryc/orgs", "repos_url": "https://api.github.com/users/poupryc/repos", "events_url": "https://api.github.com/users/poupryc/events{/privacy}", "received_events_url": "https://api.github.com/users/poupryc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189/reactions", "total_count": 70, "+1": 67, "-1": 0, "laugh": 0, "hooray": 0, "confused": 3, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/189/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/315", "id": 1217515487, "node_id": "I_kwDOF8_QEs5Ikc_f", "number": 315, "title": "SQLAlchemy version 1.4.36 breaks SQLModel relationships", "user": {"login": "archydeberker", "id": 9258253, "node_id": "MDQ6VXNlcjkyNTgyNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9258253?v=4", "gravatar_id": "", "url": "https://api.github.com/users/archydeberker", "html_url": "https://github.com/archydeberker", "followers_url": "https://api.github.com/users/archydeberker/followers", "following_url": "https://api.github.com/users/archydeberker/following{/other_user}", "gists_url": "https://api.github.com/users/archydeberker/gists{/gist_id}", "starred_url": "https://api.github.com/users/archydeberker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/archydeberker/subscriptions", "organizations_url": "https://api.github.com/users/archydeberker/orgs", "repos_url": "https://api.github.com/users/archydeberker/repos", "events_url": "https://api.github.com/users/archydeberker/events{/privacy}", "received_events_url": "https://api.github.com/users/archydeberker/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3637781886, "node_id": "LA_kwDOF8_QEs7Y1CV-", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/answered", "name": "answered", "color": "f6f6f6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 21, "created_at": "2022-04-27T15:24:19Z", "updated_at": "2022-10-11T13:29:28Z", "closed_at": "2022-09-07T00:11:20Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\r\n\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I used the GitHub search to find a similar issue and didn't find it.\r\n- [X] I searched the SQLModel documentation, with the integrated search.\r\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\r\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\r\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\r\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\r\n\r\n**\ud83d\udc46 Not quite true - this is definitely related to SQLAlchemy!**\r\n\r\n### Commit to Help\r\n\r\n- [X] I commit to help with one of those options \ud83d\udc46\r\n\r\n### Example Code\r\n\r\n```python\r\nfrom typing import Optional\r\n\r\nfrom sqlmodel import Field, Relationship, SQLModel\r\n\r\n\r\nclass City(SQLModel, table=True):\r\n    name: str = Field(primary_key=True)\r\n    heroes: \"Hero\" = Relationship(back_populates=\"city\")\r\n\r\nclass Hero(SQLModel, table=True):\r\n    name: str = Field(primary_key=True)\r\n    city_name: Optional[str] = Field(default=None,foreign_key=\"city.name\")\r\n    city: Optional[City] = Relationship(back_populates=\"heroes\",\r\n                              sa_relationship_kwargs=dict(cascade=\"all,delete\")\r\n                              )\r\n\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    gotham = City(name=\"Gotham\")\r\n    batman = Hero(name=\"Batman\", city=gotham)\r\n\r\n    assert batman.name == 'Batman' # This is fine\r\n    assert batman.city == gotham # This now breaks\r\n```\r\n\r\n\r\n### Description\r\n\r\nOur CI suddenly started failing, despite local SQLModel working fine. The issues turns out to be the transitive dependency on SQLAlchemy, which is weakly pinned: Github Actions pulled the latest version (`1.4.36`) and most of our tests started failing.\r\n\r\nhttps://github.com/sqlalchemy/sqlalchemy/releases/tag/rel_1_4_36\r\n\r\nThe problem seems to be related to how relationships are defined, but I haven't yet dug into the SQLAlchemy changes enough to understand why that is.\r\n\r\nI'm opening this issue chiefly to help anybody else who is confused by why suddenly their tests are failing. I'm happy to help fix it if it's affecting others too. \r\n\r\nFor the time being we have just pinned `SQLAlchemy==1.4.34` in our `requirements.txt`.\r\n\r\n### Operating System\r\n\r\nLinux, macOS\r\n\r\n### Operating System Details\r\n\r\nReplicated locally and on Github Actions, both running in Docker\r\n\r\n### SQLModel Version\r\n\r\n0.0.6\r\n\r\n### Python Version\r\n\r\n3.9.10\r\n\r\n### Additional Context\r\n\r\nWe were previously running SQLAlchemy 1.4.34 locally and that works fine. Pinning to 1.4.36 breaks SQLModel.", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315/reactions", "total_count": 66, "+1": 56, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 4, "rocket": 0, "eyes": 6}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/315/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1603", "id": 3505112683, "node_id": "PR_kwDOF8_QEs6tNYk6", "number": 1603, "title": "\ud83d\udc1b Fix support for `Annotated` fields with Pydantic 2.12+", "user": {"login": "stickm4n", "id": 54072664, "node_id": "MDQ6VXNlcjU0MDcyNjY0", "avatar_url": "https://avatars.githubusercontent.com/u/54072664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stickm4n", "html_url": "https://github.com/stickm4n", "followers_url": "https://api.github.com/users/stickm4n/followers", "following_url": "https://api.github.com/users/stickm4n/following{/other_user}", "gists_url": "https://api.github.com/users/stickm4n/gists{/gist_id}", "starred_url": "https://api.github.com/users/stickm4n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stickm4n/subscriptions", "organizations_url": "https://api.github.com/users/stickm4n/orgs", "repos_url": "https://api.github.com/users/stickm4n/repos", "events_url": "https://api.github.com/users/stickm4n/events{/privacy}", "received_events_url": "https://api.github.com/users/stickm4n/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 13, "created_at": "2025-10-11T03:38:33Z", "updated_at": "2026-02-01T18:17:20Z", "closed_at": "2026-02-01T18:16:15Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1603", "html_url": "https://github.com/fastapi/sqlmodel/pull/1603", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1603.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1603.patch", "merged_at": null}, "body": "After `pydantic` update to support Python 3.14, different declaration syntax were affected by the changed.\r\nI check and on `pydantic` side there is not changes on the resulting `FieldInfo` structure, at least at first glance.\r\nIn the tests I illustrated the 3 possible declaration syntax for annotations defined by `pydantic` and supported so far by `sqlmodel`. Two of them do not work any more with `pydantic>=2.12`!\r\n\r\n", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603/reactions", "total_count": 7, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1603/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/472", "id": 1417116325, "node_id": "PR_kwDOF8_QEs5BOM_X", "number": 472, "title": "Adding _init_private_attributes to SQLModel __init__ function.", "user": {"login": "alexisgaziello", "id": 29357459, "node_id": "MDQ6VXNlcjI5MzU3NDU5", "avatar_url": "https://avatars.githubusercontent.com/u/29357459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisgaziello", "html_url": "https://github.com/alexisgaziello", "followers_url": "https://api.github.com/users/alexisgaziello/followers", "following_url": "https://api.github.com/users/alexisgaziello/following{/other_user}", "gists_url": "https://api.github.com/users/alexisgaziello/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisgaziello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisgaziello/subscriptions", "organizations_url": "https://api.github.com/users/alexisgaziello/orgs", "repos_url": "https://api.github.com/users/alexisgaziello/repos", "events_url": "https://api.github.com/users/alexisgaziello/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisgaziello/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4763891089, "node_id": "LA_kwDOF8_QEs8AAAABG_M1kQ", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/investigate", "name": "investigate", "color": "5319E7", "default": false, "description": ""}, {"id": 8520318227, "node_id": "LA_kwDOF8_QEs8AAAAB-9m9Ew", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/waiting", "name": "waiting", "color": "F28673", "default": false, "description": ""}, {"id": 9229519531, "node_id": "LA_kwDOF8_QEs8AAAACJh9Kqw", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/conflicts", "name": "conflicts", "color": "d93f0b", "default": false, "description": "Automatically generated when a PR has a merge conflict"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 15, "created_at": "2022-10-20T19:05:30Z", "updated_at": "2025-10-06T18:21:15Z", "closed_at": "2025-10-06T18:21:15Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/472", "html_url": "https://github.com/fastapi/sqlmodel/pull/472", "diff_url": "https://github.com/fastapi/sqlmodel/pull/472.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/472.patch", "merged_at": null}, "body": "## Fixing:\r\n\r\nPrivate attributes cannot be used in SQLModel. Attributes initialized with `PrivateAttr` cannot be found.\r\n\r\n## Proposed solution:\r\nAdd a [missing line](https://github.com/pydantic/pydantic/blob/da7e6f89a740793a1a6cf2bb5a1883ee8575f76a/pydantic/main.py#L350) from Pydantic source code.\r\n\r\n_Note_: the class method [from_orm](https://github.com/tiangolo/sqlmodel/blob/75ce45588b6a13136916929be4c44946f7e00cbd/sqlmodel/main.py#L563) does have this initialization.\r\n\r\n## Related issues:\r\n\r\nhttps://github.com/tiangolo/sqlmodel/issues/149 mentions this issue\r\n\r\n\r\n\r\n\r\n## Disclaimer\r\n\r\nThis is my first-ever contribution to an open-source project. I would appreciate any kind of feedback.", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/472/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/420", "id": 1353481211, "node_id": "I_kwDOF8_QEs5QrHv7", "number": 420, "title": "`Field(nullable=True)` is ignored due to recent changes released in version 0.0.7", "user": {"login": "br-follow", "id": 89947784, "node_id": "MDQ6VXNlcjg5OTQ3Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/89947784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/br-follow", "html_url": "https://github.com/br-follow", "followers_url": "https://api.github.com/users/br-follow/followers", "following_url": "https://api.github.com/users/br-follow/following{/other_user}", "gists_url": "https://api.github.com/users/br-follow/gists{/gist_id}", "starred_url": "https://api.github.com/users/br-follow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/br-follow/subscriptions", "organizations_url": "https://api.github.com/users/br-follow/orgs", "repos_url": "https://api.github.com/users/br-follow/repos", "events_url": "https://api.github.com/users/br-follow/events{/privacy}", "received_events_url": "https://api.github.com/users/br-follow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3637781886, "node_id": "LA_kwDOF8_QEs7Y1CV-", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/answered", "name": "answered", "color": "f6f6f6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-08-28T22:04:33Z", "updated_at": "2022-09-10T00:13:09Z", "closed_at": "2022-09-10T00:13:09Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\r\n\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I used the GitHub search to find a similar issue and didn't find it.\r\n- [X] I searched the SQLModel documentation, with the integrated search.\r\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\r\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\r\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\r\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\r\n\r\n### Commit to Help\r\n\r\n- [X] I commit to help with one of those options \ud83d\udc46\r\n\r\n### Example Code\r\n\r\n```python\r\nfrom typing import Optional\r\n\r\nfrom sqlmodel import Field, Session, SQLModel, create_engine\r\n\r\nclass Hero(SQLModel, table=True):\r\n  id: Optional[int] = Field(default=None, primary_key=True)\r\n  # This should not be nullable\r\n  name: Optional[str] = Field(default=None, nullable=False)\r\n\r\nhero = Hero()\r\nengine = create_engine(\"sqlite:///database.db\")\r\n\r\nSQLModel.metadata.create_all(engine)\r\nwith Session(engine) as session:\r\n  session.add(hero)\r\n  session.commit()\r\n  session.refresh(hero)\r\n  print(hero)\r\n```\r\n\r\n\r\n### Description\r\n\r\n* Create a hero model with a non-nullable column by assigning it to `Field(nullable=True)`\r\n* Create a hero instance without setting the column\r\n* Save the instance to the DB. Should get an error but the hero instance saves successfully.\r\n\r\nI believe this issue was introduced here: https://github.com/tiangolo/sqlmodel/commit/9830ee0d8991ffc068ffb72ccead2427c84e58ee#r82434170\r\n\r\n### Operating System\r\n\r\nmacOS\r\n\r\n### Operating System Details\r\n\r\n_No response_\r\n\r\n### SQLModel Version\r\n\r\n0.0.7\r\n\r\n### Python Version\r\n\r\nPython 3.10.5\r\n\r\n### Additional Context\r\n\r\n_No response_", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/420/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/119", "id": 1013566249, "node_id": "I_kwDOF8_QEs48acsp", "number": 119, "title": "Alembic settings primary key to nullable", "user": {"login": "adlmtl", "id": 52795675, "node_id": "MDQ6VXNlcjUyNzk1Njc1", "avatar_url": "https://avatars.githubusercontent.com/u/52795675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adlmtl", "html_url": "https://github.com/adlmtl", "followers_url": "https://api.github.com/users/adlmtl/followers", "following_url": "https://api.github.com/users/adlmtl/following{/other_user}", "gists_url": "https://api.github.com/users/adlmtl/gists{/gist_id}", "starred_url": "https://api.github.com/users/adlmtl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adlmtl/subscriptions", "organizations_url": "https://api.github.com/users/adlmtl/orgs", "repos_url": "https://api.github.com/users/adlmtl/repos", "events_url": "https://api.github.com/users/adlmtl/events{/privacy}", "received_events_url": "https://api.github.com/users/adlmtl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3637781886, "node_id": "LA_kwDOF8_QEs7Y1CV-", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/answered", "name": "answered", "color": "f6f6f6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-10-01T16:59:31Z", "updated_at": "2022-09-07T00:11:26Z", "closed_at": "2022-09-07T00:11:26Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\n\n- [X] I added a very descriptive title to this issue.\n- [X] I used the GitHub search to find a similar issue and didn't find it.\n- [X] I searched the SQLModel documentation, with the integrated search.\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\n\n### Commit to Help\n\n- [X] I commit to help with one of those options \ud83d\udc46\n\n### Example Code\n\n```python\nclass Foo(SQLModel, table=True):\r\n    id: Optional[int] = Field(default=None, primary_key=True)\r\n    bar: str\n```\n\n\n### Description\n\n- Create model, with id field as described in docs\r\n- Run alembic migrations \r\n- Upgrade head\r\n- Run alembic migrations again\r\n\r\nAlembic reads the primary key as nullable.\r\nWhen running second time it tries to alter the field\r\nYou will then get an error when trying to upgrade.\r\nI using psycopg2-binary \r\n\r\n*Adding nullable=False to id declaration fixes this. Should this be added to the tutorial? \n\n### Operating System\n\nmacOS\n\n### Operating System Details\n\n_No response_\n\n### SQLModel Version\n\n0.0.4\n\n### Python Version\n\n3.8\n\n### Additional Context\n\n\"\"\"foo\r\n\r\nRevision ID: 6d4a123a9ff6\r\nRevises: 2910ce9e323e\r\nCreate Date: 2021-10-01 12:53:59.432921\r\n\r\n\"\"\"\r\nfrom alembic import op\r\nimport sqlalchemy as sa\r\nimport sqlmodel\r\n\r\n\r\n# revision identifiers, used by Alembic.\r\nrevision = '6d4a123a9ff6'\r\ndown_revision = '2910ce9e323e'\r\nbranch_labels = None\r\ndepends_on = None\r\n\r\n\r\ndef upgrade():\r\n    # ### commands auto generated by Alembic - please adjust! ###\r\n    op.create_table('foo',\r\n    sa.Column('id', sa.Integer(), nullable=True),\r\n    sa.Column('bar', sqlmodel.sql.sqltypes.AutoString(), nullable=False),\r\n    sa.PrimaryKeyConstraint('id')\r\n    )\r\n    op.create_index(op.f('ix_foo_bar'), 'foo', ['bar'], unique=False)\r\n    op.create_index(op.f('ix_foo_id'), 'foo', ['id'], unique=False)\r\n    # ### end Alembic commands ###\r\n\r\n\r\ndef downgrade():\r\n    # ### commands auto generated by Alembic - please adjust! ###\r\n    op.drop_index(op.f('ix_foo_id'), table_name='foo')\r\n    op.drop_index(op.f('ix_foo_bar'), table_name='foo')\r\n    op.drop_table('foo')\r\n    # ### end Alembic commands ###\r\n", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/119/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/58", "id": 982066956, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIxOTMwNTM2", "number": 58, "title": "\ud83d\udc1b Fix `AsyncSession` type annotations for `exec()`", "user": {"login": "Bobronium", "id": 36469655, "node_id": "MDQ6VXNlcjM2NDY5NjU1", "avatar_url": "https://avatars.githubusercontent.com/u/36469655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bobronium", "html_url": "https://github.com/Bobronium", "followers_url": "https://api.github.com/users/Bobronium/followers", "following_url": "https://api.github.com/users/Bobronium/following{/other_user}", "gists_url": "https://api.github.com/users/Bobronium/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bobronium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bobronium/subscriptions", "organizations_url": "https://api.github.com/users/Bobronium/orgs", "repos_url": "https://api.github.com/users/Bobronium/repos", "events_url": "https://api.github.com/users/Bobronium/events{/privacy}", "received_events_url": "https://api.github.com/users/Bobronium/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-08-29T10:58:20Z", "updated_at": "2023-10-23T14:58:18Z", "closed_at": "2023-10-23T14:58:16Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/58", "html_url": "https://github.com/fastapi/sqlmodel/pull/58", "diff_url": "https://github.com/fastapi/sqlmodel/pull/58.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/58.patch", "merged_at": "2023-10-23T14:58:16Z"}, "body": "### Fixes #54\r\n\r\n### `hero.py`:\r\n```py\r\nimport asyncio\r\nimport inspect\r\nimport sys\r\nfrom contextlib import suppress\r\nfrom pathlib import Path\r\nfrom typing import Optional, TYPE_CHECKING\r\n\r\nfrom mypy.main import main as mypy_main\r\nfrom sqlalchemy.ext.asyncio import create_async_engine\r\nfrom sqlmodel import Field, SQLModel, select\r\nfrom sqlmodel.ext.asyncio.session import AsyncSession\r\n\r\n\r\nclass Hero(SQLModel, table=True):\r\n    id: Optional[int] = Field(default=None, primary_key=True)\r\n    name: str\r\n    secret_name: str\r\n    age: Optional[int] = None\r\n\r\n\r\nasync def main() -> None:\r\n    engine = create_async_engine(\"sqlite+aiosqlite:///:memory:\")\r\n\r\n    async with engine.begin() as conn:\r\n        await conn.run_sync(SQLModel.metadata.create_all)\r\n\r\n    async with AsyncSession(engine) as session:\r\n        session.add(Hero(name=\"Spider-Boy\", secret_name=\"Pedro Parqueador\"))\r\n        await session.commit()\r\n\r\n    async with AsyncSession(engine) as session:\r\n        statement = select(Hero).where(Hero.name == \"Spider-Boy\")\r\n        reveal_type(session)\r\n        result = await session.exec(statement)\r\n        reveal_type(result)\r\n        h = result.first()\r\n        reveal_type(h)\r\n\r\n\r\nif not TYPE_CHECKING:\r\n\r\n    def reveal_type(obj):\r\n        f_back = inspect.currentframe().f_back\r\n        filename = f_back.f_globals[\"__file__\"]\r\n        with suppress(ValueError):\r\n            filename = Path(filename).relative_to(Path.cwd())\r\n        print(f\"{filename}:{f_back.f_lineno}: note: Runtime value is {obj!r}\")\r\n\r\n\r\nprint(\"Running main()\")\r\nasyncio.run(main())\r\nprint(\"\\nRunning mypy (first run may take some time)\")\r\nmypy_main(None, stdout=sys.stdout, stderr=sys.stderr, args=[__file__])\r\n```\r\n### Running on [main](https://github.com/tiangolo/sqlmodel/tree/main)\r\n```py\r\nRunning main()\r\nhero.py:33: note: Runtime value is <sqlmodel.ext.asyncio.session.AsyncSession object at 0x10314f9a0>\r\nhero.py:35: note: Runtime value is <sqlalchemy.engine.result.ScalarResult object at 0x10308bdc0>\r\nhero.py:37: note: Runtime value is Hero(age=None, name='Spider-Boy', secret_name='Pedro Parqueador', id=1)\r\n\r\nRunning mypy (first run may take some time)\r\nhero.py:33: note: Revealed type is 'sqlmodel.ext.asyncio.session.AsyncSession*'\r\nhero.py:34: error: Need type annotation for 'result'\r\nhero.py:34: error: Argument 1 to \"exec\" of \"AsyncSession\" has incompatible type \"SelectOfScalar[Hero]\"; expected \"Union[Select[<nothing>], Executable[<nothing>]]\"\r\nhero.py:35: note: Revealed type is 'sqlmodel.engine.result.ScalarResult[Any]'\r\nhero.py:37: note: Revealed type is 'Union[Any, None]'\r\nFound 2 errors in 1 file (checked 1 source file)\r\n```\r\n### Running on [Bobronium:AsyncSession_typing_fix](https://github.com/Bobronium/sqlmodel/tree/AsyncSession_typing_fix):\r\n  ```py\r\n  Running main()\r\n  hero.py:43: note: Runtime value is <sqlmodel.ext.asyncio.session.AsyncSession object at 0x102a0f940>\r\n  hero.py:45: note: Runtime value is <sqlalchemy.engine.result.ScalarResult object at 0x1029e9190>\r\n  hero.py:47: note: Runtime value is Hero(name='Spider-Boy', secret_name='Pedro Parqueador', id=1, age=None)\r\n\r\n  Running mypy (first run may take some time)\r\n  hero.py:43: note: Revealed type is 'sqlmodel.ext.asyncio.session.AsyncSession*'\r\n  hero.py:45: note: Revealed type is 'sqlmodel.engine.result.ScalarResult*[hero.Hero*]'\r\n  hero.py:47: note: Revealed type is 'Union[hero.Hero*, None]'\r\n  ```\r\n  ![image](https://user-images.githubusercontent.com/36469655/131247923-9a014708-6465-469d-983c-f030247aaccf.png)\r\n", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58/reactions", "total_count": 22, "+1": 18, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/58/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1215", "id": 2661629914, "node_id": "PR_kwDOF8_QEs6CCEly", "number": 1215, "title": "\ud83d\udc7d\ufe0f Support Pydantic version 2.10", "user": {"login": "mtr", "id": 185316, "node_id": "MDQ6VXNlcjE4NTMxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/185316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtr", "html_url": "https://github.com/mtr", "followers_url": "https://api.github.com/users/mtr/followers", "following_url": "https://api.github.com/users/mtr/following{/other_user}", "gists_url": "https://api.github.com/users/mtr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtr/subscriptions", "organizations_url": "https://api.github.com/users/mtr/orgs", "repos_url": "https://api.github.com/users/mtr/repos", "events_url": "https://api.github.com/users/mtr/events{/privacy}", "received_events_url": "https://api.github.com/users/mtr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 9229519531, "node_id": "LA_kwDOF8_QEs8AAAACJh9Kqw", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/conflicts", "name": "conflicts", "color": "d93f0b", "default": false, "description": "Automatically generated when a PR has a merge conflict"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-11-15T10:56:32Z", "updated_at": "2026-02-16T18:36:40Z", "closed_at": "2026-02-16T18:36:40Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1215", "html_url": "https://github.com/fastapi/sqlmodel/pull/1215", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1215.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1215.patch", "merged_at": null}, "body": "Without this fix, any SQLModel-based model with `table=True` and a `Field` that sets `default_factory=...` will brake with the following error message: `ValueError: 'validated_data' must be provided if 'call_default_factory' is True.`\r\n\r\nTo reproduce, before this fix is applied:\r\n\r\n- Install all project dependencies, then upgrade Pydantic:\r\n  ```shell\r\n  pip install -r requirements.txt\r\n  pip install pydantic==2.10.0b2\r\n  ```\r\n\r\n- Run the test suite:\r\n  ```shell\r\n  python -m pytest tests\r\n  ```\r\n\r\n\u2026 which will give the following output:\r\n```\r\n[\u2026]\r\n=================================================================== short test summary info ====================================================================\r\nFAILED tests/test_annotated_uuid.py::test_annotated_optional_types - ValueError: 'validated_data' must be provided if 'call_default_factory' is True.\r\nFAILED tests/test_advanced/test_uuid/test_tutorial001.py::test_tutorial - ValueError: 'validated_data' must be provided if 'call_default_factory' is True.\r\nFAILED tests/test_advanced/test_uuid/test_tutorial001_py310.py::test_tutorial - ValueError: 'validated_data' must be provided if 'call_default_factory' is True.\r\nFAILED tests/test_advanced/test_uuid/test_tutorial002.py::test_tutorial - ValueError: 'validated_data' must be provided if 'call_default_factory' is True.\r\nFAILED tests/test_advanced/test_uuid/test_tutorial002_py310.py::test_tutorial - ValueError: 'validated_data' must be provided if 'call_default_factory' is True.\r\n===================================================== 5 failed, 250 passed, 3 skipped, 7 warnings in 9.37s =====================================================\r\n```\r\n", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215/reactions", "total_count": 5, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 5, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1215/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/997", "id": 2384202262, "node_id": "PR_kwDOF8_QEs50FxQL", "number": 997, "title": "\ud83d\udc1b Fix `RuntimeError: dictionary changed size during iteration` in `sqlmodel_update()`", "user": {"login": "BartSchuurmans", "id": 170533083, "node_id": "U_kgDOCiog2w", "avatar_url": "https://avatars.githubusercontent.com/u/170533083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BartSchuurmans", "html_url": "https://github.com/BartSchuurmans", "followers_url": "https://api.github.com/users/BartSchuurmans/followers", "following_url": "https://api.github.com/users/BartSchuurmans/following{/other_user}", "gists_url": "https://api.github.com/users/BartSchuurmans/gists{/gist_id}", "starred_url": "https://api.github.com/users/BartSchuurmans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BartSchuurmans/subscriptions", "organizations_url": "https://api.github.com/users/BartSchuurmans/orgs", "repos_url": "https://api.github.com/users/BartSchuurmans/repos", "events_url": "https://api.github.com/users/BartSchuurmans/events{/privacy}", "received_events_url": "https://api.github.com/users/BartSchuurmans/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-07-01T15:58:56Z", "updated_at": "2025-12-23T16:23:55Z", "closed_at": "2025-12-23T16:23:55Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/997", "html_url": "https://github.com/fastapi/sqlmodel/pull/997", "diff_url": "https://github.com/fastapi/sqlmodel/pull/997.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/997.patch", "merged_at": "2025-12-23T16:23:55Z"}, "body": "Fixes the issue described in https://github.com/tiangolo/sqlmodel/discussions/982", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/997/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/25", "id": 979863543, "node_id": "MDU6SXNzdWU5Nzk4NjM1NDM=", "number": 25, "title": "Improper UUID serialisation dropping leading zeros \u25b6\ufe0f \"ValueError: badly formed hexadecimal UUID string\"", "user": {"login": "andrewbolster", "id": 88642, "node_id": "MDQ6VXNlcjg4NjQy", "avatar_url": "https://avatars.githubusercontent.com/u/88642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewbolster", "html_url": "https://github.com/andrewbolster", "followers_url": "https://api.github.com/users/andrewbolster/followers", "following_url": "https://api.github.com/users/andrewbolster/following{/other_user}", "gists_url": "https://api.github.com/users/andrewbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewbolster/subscriptions", "organizations_url": "https://api.github.com/users/andrewbolster/orgs", "repos_url": "https://api.github.com/users/andrewbolster/repos", "events_url": "https://api.github.com/users/andrewbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewbolster/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-08-26T05:55:25Z", "updated_at": "2022-08-27T22:30:48Z", "closed_at": "2022-08-27T22:28:10Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\r\n\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I used the GitHub search to find a similar issue and didn't find it.\r\n- [X] I searched the SQLModel documentation, with the integrated search.\r\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\r\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\r\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\r\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\r\n\r\n### Commit to Help\r\n\r\n- [X] I commit to help with one of those options \ud83d\udc46\r\n\r\n### Example Code\r\n\r\n```python\r\nimport uuid\r\nfrom typing import Optional\r\n\r\nimport sqlalchemy.exc\r\nfrom sqlmodel import SQLModel, Field\r\nfrom sqlmodel import create_engine, Session, select\r\n\r\n\r\nclass Hero(SQLModel, table=True):\r\n    id: Optional[uuid.UUID] = Field(primary_key=True,\r\n                                    default_factory=uuid.uuid4)\r\n    name: str\r\n    secret_name: str\r\n    age: Optional[int] = None\r\n\r\n    def __str__(self):\r\n        return f'{self.name} (AKA {self.secret_name}) [{self.age if self.age is not None else \"Unknown\"}]'\r\n\r\n\r\nsqlite_file_name = \"database.db\"\r\nsqlite_url = f\"sqlite:///{sqlite_file_name}\"\r\n\r\nengine = create_engine(sqlite_url, echo=True)  # remove echo for prod\r\n\r\n\r\ndef create_db_and_tables():\r\n    try:\r\n        Hero.__table__.drop(engine)\r\n    except sqlalchemy.exc.OperationalError:  # table doesn't exist yet\r\n        pass\r\n    SQLModel.metadata.create_all(engine)\r\n\r\n\r\ndef create_heroes():\r\n    heros = [\r\n        Hero(name=\"Deadpond\", secret_name=\"Dive Wilson\"),\r\n        Hero(name=\"Spider-Boy\", secret_name=\"Pedro Parqueador\"),\r\n        Hero(name=\"Rusty-Man\", secret_name=\"Tommy Sharp\", age=48),\r\n        Hero(name=\"Tarantula\", secret_name=\"Natalia Roman-on\", age=32),\r\n        Hero(name=\"Black Lion\", secret_name=\"Trevor Challa\", age=35),\r\n        Hero(name=\"Dr. Weird\", secret_name=\"Steve Weird\", age=36),\r\n        Hero(name=\"Captain North America\", secret_name=\"Esteban Rogelios\", age=93),\r\n    ]\r\n\r\n    with Session(engine) as session:\r\n        for hero in heros:\r\n            session.add(hero)\r\n        session.commit()\r\n\r\n\r\ndef select_heroes():\r\n    with Session(engine) as session:\r\n        for hero in session.exec(select(Hero)):\r\n            print(hero.id)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    while True:\r\n        try:\r\n            create_db_and_tables()\r\n            create_heroes()\r\n            select_heroes()\r\n        except ValueError:\r\n            raise\r\n```\r\n\r\n#### Cleansed Traceback\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \u201c/\u2026/sqlmodel_tutorial/minimal_example.py\", line 89, in <module>\r\n    select_heroes()\r\n  File \u201c/\u2026/sqlmodel_tutorial/minimal_example.py\", line 80, in select_heroes\r\n    for hero in session.exec(select(Hero)):\r\n  File \"/.../lib/python3.8/site-packages/sqlalchemy/engine/result.py\", line 381, in iterrows\r\n    for row in self._fetchiter_impl():\r\n  File \"/.../lib/python3.8/site-packages/sqlalchemy/orm/loading.py\", line 147, in chunks\r\n    fetch = cursor._raw_all_rows()\r\n  File \"/.../lib/python3.8/site-packages/sqlalchemy/engine/result.py\", line 392, in _raw_all_rows\r\n    return [make_row(row) for row in rows]\r\n  File \"/.../lib/python3.8/site-packages/sqlalchemy/engine/result.py\", line 392, in <listcomp>\r\n    return [make_row(row) for row in rows]\r\n  File \"/.../lib/python3.8/site-packages/sqlalchemy/sql/type_api.py\", line 1430, in process\r\n    return process_value(value, dialect)\r\n  File \"/.../lib/python3.8/site-packages/sqlmodel/sql/sqltypes.py\", line 61, in process_result_value\r\n    value = uuid.UUID(value)\r\n  File \u201c/\u2026/lib/python3.8/uuid.py\", line 171, in __init__\r\n    raise ValueError('badly formed hexadecimal UUID string')\r\nValueError: badly formed hexadecimal UUID string\r\n```\r\n\r\n\r\n### Description\r\n\r\nRunning through the tutorial up until around [this point](https://sqlmodel.tiangolo.com/tutorial/select/), I tried swapping out the `int` id key for a `UUID` key.\r\n\r\nThis works _except_ whenever the `uuid.uuid4` default factory creates a UUID with a hexstring that starts with a zero. \r\n\r\nIt appears that [here](https://github.com/tiangolo/sqlmodel/blob/02da85c9ec39b0ebb7ff91de3045e0aea28dc998/sqlmodel/sql/sqltypes.py#L52) in `sqltypes.py` that, rather than using [`UUID().hex`](https://docs.python.org/3/library/uuid.html#uuid.UUID.hex), `sqltypes.py` carries on sqlalchemy's [integer stringification apprach](https://docs.sqlalchemy.org/en/14/core/custom_types.html?highlight=guid#backend-agnostic-guid-type), however, doesn't include any padding declaration.\r\n\r\nIMO there are two options; \r\n1. faithfully fix the replication of SQLAlchemy's `UUID` \u25b6\ufe0f `int` \u25b6\ufe0f `str` approach with the padding fixed (`f\"{v.int:032x}\"`)\r\n2. switch to using the stdlib `UUID.hex` implementation for serialisation\r\n\r\nPersonally I'm a fan of the latter so will spin up a PR \r\n\r\n### Operating System\r\n\r\nmacOS\r\n\r\n### Operating System Details\r\n\r\n_No response_\r\n\r\n### SQLModel Version\r\n\r\n0.0.4\r\n\r\n### Python Version\r\n\r\n3.8.8\r\n\r\n### Additional Context\r\n\r\n_No response_", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25/reactions", "total_count": 22, "+1": 22, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/25/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1607", "id": 3519137333, "node_id": "PR_kwDOF8_QEs6t8bGl", "number": 1607, "title": "\ud83d\udc1b Fix support for `Annotated` fields with Pydantic 2.12+", "user": {"login": "vimota", "id": 865701, "node_id": "MDQ6VXNlcjg2NTcwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/865701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vimota", "html_url": "https://github.com/vimota", "followers_url": "https://api.github.com/users/vimota/followers", "following_url": "https://api.github.com/users/vimota/following{/other_user}", "gists_url": "https://api.github.com/users/vimota/gists{/gist_id}", "starred_url": "https://api.github.com/users/vimota/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vimota/subscriptions", "organizations_url": "https://api.github.com/users/vimota/orgs", "repos_url": "https://api.github.com/users/vimota/repos", "events_url": "https://api.github.com/users/vimota/events{/privacy}", "received_events_url": "https://api.github.com/users/vimota/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 5, "created_at": "2025-10-15T18:31:33Z", "updated_at": "2026-02-01T18:14:56Z", "closed_at": "2026-02-01T18:14:56Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1607", "html_url": "https://github.com/fastapi/sqlmodel/pull/1607", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1607.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1607.patch", "merged_at": "2026-02-01T18:14:56Z"}, "body": "Fixes https://github.com/fastapi/sqlmodel/discussions/1597 ", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607/reactions", "total_count": 4, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 4, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1607/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1602", "id": 3500795329, "node_id": "PR_kwDOF8_QEs6s-3Dk", "number": 1602, "title": "\ud83d\udc1b Fix composite primary with AfterValidator/Annotated", "user": {"login": "patrick91", "id": 667029, "node_id": "MDQ6VXNlcjY2NzAyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/667029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patrick91", "html_url": "https://github.com/patrick91", "followers_url": "https://api.github.com/users/patrick91/followers", "following_url": "https://api.github.com/users/patrick91/following{/other_user}", "gists_url": "https://api.github.com/users/patrick91/gists{/gist_id}", "starred_url": "https://api.github.com/users/patrick91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patrick91/subscriptions", "organizations_url": "https://api.github.com/users/patrick91/orgs", "repos_url": "https://api.github.com/users/patrick91/repos", "events_url": "https://api.github.com/users/patrick91/events{/privacy}", "received_events_url": "https://api.github.com/users/patrick91/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-10-09T22:27:18Z", "updated_at": "2025-10-30T21:32:04Z", "closed_at": "2025-10-30T21:32:04Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1602", "html_url": "https://github.com/fastapi/sqlmodel/pull/1602", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1602.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1602.patch", "merged_at": null}, "body": "The title is currently a lie :D but there's a test for what's broken, and I think it's because the FieldInfo we get in `get_column_from_field` is the Pydantic one and not the SQLModel one\r\n\r\nEDIT: I guess this is not just about primary keys, but it's about any custom attribute used in SQLModel's `Field` :)", "closed_by": {"login": "svlandeg", "id": 8796347, "node_id": "MDQ6VXNlcjg3OTYzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8796347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svlandeg", "html_url": "https://github.com/svlandeg", "followers_url": "https://api.github.com/users/svlandeg/followers", "following_url": "https://api.github.com/users/svlandeg/following{/other_user}", "gists_url": "https://api.github.com/users/svlandeg/gists{/gist_id}", "starred_url": "https://api.github.com/users/svlandeg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svlandeg/subscriptions", "organizations_url": "https://api.github.com/users/svlandeg/orgs", "repos_url": "https://api.github.com/users/svlandeg/repos", "events_url": "https://api.github.com/users/svlandeg/events{/privacy}", "received_events_url": "https://api.github.com/users/svlandeg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1602/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1595", "id": 3494068307, "node_id": "PR_kwDOF8_QEs6soRW5", "number": 1595, "title": "\ud83d\udc1b Fix attribute handling in `model_dump` for compatibility with the latest Pydantic versions", "user": {"login": "spazm", "id": 92896, "node_id": "MDQ6VXNlcjkyODk2", "avatar_url": "https://avatars.githubusercontent.com/u/92896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spazm", "html_url": "https://github.com/spazm", "followers_url": "https://api.github.com/users/spazm/followers", "following_url": "https://api.github.com/users/spazm/following{/other_user}", "gists_url": "https://api.github.com/users/spazm/gists{/gist_id}", "starred_url": "https://api.github.com/users/spazm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spazm/subscriptions", "organizations_url": "https://api.github.com/users/spazm/orgs", "repos_url": "https://api.github.com/users/spazm/repos", "events_url": "https://api.github.com/users/spazm/events{/privacy}", "received_events_url": "https://api.github.com/users/spazm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-10-08T06:36:10Z", "updated_at": "2025-10-08T10:33:48Z", "closed_at": "2025-10-08T10:33:47Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1595", "html_url": "https://github.com/fastapi/sqlmodel/pull/1595", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1595.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1595.patch", "merged_at": "2025-10-08T10:33:47Z"}, "body": "+ \u270f\ufe0f   Fix reversion in model_dump attribute handling for pydantic v2.7 .. v2.10\r\n    + The `else` block added to fix linting errors (4b5ad42) for #1340 was obliterating the `'context'` and `'serialize_as_any'` attributes for versions >= 2.7 and < 2.11.\r\n    + Fix by initializing `extra_kwargs` and then setting on a per-version level\r\n+  \ud83d\udc9a Fix linting from overriding `@final` FieldInfo\r\n+  \ud83d\udc9a Add `exclude_computed_fields` from pydantic 2.12\r\n    + match the upstream interface to avoid mypy linting warning.\r\n    + pydantic added exclude_computed_fields in pydantic/pydantic-core#1780\r\n", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1595/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1379", "id": 3063724901, "node_id": "PR_kwDOF8_QEs6WMhKX", "number": 1379, "title": "\ud83d\udc1b Fix Pydantic `alias` bug", "user": {"login": "STocidlowski", "id": 100541507, "node_id": "U_kgDOBf4kQw", "avatar_url": "https://avatars.githubusercontent.com/u/100541507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/STocidlowski", "html_url": "https://github.com/STocidlowski", "followers_url": "https://api.github.com/users/STocidlowski/followers", "following_url": "https://api.github.com/users/STocidlowski/following{/other_user}", "gists_url": "https://api.github.com/users/STocidlowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/STocidlowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/STocidlowski/subscriptions", "organizations_url": "https://api.github.com/users/STocidlowski/orgs", "repos_url": "https://api.github.com/users/STocidlowski/repos", "events_url": "https://api.github.com/users/STocidlowski/events{/privacy}", "received_events_url": "https://api.github.com/users/STocidlowski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 5, "created_at": "2025-05-14T16:49:59Z", "updated_at": "2025-10-21T14:52:47Z", "closed_at": "2025-10-21T14:52:38Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1379", "html_url": "https://github.com/fastapi/sqlmodel/pull/1379", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1379.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1379.patch", "merged_at": null}, "body": "#### bug\r\n\r\n/This workaround fixes Pydantic serialization/deserialization while not modifying the internal alias logic. I cannot figure out why alias is not being passed through anymore.\r\n\r\nFor example, I was needing to add schema_extra with these key values in order to read/write data from a Json \r\n\r\n- [ ] with different field names. I had similar issues to issue #290 \r\n\r\nhttps://docs.pydantic.dev/latest/concepts/fields/#field-aliases\r\nhttps://github.com/fastapi/sqlmodel/issues/290\r\n\r\nThank you for your consideration.", "closed_by": {"login": "svlandeg", "id": 8796347, "node_id": "MDQ6VXNlcjg3OTYzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8796347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svlandeg", "html_url": "https://github.com/svlandeg", "followers_url": "https://api.github.com/users/svlandeg/followers", "following_url": "https://api.github.com/users/svlandeg/following{/other_user}", "gists_url": "https://api.github.com/users/svlandeg/gists{/gist_id}", "starred_url": "https://api.github.com/users/svlandeg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svlandeg/subscriptions", "organizations_url": "https://api.github.com/users/svlandeg/orgs", "repos_url": "https://api.github.com/users/svlandeg/repos", "events_url": "https://api.github.com/users/svlandeg/events{/privacy}", "received_events_url": "https://api.github.com/users/svlandeg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1379/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/443", "id": 1367691836, "node_id": "PR_kwDOF8_QEs4-q_jy", "number": 443, "title": "\ud83d\udc1b Fix allowing using a `ForeignKey` directly, remove repeated column construction from `SQLModelMetaclass.__init__` and upgrade minimum SQLAlchemy to `>=1.4.36`", "user": {"login": "daniil-berg", "id": 60156134, "node_id": "MDQ6VXNlcjYwMTU2MTM0", "avatar_url": "https://avatars.githubusercontent.com/u/60156134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniil-berg", "html_url": "https://github.com/daniil-berg", "followers_url": "https://api.github.com/users/daniil-berg/followers", "following_url": "https://api.github.com/users/daniil-berg/following{/other_user}", "gists_url": "https://api.github.com/users/daniil-berg/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniil-berg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniil-berg/subscriptions", "organizations_url": "https://api.github.com/users/daniil-berg/orgs", "repos_url": "https://api.github.com/users/daniil-berg/repos", "events_url": "https://api.github.com/users/daniil-berg/events{/privacy}", "received_events_url": "https://api.github.com/users/daniil-berg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-09T11:27:18Z", "updated_at": "2023-10-23T13:59:07Z", "closed_at": "2023-10-23T13:59:06Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/443", "html_url": "https://github.com/fastapi/sqlmodel/pull/443", "diff_url": "https://github.com/fastapi/sqlmodel/pull/443.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/443.patch", "merged_at": "2023-10-23T13:59:06Z"}, "body": "## Summary\r\n\r\nThere was a bug in the `SQLModelMetaclass` whereby the SQLAlchemy `Column` objects were constructed _twice_ for each field defined on a table model: First in the meta class' `__new__` method and then again in its `__init__` method.\r\n\r\nWith these changes the `get_column_from_field` function is called only _once_ for each field, namely in `SQLModelMetaclass.__new__`.\r\n\r\n## Example\r\n\r\nConstruct a table model with a foreign key explicitly constructed via the SQLAlchemy `ForeignKey` class:\r\n```python\r\nfrom sqlmodel import Field, SQLModel, create_engine\r\nfrom sqlalchemy.sql.schema import ForeignKey\r\n\r\n\r\nclass User(SQLModel, table=True):\r\n    id: int = Field(primary_key=True)\r\n\r\n\r\nclass Post(SQLModel, table=True):\r\n    id: int = Field(primary_key=True)\r\n    user_id: int = Field(\r\n        sa_column_args=(ForeignKey(\"user.id\", ondelete=\"CASCADE\"),)\r\n    )\r\n```\r\n\r\nWithout the proposed changes, even just running these class definitions causes an error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/daniil/coding/sqlmodel/experiments/__init__.py\", line 12, in <module>\r\n    class Post(SQLModel, table=True):\r\n  File \"/home/daniil/coding/sqlmodel/sqlmodel/main.py\", line 329, in __init__\r\n    dict_used[field_name] = get_column_from_field(field_value)\r\n  File \"/home/daniil/coding/sqlmodel/sqlmodel/main.py\", line 457, in get_column_from_field\r\n    return Column(sa_type, *args, **kwargs)  # type: ignore\r\n  File \"/home/daniil/.cache/pypoetry/virtualenvs/sqlmodel-TV15XYpK-py3.10/lib/python3.10/site-packages/sqlalchemy/sql/schema.py\", line 1765, in __init__\r\n    self._init_items(*args)\r\n  File \"/home/daniil/.cache/pypoetry/virtualenvs/sqlmodel-TV15XYpK-py3.10/lib/python3.10/site-packages/sqlalchemy/sql/schema.py\", line 144, in _init_items\r\n    spwd(self, **kw)\r\n  File \"/home/daniil/.cache/pypoetry/virtualenvs/sqlmodel-TV15XYpK-py3.10/lib/python3.10/site-packages/sqlalchemy/sql/base.py\", line 1047, in _set_parent_with_dispatch\r\n    self._set_parent(parent, **kw)\r\n  File \"/home/daniil/.cache/pypoetry/virtualenvs/sqlmodel-TV15XYpK-py3.10/lib/python3.10/site-packages/sqlalchemy/sql/schema.py\", line 2559, in _set_parent\r\n    raise exc.InvalidRequestError(\r\nsqlalchemy.exc.InvalidRequestError: This ForeignKey already has a parent !\r\n```\r\n\r\nThis is fixed with this PR.\r\n\r\nAdd the following to the example:\r\n```python\r\nsqlite_url = \"sqlite:///:memory:\"\r\nengine = create_engine(sqlite_url, echo=True)\r\nSQLModel.metadata.create_all(engine)\r\n```\r\n\r\nThere is no more error and the SQL statements are as expected:\r\n```sql\r\nCREATE TABLE user (\r\n\tid INTEGER NOT NULL, \r\n\tPRIMARY KEY (id)\r\n)\r\n\r\nCREATE TABLE post (\r\n\tid INTEGER NOT NULL, \r\n\tuser_id INTEGER NOT NULL, \r\n\tPRIMARY KEY (id), \r\n\tFOREIGN KEY(user_id) REFERENCES user (id) ON DELETE CASCADE\r\n)\r\n```\r\n\r\n## PS\r\n\r\nThe codecov bot is weird... I really don't see how coverage could possibly have **decreased**. The statement below is also inconsistent with the report, if you click on it. Oh well.", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/443/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/442", "id": 1367043017, "node_id": "PR_kwDOF8_QEs4-o1hX", "number": 442, "title": ":bug: Fix enum type checks ordering in `get_sqlalchemy_type`", "user": {"login": "pierrecdn", "id": 4225738, "node_id": "MDQ6VXNlcjQyMjU3Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4225738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierrecdn", "html_url": "https://github.com/pierrecdn", "followers_url": "https://api.github.com/users/pierrecdn/followers", "following_url": "https://api.github.com/users/pierrecdn/following{/other_user}", "gists_url": "https://api.github.com/users/pierrecdn/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierrecdn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierrecdn/subscriptions", "organizations_url": "https://api.github.com/users/pierrecdn/orgs", "repos_url": "https://api.github.com/users/pierrecdn/repos", "events_url": "https://api.github.com/users/pierrecdn/events{/privacy}", "received_events_url": "https://api.github.com/users/pierrecdn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4763891089, "node_id": "LA_kwDOF8_QEs8AAAABG_M1kQ", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/investigate", "name": "investigate", "color": "5319E7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-08T22:11:49Z", "updated_at": "2023-10-23T09:23:28Z", "closed_at": "2023-10-23T09:23:28Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/442", "html_url": "https://github.com/fastapi/sqlmodel/pull/442", "diff_url": "https://github.com/fastapi/sqlmodel/pull/442.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/442.patch", "merged_at": null}, "body": "When enum subclassing/mix-in[1] is used, especially to ensure compatibility and produce correct OpenAPI specifications with FastAPI[2], SQLModel on its side doesn't map to the correct SQLAlchemy type.\r\n\r\ne.g.:\r\n* `class Foo(Enum)` will work but won't allow a proper OpenAPI spec. to be generated.\r\n* `class Foo(str, Enum)` will fix the previous situation, but prevents SQLModel to read and map the object from the DB (due to validation errors).\r\n\r\nChanging ordering of checks to ensure that Enum subclasses are tested first.\r\n\r\n[1] https://docs.python.org/3/library/enum.html#restricted-enum-subclassing\r\n[2] https://fastapi.tiangolo.com/sq/tutorial/path-params/#create-an-enum-class", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/442/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/439", "id": 1363146303, "node_id": "PR_kwDOF8_QEs4-brjb", "number": 439, "title": "\u2b06 Raise SQLAlchemy version requirement to at least `1.4.29` (related to #434)", "user": {"login": "daniil-berg", "id": 60156134, "node_id": "MDQ6VXNlcjYwMTU2MTM0", "avatar_url": "https://avatars.githubusercontent.com/u/60156134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniil-berg", "html_url": "https://github.com/daniil-berg", "followers_url": "https://api.github.com/users/daniil-berg/followers", "following_url": "https://api.github.com/users/daniil-berg/following{/other_user}", "gists_url": "https://api.github.com/users/daniil-berg/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniil-berg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniil-berg/subscriptions", "organizations_url": "https://api.github.com/users/daniil-berg/orgs", "repos_url": "https://api.github.com/users/daniil-berg/repos", "events_url": "https://api.github.com/users/daniil-berg/events{/privacy}", "received_events_url": "https://api.github.com/users/daniil-berg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-06T11:36:03Z", "updated_at": "2023-10-23T09:40:25Z", "closed_at": "2023-10-23T09:39:55Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/439", "html_url": "https://github.com/fastapi/sqlmodel/pull/439", "diff_url": "https://github.com/fastapi/sqlmodel/pull/439.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/439.patch", "merged_at": "2023-10-23T09:39:55Z"}, "body": "As @JoshGooch pointed out in #434, SQLAlchemy `Session.get` only supports the `execution_options` since [version `1.4.29`](https://github.com/sqlalchemy/sqlalchemy/releases/tag/rel_1_4_29). Support for that parameter was added to SQLModel via #302, but the version requirement is still at `>=1.4.17`.", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/439/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255/events", "html_url": "https://github.com/fastapi/sqlmodel/pull/1255", "id": 2755466593, "node_id": "PR_kwDOF8_QEs6GDT-f", "number": 1255, "title": "\ud83d\udc1b Fix Pydantic version check for version 2.10.x onwards", "user": {"login": "asiunov", "id": 7114704, "node_id": "MDQ6VXNlcjcxMTQ3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7114704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asiunov", "html_url": "https://github.com/asiunov", "followers_url": "https://api.github.com/users/asiunov/followers", "following_url": "https://api.github.com/users/asiunov/following{/other_user}", "gists_url": "https://api.github.com/users/asiunov/gists{/gist_id}", "starred_url": "https://api.github.com/users/asiunov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asiunov/subscriptions", "organizations_url": "https://api.github.com/users/asiunov/orgs", "repos_url": "https://api.github.com/users/asiunov/repos", "events_url": "https://api.github.com/users/asiunov/events{/privacy}", "received_events_url": "https://api.github.com/users/asiunov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-23T08:06:44Z", "updated_at": "2025-03-09T03:08:44Z", "closed_at": "2025-02-28T14:01:14Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastapi/sqlmodel/pulls/1255", "html_url": "https://github.com/fastapi/sqlmodel/pull/1255", "diff_url": "https://github.com/fastapi/sqlmodel/pull/1255.diff", "patch_url": "https://github.com/fastapi/sqlmodel/pull/1255.patch", "merged_at": "2025-02-28T14:01:13Z"}, "body": "The pydantic version check works incorrectly since the release of pydantic 2.10.* (`\"2.10.0\" < \"2.7.0\"`)", "closed_by": {"login": "tiangolo", "id": 1326112, "node_id": "MDQ6VXNlcjEzMjYxMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1326112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiangolo", "html_url": "https://github.com/tiangolo", "followers_url": "https://api.github.com/users/tiangolo/followers", "following_url": "https://api.github.com/users/tiangolo/following{/other_user}", "gists_url": "https://api.github.com/users/tiangolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiangolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiangolo/subscriptions", "organizations_url": "https://api.github.com/users/tiangolo/orgs", "repos_url": "https://api.github.com/users/tiangolo/repos", "events_url": "https://api.github.com/users/tiangolo/events{/privacy}", "received_events_url": "https://api.github.com/users/tiangolo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/1255/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230", "repository_url": "https://api.github.com/repos/fastapi/sqlmodel", "labels_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230/labels{/name}", "comments_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230/comments", "events_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230/events", "html_url": "https://github.com/fastapi/sqlmodel/issues/230", "id": 1115404666, "node_id": "I_kwDOF8_QEs5Ce7l6", "number": 230, "title": "How to validate JSON null values for optional fields?", "user": {"login": "byrman", "id": 1039433, "node_id": "MDQ6VXNlcjEwMzk0MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1039433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byrman", "html_url": "https://github.com/byrman", "followers_url": "https://api.github.com/users/byrman/followers", "following_url": "https://api.github.com/users/byrman/following{/other_user}", "gists_url": "https://api.github.com/users/byrman/gists{/gist_id}", "starred_url": "https://api.github.com/users/byrman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byrman/subscriptions", "organizations_url": "https://api.github.com/users/byrman/orgs", "repos_url": "https://api.github.com/users/byrman/repos", "events_url": "https://api.github.com/users/byrman/events{/privacy}", "received_events_url": "https://api.github.com/users/byrman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3290690926, "node_id": "MDU6TGFiZWwzMjkwNjkwOTI2", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3637781886, "node_id": "LA_kwDOF8_QEs7Y1CV-", "url": "https://api.github.com/repos/fastapi/sqlmodel/labels/answered", "name": "answered", "color": "f6f6f6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-26T19:28:06Z", "updated_at": "2022-09-07T00:11:22Z", "closed_at": "2022-09-07T00:11:22Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### First Check\r\n\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I used the GitHub search to find a similar issue and didn't find it.\r\n- [X] I searched the SQLModel documentation, with the integrated search.\r\n- [X] I already searched in Google \"How to X in SQLModel\" and didn't find any information.\r\n- [X] I already read and followed all the tutorial in the docs and didn't find an answer.\r\n- [X] I already checked if it is not related to SQLModel but to [Pydantic](https://github.com/samuelcolvin/pydantic).\r\n- [X] I already checked if it is not related to SQLModel but to [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy).\r\n\r\n### Commit to Help\r\n\r\n- [X] I commit to help with one of those options \ud83d\udc46\r\n\r\n### Example Code\r\n\r\n```python\r\nfrom typing import Optional\r\n\r\nfrom fastapi import FastAPI\r\nfrom pydantic import BaseModel, validator\r\nfrom sqlmodel import SQLModel\r\n\r\n\r\n# NB: Inheriting from BaseModel!\r\nclass HeroUpdateA(BaseModel):\r\n    name: Optional[str]\r\n    secret_name: Optional[str]\r\n    age: Optional[int]\r\n\r\n    @validator(\"name\", \"secret_name\", \"age\")\r\n    def reject_none(cls, v):\r\n        assert v is not None\r\n        return v\r\n\r\n\r\n# NB: Inheriting from SQLModel!\r\nclass HeroUpdateB(SQLModel):\r\n    name: Optional[str]\r\n    secret_name: Optional[str]\r\n    age: Optional[int]\r\n\r\n    @validator(\"name\", \"secret_name\", \"age\")\r\n    def reject_none(cls, v):\r\n        assert v is not None\r\n        return v\r\n\r\n\r\napp = FastAPI()\r\n\r\n\r\n# A PATCH request with payload {\"age\": 25} succeeds.\r\n# name and secret_name are NOT validated.\r\n@app.patch(\"/heroes-a/{id}\")\r\nasync def patch_hero_a(obj: HeroUpdateA):\r\n    pass\r\n\r\n\r\n# A PATCH request with payload {\"age\": 25} fails.\r\n# name and secret_name are validated.\r\n@app.patch(\"/heroes-b/{id}\")\r\nasync def patch_hero_b(obj: HeroUpdateB):\r\n    pass\r\n```\r\n\r\n\r\n### Description\r\n\r\nSuppose we have a `Hero(SQLModel, table=True)` model with no optional fields (so `name`, `secret_name`, and `age` are not nullable in the underlying database). To properly support PATCH, a HeroUpdate model is needed with all fields optional, because we don't know in advance what field(s) a user is going to supply.\r\n\r\nSince the fields are not nullable, we want a validator to reject _explicit_ JSON null values, e.g. a payload like this: `{\"name\": null, \"age\": 25}`, otherwise our user might hit an Internal Server Error (HTTP 500) upon saving a hero to the database. These links propose a clever solution to this problem by writing a validator:\r\n\r\n- https://github.com/samuelcolvin/pydantic/issues/1223\r\n- https://github.com/tiangolo/fastapi/issues/3776\r\n\r\nThis solution works, because, _by default_, validators aren't called on arguments that are not provided. So a payload like `{\"age\": 25}` is fine and will not trigger validation of `name` and `secret_name`, even though these fields have `None` as a default.\r\n\r\nTo my surprise, however, the proposed solution does not work when inheriting from SQLModel, only when inheriting from BaseModel. In case of SQLModel, validation always fires, even when a field is not explicitly provided. Since SQLModel is powered by Pydantic, I expected similar behaviour.\r\n\r\nIf not a bug, what would be an elegant way to accomplish validation like this using SQLModel?\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Operating System Details\r\n\r\nI'm using this Docker image: tiangolo/uvicorn-gunicorn-fastapi:python3.8-slim\r\n\r\n### SQLModel Version\r\n\r\n0.0.6\r\n\r\n### Python Version\r\n\r\n3.8.12\r\n\r\n### Additional Context\r\n\r\n_No response_", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastapi/sqlmodel/issues/230/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}]}