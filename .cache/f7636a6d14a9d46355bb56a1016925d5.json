{"d": [{"url": "https://api.github.com/repos/lovell/sharp/issues/1986", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/1986/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/1986/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/1986/events", "html_url": "https://github.com/lovell/sharp/issues/1986", "id": 528763953, "node_id": "MDU6SXNzdWU1Mjg3NjM5NTM=", "number": 1986, "title": "Segfaults when under pressure?", "user": {"login": "pvdz", "id": 209817, "node_id": "MDQ6VXNlcjIwOTgxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/209817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdz", "html_url": "https://github.com/pvdz", "followers_url": "https://api.github.com/users/pvdz/followers", "following_url": "https://api.github.com/users/pvdz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdz/subscriptions", "organizations_url": "https://api.github.com/users/pvdz/orgs", "repos_url": "https://api.github.com/users/pvdz/repos", "events_url": "https://api.github.com/users/pvdz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/54", "html_url": "https://github.com/lovell/sharp/milestone/54", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/54/labels", "id": 4735615, "node_id": "MDk6TWlsZXN0b25lNDczNTYxNQ==", "number": 54, "title": "v0.25.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-10-09T09:13:51Z", "updated_at": "2020-03-09T12:01:18Z", "due_on": null, "closed_at": "2020-03-07T14:52:59Z"}, "comments": 58, "created_at": "2019-11-26T14:32:05Z", "updated_at": "2020-03-20T16:05:04Z", "closed_at": "2020-03-07T14:52:43Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm trying to debug a segfault while using Gatsby that is potentially in the realm of using sharp.\r\n\r\n(I'm a performance eng for Gatsby)\r\n\r\nIt seems that sites with lots of images can trigger a segfault and we're not sure when exactly this happens.\r\n\r\nI get this fairly frequently with a simple site that just has many images (~1500 for my machine) on the example site posted (in http://github.com/gatsbyjs/gatsby/pull/6291) as a repro; \r\n\r\nClone https://github.com/jp887/gatsby-issue6291-repro \r\nUpdate package.json to set all gatsby deps to *\r\nClear the npm cache (`~/.npm`)\r\nClear node_modules, in case that's relevant\r\n`npm install`\r\n`yarn gen-images 1500` (It triggers with 1500 images for me, this will try to process 9000 images in total)\r\n`gatsby build`\r\n\r\nFor me, often it segfaults roughly between 25% and 75%.\r\n\r\nI'm on ubuntu (xfce) 19.10\r\nNode v8.16.2 (through nvm)\r\n\r\nI went through some of the older Gatsby issues relating to this bug. I am able to reproduce it with `.simd(true)` and `.simd(false)`, and same for `.cache(true)` and `.cache(false)`.\r\n\r\nReducing the available memory to node does not seem to make a difference (I set it to 500mb, half of the default, but saw no increase in crash rate). Was also able to repro it running single core.\r\n\r\nPlease let me know how I can help :)", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/1986/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/1986/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/1651", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/1651/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/1651/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/1651/events", "html_url": "https://github.com/lovell/sharp/issues/1651", "id": 430415893, "node_id": "MDU6SXNzdWU0MzA0MTU4OTM=", "number": 1651, "title": "ARM64: flatten/trim operations produce incorrect output from 16-bit RGBA input", "user": {"login": "ossdev07", "id": 39188636, "node_id": "MDQ6VXNlcjM5MTg4NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/39188636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ossdev07", "html_url": "https://github.com/ossdev07", "followers_url": "https://api.github.com/users/ossdev07/followers", "following_url": "https://api.github.com/users/ossdev07/following{/other_user}", "gists_url": "https://api.github.com/users/ossdev07/gists{/gist_id}", "starred_url": "https://api.github.com/users/ossdev07/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ossdev07/subscriptions", "organizations_url": "https://api.github.com/users/ossdev07/orgs", "repos_url": "https://api.github.com/users/ossdev07/repos", "events_url": "https://api.github.com/users/ossdev07/events{/privacy}", "received_events_url": "https://api.github.com/users/ossdev07/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/52", "html_url": "https://github.com/lovell/sharp/milestone/52", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/52/labels", "id": 4471972, "node_id": "MDk6TWlsZXN0b25lNDQ3MTk3Mg==", "number": 52, "title": "v0.24.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-07-08T07:27:12Z", "updated_at": "2020-01-17T15:11:00Z", "due_on": null, "closed_at": "2020-01-17T15:11:00Z"}, "comments": 47, "created_at": "2019-04-08T12:12:52Z", "updated_at": "2020-01-16T20:38:48Z", "closed_at": "2020-01-16T20:38:48Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "uname -a\r\nLinux c5475310be72 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:33:57 UTC 2017 aarch64 aarch64 aarch64 GNU/Linux\r\n\r\nFacing below issues while testing sharp package test cases in arm64 platform.\r\n\r\n**npm test output:**\r\n1) Alpha transparency\r\n       Flatten 16-bit PNG with transparency to orange:\r\n     Uncaught Error: Expected maximum absolute distance of 25, actual 92.25032043457031\r\n      at Object.assertMaxColourDistance (test/fixtures/index.js:191:13)\r\n      at /pruthvi/sharp/test/unit/alpha.js:59:18\r\n\r\n  2) Trim borders\r\n       16-bit PNG with alpha channel:\r\n\r\n      Uncaught AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:\r\n+ expected - actual\r\n\r\n- -2\r\n+ -4\r\n      + expected - actual\r\n\r\n      --2\r\n      +-4\r\n\r\n      at /pruthvi/sharp/test/unit/trim.js:55:16\r\n\r\nPlease guide me on solving these issues.\r\nThanks in advance.", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/1651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/1651/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/121", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/121/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/121/events", "html_url": "https://github.com/lovell/sharp/issues/121", "id": 49204335, "node_id": "MDU6SXNzdWU0OTIwNDMzNQ==", "number": 121, "title": "Loss of control over sharpening due to oversharpened interpolation results", "user": {"login": "chanon", "id": 357737, "node_id": "MDQ6VXNlcjM1NzczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/357737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chanon", "html_url": "https://github.com/chanon", "followers_url": "https://api.github.com/users/chanon/followers", "following_url": "https://api.github.com/users/chanon/following{/other_user}", "gists_url": "https://api.github.com/users/chanon/gists{/gist_id}", "starred_url": "https://api.github.com/users/chanon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chanon/subscriptions", "organizations_url": "https://api.github.com/users/chanon/orgs", "repos_url": "https://api.github.com/users/chanon/repos", "events_url": "https://api.github.com/users/chanon/events{/privacy}", "received_events_url": "https://api.github.com/users/chanon/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 43, "created_at": "2014-11-18T10:27:05Z", "updated_at": "2014-11-26T15:46:59Z", "closed_at": "2014-11-26T15:46:53Z", "assignee": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "This might not be a big problem for others, it is just an observation, but it does affect image quality results.\n\nAs explained in #120 I tried comparing the image quality results of 0.6.2 and 0.8.0 side-by-side for various interpolation/quality settings.\n\nWhat I found was, for shrinking images, the sharpness of bicubic, lbb and nohalo improved noticeably (likely due to  #75 shrink less, affine more). However most of the results were almost or were already 'oversharpened' (without having used sharpen() ). And using sharpen() to sharpen further would result in very pronounced oversharpening / white outlines.\n\nIn 0.6.2 I was using primarily the lbb method which was a good compromise between bicubic and nohalo - it resulted in noticably better quality than bicubic while not being as slow as nohalo. And with a sharpen() added, the results were just about right and not oversharpened. (In my app I have an option for users to 'sharpen' their image or not so users can control the output.)\n\nHowever with 0.8.0, the interpolation output of bicubic, lbb and nohalo are mostly exactly the same (no difference I could see at all between them in my 8 test images) and all with the aforementioned almost oversharpened look (some images had white outlines already).\n\nSo the result is that in 0.8.0, i feel there is less control over the range of sharpening of the resulting images when using bicubic/lbb/nohalo and a tendency for already oversharpened images. \n\nAgain, this might be nitpicking and I very much appreciate the work that goes into sharp. Just wanted to add my observations. At this point, I might stick with 0.6.2 just for the image quality.\n\nI would post the test image outputs, but since I grabbed them from 500px, I can't.\n\nThis image:\nhttps://500px.com/photo/90071415/la-armada-invencible-by-jorge-gonzalez-herrera\nprovides a good example of the oversharpening that can result from just using the bicubic/lbb/nohalo interpolations. \n\nI grabbed the 2048px width source image and used the script at:\nhttps://github.com/lovell/sharp/issues/120#issuecomment-63451668\nwith sharp 0.6.2 and 0.8.0 to compare the results especially at 1000px width output.\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/121/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/1522", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/1522/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/1522/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/1522/events", "html_url": "https://github.com/lovell/sharp/issues/1522", "id": 393901022, "node_id": "MDU6SXNzdWUzOTM5MDEwMjI=", "number": 1522, "title": "The specified module could not be found, with electron v4.0.0.", "user": {"login": "iacovlev-pavel", "id": 1787775, "node_id": "MDQ6VXNlcjE3ODc3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1787775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iacovlev-pavel", "html_url": "https://github.com/iacovlev-pavel", "followers_url": "https://api.github.com/users/iacovlev-pavel/followers", "following_url": "https://api.github.com/users/iacovlev-pavel/following{/other_user}", "gists_url": "https://api.github.com/users/iacovlev-pavel/gists{/gist_id}", "starred_url": "https://api.github.com/users/iacovlev-pavel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iacovlev-pavel/subscriptions", "organizations_url": "https://api.github.com/users/iacovlev-pavel/orgs", "repos_url": "https://api.github.com/users/iacovlev-pavel/repos", "events_url": "https://api.github.com/users/iacovlev-pavel/events{/privacy}", "received_events_url": "https://api.github.com/users/iacovlev-pavel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 236294687, "node_id": "MDU6TGFiZWwyMzYyOTQ2ODc=", "url": "https://api.github.com/repos/lovell/sharp/labels/blocked-upstream-dependency", "name": "blocked-upstream-dependency", "color": "006666", "default": false, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/51", "html_url": "https://github.com/lovell/sharp/milestone/51", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/51/labels", "id": 4153886, "node_id": "MDk6TWlsZXN0b25lNDE1Mzg4Ng==", "number": 51, "title": "v0.22.1", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2019-03-19T10:48:19Z", "updated_at": "2019-04-25T19:34:51Z", "due_on": null, "closed_at": "2019-04-25T19:34:51Z"}, "comments": 32, "created_at": "2018-12-24T15:40:01Z", "updated_at": "2019-08-12T07:33:36Z", "closed_at": "2019-04-25T19:34:26Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "With electron 3.0.12 everything seems to work fine.\r\nChanged version to 4.0.0, removed node_modules, did `npm i`, all ok.\r\n\r\nIf I run electron-rebuild, the command runs, but it does not rebuild the sharp module, does not seem it's picking it up.\r\nIf I run `require('sharp')` I get:\r\n`The specified module could not be found`\r\n\r\nIf I cd to node_modules/sharp and try to recompile it manually:\r\n`node-gyp rebuild --target=4.0.0 --arch=x64 --dist-url=https://atom.io/download/electron`\r\nand try `require('sharp')` I still get `The specified module could not be found`.\r\n\r\nNote: I have checked and `sharp.node` is present at the specified path.\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/1522/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/1522/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/674", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/674/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/674/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/674/events", "html_url": "https://github.com/lovell/sharp/issues/674", "id": 199507150, "node_id": "MDU6SXNzdWUxOTk1MDcxNTA=", "number": 674, "title": "sRGB.icc: Leaked file descriptor?", "user": {"login": "papandreou", "id": 373545, "node_id": "MDQ6VXNlcjM3MzU0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/373545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/papandreou", "html_url": "https://github.com/papandreou", "followers_url": "https://api.github.com/users/papandreou/followers", "following_url": "https://api.github.com/users/papandreou/following{/other_user}", "gists_url": "https://api.github.com/users/papandreou/gists{/gist_id}", "starred_url": "https://api.github.com/users/papandreou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/papandreou/subscriptions", "organizations_url": "https://api.github.com/users/papandreou/orgs", "repos_url": "https://api.github.com/users/papandreou/repos", "events_url": "https://api.github.com/users/papandreou/events{/privacy}", "received_events_url": "https://api.github.com/users/papandreou/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/81", "html_url": "https://github.com/lovell/sharp/milestone/81", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/81/labels", "id": 7719890, "node_id": "MI_kwDOALqQ4s4AdcvS", "number": 81, "title": "v0.31.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-02-28T09:35:51Z", "updated_at": "2022-09-05T09:50:44Z", "due_on": null, "closed_at": "2022-09-05T09:50:44Z"}, "comments": 25, "created_at": "2017-01-09T09:24:04Z", "updated_at": "2022-09-05T09:37:24Z", "closed_at": "2022-09-05T09:37:23Z", "assignee": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm debugging a minor leak problem with a sharp-based service I'm running. From /proc/$PID/fd I can tell that over time, it seems to acquire more and more open file descriptors pointing at node_modules/sharp/icc/sRGB.icc. The highest number I've seen so far is 109.\r\n\r\nIs there a chance that the fd will be leaked in some error case?\r\n\r\nI'm running sharp 0.16.0 for now, but an upgrade to 0.17.0 is on its way.", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/674/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/772", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/772/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/772/events", "html_url": "https://github.com/lovell/sharp/issues/772", "id": 222088815, "node_id": "MDU6SXNzdWUyMjIwODg4MTU=", "number": 772, "title": "Cannot install sharp on ARM64 Odroid Ubuntu", "user": {"login": "ajiratech2", "id": 13775151, "node_id": "MDQ6VXNlcjEzNzc1MTUx", "avatar_url": "https://avatars.githubusercontent.com/u/13775151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajiratech2", "html_url": "https://github.com/ajiratech2", "followers_url": "https://api.github.com/users/ajiratech2/followers", "following_url": "https://api.github.com/users/ajiratech2/following{/other_user}", "gists_url": "https://api.github.com/users/ajiratech2/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajiratech2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajiratech2/subscriptions", "organizations_url": "https://api.github.com/users/ajiratech2/orgs", "repos_url": "https://api.github.com/users/ajiratech2/repos", "events_url": "https://api.github.com/users/ajiratech2/events{/privacy}", "received_events_url": "https://api.github.com/users/ajiratech2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/28", "html_url": "https://github.com/lovell/sharp/milestone/28", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/28/labels", "id": 2234610, "node_id": "MDk6TWlsZXN0b25lMjIzNDYxMA==", "number": 28, "title": "v0.18.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-01-07T14:56:31Z", "updated_at": "2022-05-21T14:34:05Z", "due_on": null, "closed_at": "2017-05-30T07:44:40Z"}, "comments": 24, "created_at": "2017-04-17T08:17:02Z", "updated_at": "2021-03-25T21:51:14Z", "closed_at": "2017-05-30T07:41:54Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi ,\r\n\r\nI've been trying to install sharp on Ubuntu 16.04 Xenial installed on an Odroid but am not able to get the dependency libvips installed on it. Which obviously is causing installation of sharp to fail.\r\n\r\nI'm running node v7.9.x and npm is v4.2.0.\r\n\r\nHere is the output when I try to install sharp \"_sudo  npm install sharp_\"\r\n\r\n> sharp@0.17.3 install /home/pankaj/node_modules/sharp\r\n> node-gyp rebuild\r\n\r\nERROR: Download of https://dl.bintray.com/lovell/sharp/libvips-8.4.2-linux-arm64.tar.gz failed: Response code 404 (Not Found)\r\ngyp: Call to 'LDD_VERSION=\"ldd (Ubuntu GLIBC 2.23-0ubuntu3) 2.23\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\nWritten by Roland McGrath and Ulrich Drepper.\" node -e \"require('./binding').download_vips()\"' returned exit status 1 while in binding.gyp. while trying to load binding.gyp\r\ngyp ERR! configure error \r\ngyp ERR! stack Error: `gyp` failed with exit code: 1\r\ngyp ERR! stack     at ChildProcess.onCpExit (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:308:16)\r\ngyp ERR! stack     at emitTwo (events.js:106:13)\r\ngyp ERR! stack     at ChildProcess.emit (events.js:194:7)\r\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)\r\ngyp ERR! System Linux 3.14.29\r\ngyp ERR! command \"/usr/bin/nodejs\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\r\ngyp ERR! cwd /home/pankaj/node_modules/sharp\r\ngyp ERR! node -v v7.9.0\r\ngyp ERR! node-gyp -v v3.5.0\r\ngyp ERR! not ok \r\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):\r\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"arm64\"})\r\nnpm WARN enoent ENOENT: no such file or directory, open '/home/pankaj/package.json'\r\nnpm WARN pankaj No description\r\nnpm WARN pankaj No repository field.\r\nnpm WARN pankaj No README data\r\nnpm WARN pankaj No license field.\r\nnpm ERR! Linux 3.14.29\r\nnpm ERR! argv \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\" \"sharp\"\r\nnpm ERR! node v7.9.0\r\nnpm ERR! npm  v4.2.0\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\n\r\nnpm ERR! sharp@0.17.3 install: `node-gyp rebuild`\r\nnpm ERR! Exit status 1\r\nnpm ERR! \r\nnpm ERR! Failed at the sharp@0.17.3 install script 'node-gyp rebuild'.\r\nnpm ERR! Make sure you have the latest version of node.js and npm installed.\r\nnpm ERR! If you do, this is most likely a problem with the sharp package,\r\nnpm ERR! not with npm itself.\r\nnpm ERR! Tell the author that this fails on your system:\r\nnpm ERR!     node-gyp rebuild\r\nnpm ERR! You can get information on how to open an issue for this project with:\r\nnpm ERR!     npm bugs sharp\r\nnpm ERR! Or if that isn't available, you can get their info via:\r\nnpm ERR!     npm owner ls sharp\r\nnpm ERR! There is likely additional logging output above.\r\n\r\nnpm ERR! Please include the following file with any support request:\r\nnpm ERR!     /home/pankaj/.npm/_logs/2017-04-17T08_03_38_451Z-debug.log\r\n\r\n\r\nI followed the steps\r\n\r\n**Added repository:**  _sudo add-apt-repository -y ppa:lovell/trusty-backport-vips_\r\ngpg: keyring `/tmp/tmp33esnaad/secring.gpg' created\r\ngpg: keyring `/tmp/tmp33esnaad/pubring.gpg' created\r\ngpg: requesting key 21794330 from hkp server keyserver.ubuntu.com\r\ngpg: /tmp/tmp33esnaad/trustdb.gpg: trustdb created\r\ngpg: key 21794330: public key \"Launchpad PPA for Lovell Fuller\" imported\r\ngpg: Total number processed: 1\r\ngpg:               imported: 1  (RSA: 1)\r\nOK\r\n\r\n**then did** - _sudo apt-get update_\r\nHere I get the following error in output:\r\n\r\n\r\nHit:1 http://deb.odroid.in/c2 xenial InRelease\r\nIgn:2 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial InRelease                          \r\nIgn:3 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial Release                            \r\nIgn:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\nIgn:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nHit:7 https://deb.nodesource.com/node_7.x xenial InRelease\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nIgn:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\nIgn:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nIgn:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\nIgn:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nIgn:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\nIgn:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nIgn:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\nIgn:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nErr:4 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main arm64 Packages\r\n  404  Not Found\r\nErr:5 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main armhf Packages\r\n  404  Not Found\r\nIgn:6 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main all Packages\r\nIgn:8 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en_US\r\nIgn:9 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-en\r\nIgn:10 http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial/main Translation-ru\r\nHit:11 http://ports.ubuntu.com/ubuntu-ports xenial InRelease\r\nHit:12 http://ports.ubuntu.com/ubuntu-ports xenial-updates InRelease             \r\nHit:13 http://ports.ubuntu.com/ubuntu-ports xenial-backports InRelease           \r\nHit:14 http://ports.ubuntu.com/ubuntu-ports xenial-security InRelease            \r\nHit:15 http://oph.mdrjr.net/odrobian xenial InRelease                    \r\nHit:16 http://ports.ubuntu.com/ubuntu-ports xenial-proposed InRelease    \r\nReading package lists... Done                      \r\nW: The repository 'http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu xenial Release' does not have a Release file.\r\nN: Data from such a repository can't be authenticated and is therefore potentially dangerous to use.\r\nN: See apt-secure(8) manpage for repository creation and user configuration details.\r\nW: http://oph.mdrjr.net/odrobian/dists/xenial/InRelease: Signature by key F3230DD84F39A606727D3D5D1B881FD777439C3B uses weak digest algorithm (SHA1)\r\nE: Failed to fetch http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu/dists/xenial/main/binary-arm64/Packages  404  Not Found\r\nE: Failed to fetch http://ppa.launchpad.net/lovell/trusty-backport-vips/ubuntu/dists/xenial/main/binary-armhf/Packages  404  Not Found\r\nE: Some index files failed to download. They have been ignored, or old ones used instead.\r\n\r\n\r\nMy sources contains: _/etc/apt/sources.list_ \r\n\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ xenial main universe restricted multiverse\r\ndeb-src http://ports.ubuntu.com/ubuntu-ports/ xenial main universe restricted multiverse\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ xenial-updates main universe restricted multiverse\r\ndeb-src http://ports.ubuntu.com/ubuntu-ports/ xenial-updates main universe restricted multiverse\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ xenial-backports main restricted universe multiverse\r\ndeb-src http://ports.ubuntu.com/ubuntu-ports/ xenial-backports main restricted universe multiverse\r\n\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ xenial-security main restricted universe multiverse\r\ndeb-src http://ports.ubuntu.com/ubuntu-ports/ xenial-security main restricted universe multiverse\r\n\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ xenial-proposed main restricted universe multiverse\r\ndeb-src http://ports.ubuntu.com/ubuntu-ports/ xenial-proposed main restricted universe multiverse\r\n\r\n\r\nuname -a\r\nLinux odroid64 3.14.29 #25 SMP PREEMPT Fri Apr 22 16:24:15 EDT 2016 aarch64 aarch64 aarch64 GNU/Linux\r\n\r\nI've spent hours searching and trying different things but none have worked. Please advice how to fix this. Thanks in advance!\r\n\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/772/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/772/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/3438", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/3438/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/3438/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/3438/events", "html_url": "https://github.com/lovell/sharp/issues/3438", "id": 1437935612, "node_id": "I_kwDOALqQ4s5VtSf8", "number": 3438, "title": "v0.31.2: macOS x64 prebuilt binaries fail on macOS < 11 with \"Symbol not found: _pthread_jit_write_protect_supported_np\"", "user": {"login": "nosferatu500", "id": 9116892, "node_id": "MDQ6VXNlcjkxMTY4OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9116892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nosferatu500", "html_url": "https://github.com/nosferatu500", "followers_url": "https://api.github.com/users/nosferatu500/followers", "following_url": "https://api.github.com/users/nosferatu500/following{/other_user}", "gists_url": "https://api.github.com/users/nosferatu500/gists{/gist_id}", "starred_url": "https://api.github.com/users/nosferatu500/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nosferatu500/subscriptions", "organizations_url": "https://api.github.com/users/nosferatu500/orgs", "repos_url": "https://api.github.com/users/nosferatu500/repos", "events_url": "https://api.github.com/users/nosferatu500/events{/privacy}", "received_events_url": "https://api.github.com/users/nosferatu500/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/88", "html_url": "https://github.com/lovell/sharp/milestone/88", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/88/labels", "id": 8435120, "node_id": "MI_kwDOALqQ4s4AgLWw", "number": 88, "title": "v0.32.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2022-09-18T18:40:27Z", "updated_at": "2023-03-29T08:51:43Z", "due_on": null, "closed_at": "2023-03-24T18:47:51Z"}, "comments": 23, "created_at": "2022-11-07T08:07:58Z", "updated_at": "2023-03-24T17:57:06Z", "closed_at": "2023-03-24T17:43:11Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "<!-- Please try to answer as many of these questions as possible. -->\r\n\r\n## Possible install-time or require-time problem\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] I have read the [documentation relating to installation](https://sharp.pixelplumbing.com/install).\r\n- [x] I have ensured that the architecture and platform of Node.js used for `npm install` is the same as the architecture and platform of Node.js used at runtime.\r\n\r\n### Are you using the latest version of sharp?\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\r\n\r\nIf you cannot confirm this, please upgrade to the latest version and try again before opening an issue.\r\n\r\nIf you are using another package which depends on a version of `sharp` that is not the latest, please open an issue against that package instead.\r\n\r\n------------------------------------------------------------------\r\n\r\nHello! After updating Sharp from version 0.31.1 to version 0.31.2, some of my users can no longer run my application.\r\n\r\n```\r\nDyld Error Message:\r\n  Symbol not found: _pthread_jit_write_protect_supported_np\r\n  Referenced from: /Applications/electron.app/Contents/Resources/app.asar.unpacked/node_modules/sharp/build/Release/../.././vendor/8.13.3/darwin-x64/lib/libvips-cpp.42.dylib\r\n  Expected in: /usr/lib/libSystem.B.dylib\r\n```\r\n\r\nI can guess that this problem is probably inside `libvips` (as shown in the error message), but in the installation guide you state:\r\n```\r\nPrebuilt binaries\r\n\r\nReady-compiled sharp and libvips binaries are provided for use on the most common platforms:\r\n\r\n - macOS x64 (>= 10.13)\r\n - macOS ARM64\r\n - Linux x64 (glibc >= 2.17, musl >= 1.1.24, CPU with SSE4.2)\r\n - Linux ARM64 (glibc >= 2.17, musl >= 1.1.24)\r\n - Windows x64\r\n - Windows x86\r\n```\r\n\r\nSo I'm just wondering if this bug should be expected to be fixed or should the supported macOS version be higher?", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/3438/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/3438/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/679", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/679/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/679/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/679/events", "html_url": "https://github.com/lovell/sharp/issues/679", "id": 200269715, "node_id": "MDU6SXNzdWUyMDAyNjk3MTU=", "number": 679, "title": "ECONNREFUSED when using HTTPS over HTTP proxy", "user": {"login": "wangzhiwei1888", "id": 4507225, "node_id": "MDQ6VXNlcjQ1MDcyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4507225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangzhiwei1888", "html_url": "https://github.com/wangzhiwei1888", "followers_url": "https://api.github.com/users/wangzhiwei1888/followers", "following_url": "https://api.github.com/users/wangzhiwei1888/following{/other_user}", "gists_url": "https://api.github.com/users/wangzhiwei1888/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangzhiwei1888/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangzhiwei1888/subscriptions", "organizations_url": "https://api.github.com/users/wangzhiwei1888/orgs", "repos_url": "https://api.github.com/users/wangzhiwei1888/repos", "events_url": "https://api.github.com/users/wangzhiwei1888/events{/privacy}", "received_events_url": "https://api.github.com/users/wangzhiwei1888/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/27", "html_url": "https://github.com/lovell/sharp/milestone/27", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/27/labels", "id": 2232040, "node_id": "MDk6TWlsZXN0b25lMjIzMjA0MA==", "number": 27, "title": "v0.17.1", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2017-01-05T22:29:42Z", "updated_at": "2017-01-15T15:52:09Z", "due_on": null, "closed_at": "2017-01-15T15:52:09Z"}, "comments": 21, "created_at": "2017-01-12T03:25:53Z", "updated_at": "2017-01-15T15:51:38Z", "closed_at": "2017-01-15T15:51:38Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "gyp WARN EACCES user \"root\" does not have permission to access the dev dir \"/root/.node-gyp/6.9.4\"\r\ngyp WARN EACCES attempting to reinstall using temporary dev dir \"/opt/yrd_app/node-generator-img-activity/node_modules/sharp/.node-gyp\"\r\nERROR: Download of https://dl.bintray.com/lovell/sharp/libvips-8.4.2-linux-x64.tar.gz failed: connect ECONNREFUSED 35.166.56.1:443\r\ngyp: Call to 'LDD_VERSION=\"ldd (GNU libc) 2.17\r\nCopyright (C) 2012 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\u7531 Roland McGrath \u548c Ulrich Drepper \u7f16\u5199\u3002\" node -e \"require('./binding').download_vips()\"' returned exit status 1 while in binding.gyp. while trying to load binding.gyp\r\ngyp ERR! configure error\r\ngyp ERR! stack Error: `gyp` failed with exit code: 1\r\ngyp ERR! stack     at ChildProcess.onCpExit (/root/work/node-v6.9.4-linux-x64/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:305:16)\r\ngyp ERR! stack     at emitTwo (events.js:106:13)\r\ngyp ERR! stack     at ChildProcess.emit (events.js:191:7)\r\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)\r\ngyp ERR! System Linux 3.10.0-327.22.2.el7.x86_64\r\ngyp ERR! command \"/root/work/node-v6.9.4-linux-x64/bin/node\" \"/root/work/node-v6.9.4-linux-x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\r\ngyp ERR! cwd /opt/yrd_app/node-generator-img-activity/node_modules/sharp\r\ngyp ERR! node -v v6.9.4\r\ngyp ERR! node-gyp -v v3.4.0\r\ngyp ERR! not ok\r\n\r\nnpm ERR! Linux 3.10.0-327.22.2.el7.x86_64\r\nnpm ERR! argv \"/root/work/node-v6.9.4-linux-x64/bin/node\" \"/root/work/node-v6.9.4-linux-x64/bin/npm\" \"install\" \"--registry=https://registry.npm.taobao.org\"\r\nnpm ERR! node v6.9.4\r\nnpm ERR! npm  v3.10.10\r\nnpm ERR! code ELIFECYCLE\r\n\r\nnpm ERR! sharp@0.17.0 install: `node-gyp rebuild`\r\nnpm ERR! Exit status 1\r\nnpm ERR!\r\nnpm ERR! Failed at the sharp@0.17.0 install script 'node-gyp rebuild'.\r\nnpm ERR! Make sure you have the latest version of node.js and npm installed.\r\nnpm ERR! If you do, this is most likely a problem with the sharp package,\r\nnpm ERR! not with npm itself.\r\nnpm ERR! Tell the author that this fails on your system:\r\nnpm ERR!     node-gyp rebuild\r\nnpm ERR! You can get information on how to open an issue for this project with:\r\nnpm ERR!     npm bugs sharp\r\nnpm ERR! Or if that isn't available, you can get their info via:\r\nnpm ERR!     npm owner ls sharp\r\nnpm ERR! There is likely additional logging output above.\r\n\r\nnpm ERR! Please include the following file with any support request:\r\nnpm ERR!     /opt/yrd_app/node-generator-img-activity/npm-debug.log", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/679/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/4344", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/4344/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/4344/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/4344/events", "html_url": "https://github.com/lovell/sharp/issues/4344", "id": 2894060280, "node_id": "I_kwDOALqQ4s6sf9r4", "number": 4344, "title": "Reduction of gamut when handling high bitdepth AVIF", "user": {"login": "Hanmo123", "id": 32361024, "node_id": "MDQ6VXNlcjMyMzYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/32361024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hanmo123", "html_url": "https://github.com/Hanmo123", "followers_url": "https://api.github.com/users/Hanmo123/followers", "following_url": "https://api.github.com/users/Hanmo123/following{/other_user}", "gists_url": "https://api.github.com/users/Hanmo123/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hanmo123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hanmo123/subscriptions", "organizations_url": "https://api.github.com/users/Hanmo123/orgs", "repos_url": "https://api.github.com/users/Hanmo123/repos", "events_url": "https://api.github.com/users/Hanmo123/events{/privacy}", "received_events_url": "https://api.github.com/users/Hanmo123/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/103", "html_url": "https://github.com/lovell/sharp/milestone/103", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/103/labels", "id": 11548428, "node_id": "MI_kwDOALqQ4s4AsDcM", "number": 103, "title": "v0.34.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2024-09-06T11:38:29Z", "updated_at": "2025-04-04T14:28:52Z", "due_on": null, "closed_at": "2025-04-04T14:28:52Z"}, "comments": 20, "created_at": "2025-03-04T12:16:08Z", "updated_at": "2025-05-20T04:41:49Z", "closed_at": "2025-04-04T14:27:33Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "<!-- If this issue relates to installation, please use https://github.com/lovell/sharp/issues/new?labels=installation&template=installation.md instead. -->\n\n## Error when convert hdr avif to 10bit avif\n\n### Is this a possible bug in a feature of sharp, unrelated to installation?\n\n<!-- Please place an [x] in the box to confirm. -->\n\n- [x] Running `npm install sharp` completes without error.\n- [x] Running `node -e \"require('sharp')\"` completes without error.\n\nIf you cannot confirm both of these, please open an [installation issue](https://github.com/lovell/sharp/issues/new?labels=installation&template=installation.md) instead.\n\n### Are you using the latest version of sharp?\n\n<!-- Please place an [x] in the box to confirm. -->\n\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\n\nIf you cannot confirm this, please upgrade to the latest version and try again before opening an issue.\n\nIf you are using another package which depends on a version of `sharp` that is not the latest, please open an issue against that package instead.\n\n### What is the output of running `npx envinfo --binaries --system --npmPackages=sharp --npmGlobalPackages=sharp`?\n\n```\n  System:\n    OS: Linux 6.2 Debian GNU/Linux 12 (bookworm) 12 (bookworm)\n    CPU: (32) x64 13th Gen Intel(R) Core(TM) i9-13900K\n    Memory: 7.12 GB / 8.00 GB\n    Container: Yes\n    Shell: 5.9 - /usr/bin/zsh\n  Binaries:\n    Node: 22.14.0 - /usr/local/bin/node\n    npm: 10.9.2 - /usr/local/bin/npm\n    pnpm: 10.5.2 - /usr/local/bin/pnpm\n  npmPackages:\n    sharp: ^0.33.5 => 0.33.5 \n```\n\n<!-- Please provide output of the above command here. -->\n\n### Does this problem relate to file caching?\n\nThe default behaviour of libvips is to cache input files, which can lead to `EBUSY` or `EPERM` errors on Windows.\nUse [`sharp.cache(false)`](https://sharp.pixelplumbing.com/api-utility#cache) to switch this feature off.\n\n- [x] Adding `sharp.cache(false)` does not fix this problem.\n\n### Does this problem relate to images appearing to have been rotated by 90 degrees?\n\nImages that contain EXIF Orientation metadata are not auto-oriented. By default, EXIF metadata is removed.\n\n- To auto-orient pixel values use the parameter-less [`rotate()`](https://sharp.pixelplumbing.com/api-operation#rotate) operation.\n- To retain EXIF Orientation use [`keepExif()`](https://sharp.pixelplumbing.com/api-output#keepexif).\n\n- [x] Using `rotate()` or `keepExif()` does not fix this problem.\n\n### What are the steps to reproduce?\n\nUse sharp to load a hdr image and export to another avif(10bit)\n\n<!-- Please enter steps to reproduce here. -->\n\n### What is the expected behaviour?\n\nA 10bit image should be exported\n\n<!-- Please enter the expected behaviour here. -->\n\n### Please provide a minimal, standalone code sample, without other dependencies, that demonstrates this problem\n\n```javascript\nconst sharp = require('sharp');\n\nsharp('input-srgb.avif')\n    .avif({\n        lossless: true,\n        bitdepth: 10,\n    })\n    .toFile('output-sharp-srgb.avif')\n```\n\n```\n\u279c  skia-app node main              \nnode: ./av1/encoder/bitstream.c:2442: write_color_config: Assertion `seq_params->subsampling_x == 1 && seq_params->subsampling_y == 0' failed.\n[1]    114565 IOT instruction  node main\n```\n\n\n<!-- Please provide either formatted code or a link to a repo/gist that allows someone else to reproduce here. -->\n\n### Please provide sample image(s) that help explain this problem\n\n<!-- Please provide links to one or more images here. -->\n\n[input-srgb.avif.zip](https://github.com/user-attachments/files/19070442/input-srgb.avif.zip)", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/4344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/4344/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/3048", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/3048/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/3048/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/3048/events", "html_url": "https://github.com/lovell/sharp/issues/3048", "id": 1106577762, "node_id": "I_kwDOALqQ4s5B9Qli", "number": 3048, "title": "Segmentation Fault under Rosetta emulation, Node.js 14, M1 Max, macOS Monterey", "user": {"login": "jpike88", "id": 9585787, "node_id": "MDQ6VXNlcjk1ODU3ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/9585787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpike88", "html_url": "https://github.com/jpike88", "followers_url": "https://api.github.com/users/jpike88/followers", "following_url": "https://api.github.com/users/jpike88/following{/other_user}", "gists_url": "https://api.github.com/users/jpike88/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpike88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpike88/subscriptions", "organizations_url": "https://api.github.com/users/jpike88/orgs", "repos_url": "https://api.github.com/users/jpike88/repos", "events_url": "https://api.github.com/users/jpike88/events{/privacy}", "received_events_url": "https://api.github.com/users/jpike88/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/79", "html_url": "https://github.com/lovell/sharp/milestone/79", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/79/labels", "id": 7639360, "node_id": "MI_kwDOALqQ4s4AdJFA", "number": 79, "title": "v0.30.1", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2022-02-03T21:08:19Z", "updated_at": "2022-02-10T10:22:16Z", "due_on": null, "closed_at": "2022-02-10T10:22:16Z"}, "comments": 20, "created_at": "2022-01-18T07:49:35Z", "updated_at": "2022-02-10T10:22:02Z", "closed_at": "2022-02-10T10:22:02Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Related issue:\r\nhttps://github.com/ionic-team/capacitor-assets/issues/272\r\n\r\nSharp is causing a segmentation fault when converting images on my Mac.\r\n\r\nI have macOS Monterey, on an M1 Max chip.\r\n\r\nWhen I download sharp locally and run ```npm test```, I get:\r\n\r\n```\r\n\r\n\r\n> sharp@0.29.3 test /Users/joshua/Projects/sharp\r\n> npm run test-lint && npm run test-unit && npm run test-licensing\r\n\r\n\r\n> sharp@0.29.3 test-lint /Users/joshua/Projects/sharp\r\n> semistandard && cpplint\r\n\r\n\r\n> sharp@0.29.3 test-unit /Users/joshua/Projects/sharp\r\n> nyc --reporter=lcov --branches=99 mocha --slow=1000 --timeout=60000 ./test/unit/*.js\r\n\r\n\r\n\r\n  Affine transform\r\n    \u2714 Applies identity matrix\r\n    \u2714 Applies resize affine matrix\r\n    \u2714 Resizes and applies affine transform\r\n    1) Extracts and applies affine transform\r\n    \u2714 Rotates and applies affine transform\r\n    2) Extracts, rotates and applies affine transform\r\n    3) Applies affine transform with background color\r\n    \u2714 Applies affine transform with background color and output offsets\r\n    4) Applies affine transform with background color and all offsets\r\n    Invalid input\r\n      \u2714 Missing matrix\r\n      \u2714 Invalid 1d matrix\r\n      \u2714 Invalid 2d matrix\r\n      \u2714 Invalid options parameter type\r\n      \u2714 Invalid background color\r\n      \u2714 Invalid idx offset type\r\n      \u2714 Invalid idy offset type\r\n      \u2714 Invalid odx offset type\r\n      \u2714 Invalid ody offset type\r\n      \u2714 Invalid interpolator\r\n    Interpolations\r\n      5) Performs 2x upscale with nearest interpolation\r\n      \u2714 Performs 2x upscale with bilinear interpolation\r\n      6) Performs 2x upscale with bicubic interpolation\r\n      7) Performs 2x upscale with locallyBoundedBicubic interpolation\r\n      \u2714 Performs 2x upscale with nohalo interpolation\r\n      8) Performs 2x upscale with vertexSplitQuadraticBasisSpline interpolation\r\n\r\n  HTTP agent\r\n    \u2714 Without proxy\r\n    \u2714 HTTPS proxy with auth from HTTPS_PROXY\r\n    \u2714 HTTPS proxy with auth from HTTPS_PROXY using credentials containing special characters\r\n    \u2714 HTTP proxy without auth from npm_config_proxy\r\n\r\n  Alpha transparency\r\nsh: line 1: 79897 Segmentation fault: 11  npm run test-unit\r\nnpm ERR! Test failed.  See above for more details.\r\n\r\n```\r\n\r\nIt's not random, the same tests fail each time.\r\n\r\n```\r\n\r\n  System:\r\n    OS: macOS 12.1\r\n    CPU: (10) x64 Apple M1 Max\r\n    Memory: 160.91 MB / 32.00 GB\r\n    Shell: 5.8 - /bin/zsh\r\n  Binaries:\r\n    Node: 14.18.1 - /usr/local/bin/node\r\n    npm: 6.14.15 - /usr/local/bin/npm\r\n\r\n```", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/3048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/3048/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/3677", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/3677/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/3677/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/3677/events", "html_url": "https://github.com/lovell/sharp/issues/3677", "id": 1721529341, "node_id": "I_kwDOALqQ4s5mnHP9", "number": 3677, "title": "Sharp crashes a lot in production during resize operation inside libvips (Access violation)", "user": {"login": "TomaterID", "id": 48621299, "node_id": "MDQ6VXNlcjQ4NjIxMjk5", "avatar_url": "https://avatars.githubusercontent.com/u/48621299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomaterID", "html_url": "https://github.com/TomaterID", "followers_url": "https://api.github.com/users/TomaterID/followers", "following_url": "https://api.github.com/users/TomaterID/following{/other_user}", "gists_url": "https://api.github.com/users/TomaterID/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomaterID/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomaterID/subscriptions", "organizations_url": "https://api.github.com/users/TomaterID/orgs", "repos_url": "https://api.github.com/users/TomaterID/repos", "events_url": "https://api.github.com/users/TomaterID/events{/privacy}", "received_events_url": "https://api.github.com/users/TomaterID/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/95", "html_url": "https://github.com/lovell/sharp/milestone/95", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/95/labels", "id": 9682373, "node_id": "MI_kwDOALqQ4s4Ak73F", "number": 95, "title": "v0.32.4", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2023-07-21T10:07:23Z", "updated_at": "2023-08-09T12:44:09Z", "due_on": null, "closed_at": "2023-08-09T12:44:09Z"}, "comments": 19, "created_at": "2023-05-23T08:37:01Z", "updated_at": "2023-08-09T12:43:41Z", "closed_at": "2023-08-09T12:43:40Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "## Crash inside libvips (Access violation) during sharp resize operation\r\n\r\n### Is this a possible bug in a feature of sharp, unrelated to installation?\r\n\r\n- [x] Running `npm install sharp` completes without error.\r\n- [x] Running `node -e \"require('sharp')\"` completes without error.\r\n\r\n### Are you using the latest version of sharp?\r\n\r\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\r\n\r\n### What is the output of running `npx envinfo --binaries --system --npmPackages=sharp --npmGlobalPackages=sharp`?\r\n\r\n*This is Irrelevant*, as I cannot run this comand on PC of users of my app. On my dev PC the output is following (however it does not crash on my PC):\r\n\r\n```\r\nnpx: installed 1 in 3.85s\r\n\r\n  System:\r\n    OS: Windows 10 10.0.19045\r\n    CPU: (20) x64 Intel(R) Core(TM) i9-7900X CPU @ 3.30GHz\r\n    Memory: 54.41 GB / 63.71 GB\r\n  Binaries:\r\n    Node: 14.21.3 - C:\\Program Files\\nodejs\\node.EXE      \r\n    npm: 6.14.18 - C:\\Program Files\\nodejs\\npm.CMD        \r\n  npmPackages:\r\n    sharp: ^0.32.1 => 0.32.1 \r\n```\r\n\r\n### What are the steps to reproduce?\r\n\r\nUnfortunately, there is no information about steps to reproduce. I have sharp build into my electron application for managing personal photo archive. Thousands of users download it each month and error happens at user side, I only get crash dumps. However, I get crash reports with this particular one several times EVERY DAY. I would say it accounts to roughly 20% of all crashes of my application, while all sharp related crashes together more than 90% of all native crashes.\r\n\r\nAs far as I can see from stack trace (unfortunately I do not have libvips PDB's), this particular crash happens during resize operation. \r\n\r\n![image](https://github.com/lovell/sharp/assets/48621299/43ab0f8e-319d-46d2-8f79-e345db570664)\r\n\r\nI will be more than happy to provide bunch of dump files with this error.\r\n\r\n### What is the expected behaviour?\r\n\r\nDo not crash my app :)\r\n\r\n### Please provide a minimal, standalone code sample, without other dependencies, that demonstrates this problem\r\n\r\nI don't think this is possible, as I don't know steps to reproduce.\r\n\r\n### Please provide sample image(s) that help explain this problem\r\n\r\nI'm afraid, this is impossible.\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/3677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/3677/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/614", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/614/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/614/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/614/events", "html_url": "https://github.com/lovell/sharp/issues/614", "id": 185374359, "node_id": "MDU6SXNzdWUxODUzNzQzNTk=", "number": 614, "title": "readelf: Error: '/usr/local/lib /libvips-cpp.so': No such file", "user": {"login": "jyounus", "id": 1123124, "node_id": "MDQ6VXNlcjExMjMxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1123124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyounus", "html_url": "https://github.com/jyounus", "followers_url": "https://api.github.com/users/jyounus/followers", "following_url": "https://api.github.com/users/jyounus/following{/other_user}", "gists_url": "https://api.github.com/users/jyounus/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyounus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyounus/subscriptions", "organizations_url": "https://api.github.com/users/jyounus/orgs", "repos_url": "https://api.github.com/users/jyounus/repos", "events_url": "https://api.github.com/users/jyounus/events{/privacy}", "received_events_url": "https://api.github.com/users/jyounus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/25", "html_url": "https://github.com/lovell/sharp/milestone/25", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/25/labels", "id": 2065866, "node_id": "MDk6TWlsZXN0b25lMjA2NTg2Ng==", "number": 25, "title": "v0.17.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2016-10-12T18:33:14Z", "updated_at": "2016-12-11T19:39:27Z", "due_on": null, "closed_at": "2016-12-11T19:39:27Z"}, "comments": 19, "created_at": "2016-10-26T12:04:46Z", "updated_at": "2020-06-16T18:10:23Z", "closed_at": "2016-12-11T19:36:12Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hey there,\n\nI'm trying to deploy my node app on an Ubuntu server. I've set up a docker file to pull and install all the necessary files. However if I want to use sharp version 0.16 or above, I get the following error in the logs. If however I stick to sharp version 0.15 inside my package.json file, it installs everything fine. \n\nI've completely deleted the server and tried to install this on a brand new one. I always get the same error. I looked at previous issues with a similar issue, but they don't seem to work for me (one of them is a mac specific issue, which is irrelevant to my issue on Ubuntu).\n\nDoes anyone have any suggestions what I should do to fix this problem? With my docker file, I'm installing libvips version 8.3.3.\n\n```\nreadelf: Error: '/usr/local/lib /libvips-cpp.so': No such file\ngyp: Call to 'if readelf -Ws \"$(PKG_CONFIG_PATH=\":$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig\" pkg-config --libs-only-L vips-cpp | cut -c 3- | sed -e \"s/^$/\\/usr\\/lib/\")/libvips-cpp.so\" | c++filt | grep -qF __cxx11;then echo \"1\";else echo \"0\";fi' returned exit status 0. while trying to load binding.gyp\nnpm http GET https://registry.npmjs.org/resolve-from/-/resolve-from-1.0.1.tgz\ngyp ERR! configure error\ngyp ERR! stack Error: `gyp` failed with exit code: 1\ngyp ERR! stack at ChildProcess.onCpExit (/usr/share/node-gyp/lib/configure.js:431:16)\ngyp ERR! stack at ChildProcess.EventEmitter.emit (events.js:98:17)\ngyp ERR! stack at Process.ChildProcess._handle.onexit (child_process.js:797:12)\ngyp ERR! System Linux 4.2.0-42-generic\ngyp ERR! command \"nodejs\" \"/usr/bin/node-gyp\" \"rebuild\"\ngyp ERR! cwd /usr/src/imageservice/node_modules/sharp\ngyp ERR! node -v v0.10.25\ngyp ERR! node-gyp -v v0.10.10\ngyp ERR! not ok\nnpm WARN This failure might be due to the use of legacy binary \"node\"\nnpm WARN For further explanations, please read\n/usr/share/doc/nodejs/README.Debian\nnpm http 200 https://registry.npmjs.org/resolve-from/-/resolve-from-1.0.1.tgz\nnpm http GET https://registry.npmjs.org/prelude-ls\nnpm http GET https://registry.npmjs.org/type-check\nnpm http 200 https://registry.npmjs.org/prelude-ls\nnpm http 200 https://registry.npmjs.org/type-check\nnpm http GET https://registry.npmjs.org/deep-is\nnpm http GET https://registry.npmjs.org/fast-levenshtein\nnpm http GET https://registry.npmjs.org/wordwrap\nnpm http 200 https://registry.npmjs.org/deep-is\nnpm http 200 https://registry.npmjs.org/wordwrap\nnpm http GET https://registry.npmjs.org/jsonify\nnpm http 200 https://registry.npmjs.org/fast-levenshtein\nnpm http GET https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.1.2.tgz\nnpm http GET https://registry.npmjs.org/type-check/-/type-check-0.3.2.tgz\nnpm http 200 https://registry.npmjs.org/jsonify\nnpm http 200 https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.1.2.tgz\nnpm http 200 https://registry.npmjs.org/type-check/-/type-check-0.3.2.tgz\nnpm http GET https://registry.npmjs.org/deep-is/-/deep-is-0.1.3.tgz\nnpm http GET https://registry.npmjs.org/wordwrap/-/wordwrap-1.0.0.tgz\nnpm http GET https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.5.tgz\nnpm http 200 https://registry.npmjs.org/deep-is/-/deep-is-0.1.3.tgz\nnpm http 200 https://registry.npmjs.org/wordwrap/-/wordwrap-1.0.0.tgz\nnpm http GET https://registry.npmjs.org/acorn\nnpm http 200 https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.5.tgz\nnpm http GET https://registry.npmjs.org/acorn-jsx\nnpm http GET https://registry.npmjs.org/jsonify/-/jsonify-0.0.0.tgz\nnpm ERR! weird error 1\nnpm http 200 https://registry.npmjs.org/jsonify/-/jsonify-0.0.0.tgz\nnpm http 200 https://registry.npmjs.org/acorn-jsx\nnpm http 200 https://registry.npmjs.org/acorn\nnpm ERR! tar.unpack error reading /root/tmp/npm-7-3dHut-Jq/1477482855073-0.8630997932050377/tmp.tgz\nnpm ERR! tar pack Error reading /root/tmp/npm-7-3dHut-Jq/1477482854864-0.48442938970401883/package\nnpm ERR! Error: ENOENT, utime '/root/tmp/npm-7-3dHut-Jq/1477482854810-0.03756607137620449/package/test'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /root/tmp/npm-7-3dHut-Jq/1477482854810-0.03756607137620449/package/test\nnpm ERR! fstream_path /root/tmp/npm-7-3dHut-Jq/1477482854810-0.03756607137620449/package/test/tarray.js\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! fstream_finish_call setupMadeDir\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack end (/usr/lib/nodejs/fstream/lib/writer.js:319:21)\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:336:20\nnpm ERR! fstream_stack next (/usr/lib/nodejs/fstream/lib/writer.js:366:20)\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm ERR! addLocalDirectory Could not pack \"/root/tmp/npm-7-3dHut-Jq/1477482854864-0.48442938970401883/package\" to \"/root/.npm/resolve-from/1.0.1/package.tgz\"\nnpm ERR! tar pack Error reading /root/tmp/npm-7-3dHut-Jq/1477482854827-0.8885397869162261/package\nnpm ERR! tar pack Error reading /root/tmp/npm-7-3dHut-Jq/1477482854827-0.8885397869162261/package\nnpm http GET https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-3.0.1.tgz\nnpm ERR! addLocalDirectory Could not pack \"/root/tmp/npm-7-3dHut-Jq/1477482854827-0.8885397869162261/package\" to \"/root/.npm/flat-cache/1.2.1/package.tgz\"\nnpm ERR! addLocalDirectory Could not pack \"/root/tmp/npm-7-3dHut-Jq/1477482854827-0.8885397869162261/package\" to \"/root/.npm/flat-cache/1.2.1/package.tgz\"\nnpm http GET https://registry.npmjs.org/acorn/-/acorn-4.0.3.tgz\nnpm http 200 https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-3.0.1.tgz\nnpm http 200 https://registry.npmjs.org/acorn/-/acorn-4.0.3.tgz\nnpm ERR! error rolling back Error: ENOTEMPTY, rmdir '/usr/src/imageservice/node_modules/eslint/node_modules/shelljs/src'\nnpm ERR! error rolling back eslint@2.13.1 { [Error: ENOTEMPTY, rmdir '/usr/src/imageservice/node_modules/eslint/node_modules/shelljs/src']\nnpm ERR! error rolling back errno: 53,\nnpm ERR! error rolling back code: 'ENOTEMPTY',\nnpm ERR! error rolling back path: '/usr/src/imageservice/node_modules/eslint/node_modules/shelljs/src' }\nnpm ERR! Error: ENOENT, open '/usr/src/imageservice/node_modules/eslint/node_modules/inquirer/lib/utils/readline.js'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0\n.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /usr/src/imageservice/node_modules/eslint/node_modules/inquirer/lib/utils/readline.js\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! Error: ENOENT, lstat '/usr/src/imageservice/node_modules/eslint/node_modules/is-my-json-valid/test/json-schema-draft4/dependencies.json'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /usr/src/imageservice/node_modules/eslint/node_modules/is-my-json-valid/test/json-schema-draft4/dependencies.json\nnpm ERR! fstream_path /usr/src/imageservice/node_modules/eslint/node_modules/is-my-json-valid/test/json-schema-draft4/dependencies.json\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:284:26\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm ERR! Error: ENOENT, lstat '/usr/src/imageservice/node_modules/eslint/node_modules/js-yaml/dist/js-yaml.js'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /usr/src/imageservice/node_modules/eslint/node_modules/js-yaml/dist/js-yaml.js\nnpm ERR! fstream_path /usr/src/imageservice/node_modules/eslint/node_modules/js-yaml/dist/js-yaml.js\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:284:26\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm ERR! Error: ENOENT, lstat '/usr/src/imageservice/node_modules/eslint/node_modules/glob/node_modules/minimatch/minimatch.js'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /usr/src/imageservice/node_modules/eslint/node_modules/glob/node_modules/minimatch/minimatch.js\nnpm ERR! fstream_path /usr/src/imageservice/node_modules/eslint/node_modules/glob/node_modules/minimatch/minimatch.js\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:284:26\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm ERR! Error: ENOENT, lstat '/usr/src/imageservice/node_modules/eslint/node_modules/table/dist/validateConfig.js'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /usr/src/imageservice/node_modules/eslint/node_modules/table/dist/validateConfig.js\nnpm ERR! fstream_path /usr/src/imageservice/node_modules/eslint/node_modules/table/dist/validateConfig.js\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:284:26\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm ERR! Error: ENOENT, lstat '/root/tmp/npm-7-3dHut-Jq/1477482847868-0.11803021607920527/package/data/haarcascade_frontalface_alt_tree.xml'\nnpm ERR! If you need help, you may report this log at:\nnpm ERR!\nnpm ERR! or email it to:\nnpm ERR!\nnpm ERR! System Linux 4.2.0-42-generic\nnpm ERR! command \"/usr/bin/nodejs\" \"/usr/bin/npm\" \"install\"\nnpm ERR! cwd /usr/src/imageservice\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.10\nnpm ERR! path /root/tmp/npm-7-3dHut-Jq/1477482847868-0.11803021607920527/package/data/haarcascade_frontalface_alt_tree.xml\nnpm ERR! fstream_path /root/tmp/npm-7-3dHut-Jq/1477482847868-0.11803021607920527/package/data/haarcascade_frontalface_alt_tree.xml\nnpm ERR! fstream_type File\nnpm ERR! fstream_class FileWriter\nnpm ERR! code ENOENT\nnpm ERR! errno 34\nnpm ERR! fstream_stack /usr/lib/nodejs/fstream/lib/writer.js:284:26\nnpm ERR! fstream_stack Object.oncomplete (fs.js:107:15)\nnpm http GET https://registry.npmjs.org/acorn/-/acorn-3.3.0.tgz\nnpm http 200 https://registry.npmjs.org/acorn/-/acorn-3.3.0.tgz\nnpm ERR!\nnpm ERR! Additional logging details can be found in:\nnpm ERR! /usr/src/imageservice/npm-debug.log\nnpm ERR! not ok code 0\nThe command '/bin/sh -c npm install' returned a non-zero code: 1\n```\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/614/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/151", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/151/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/151/events", "html_url": "https://github.com/lovell/sharp/issues/151", "id": 54878499, "node_id": "MDU6SXNzdWU1NDg3ODQ5OQ==", "number": 151, "title": "spurious segmentation fault", "user": {"login": "bkw", "id": 60910, "node_id": "MDQ6VXNlcjYwOTEw", "avatar_url": "https://avatars.githubusercontent.com/u/60910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkw", "html_url": "https://github.com/bkw", "followers_url": "https://api.github.com/users/bkw/followers", "following_url": "https://api.github.com/users/bkw/following{/other_user}", "gists_url": "https://api.github.com/users/bkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkw/subscriptions", "organizations_url": "https://api.github.com/users/bkw/orgs", "repos_url": "https://api.github.com/users/bkw/repos", "events_url": "https://api.github.com/users/bkw/events{/privacy}", "received_events_url": "https://api.github.com/users/bkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/6", "html_url": "https://github.com/lovell/sharp/milestone/6", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/6/labels", "id": 894254, "node_id": "MDk6TWlsZXN0b25lODk0MjU0", "number": 6, "title": "v0.9.0", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2014-12-06T21:32:36Z", "updated_at": "2015-07-12T11:10:55Z", "due_on": null, "closed_at": "2015-07-12T11:10:55Z"}, "comments": 19, "created_at": "2015-01-20T12:41:26Z", "updated_at": "2015-01-23T11:18:18Z", "closed_at": "2015-01-23T11:13:32Z", "assignee": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "This one is probably a toughie:\n\nI'm pulling image urls from a queue, download them and run some sharp transformations on them.\nEvery once in a while a get a segmentation fault like this:\n\nhttps://gist.github.com/bkw/8bb899281c2c87727f46\n\nUnfortunately I have a very hard time reproducing this. I tried processing the same images in succession but no luck. But when I go back to processing the queue, sooner or later the crash happens again.\n\nIf you have any advice how to enhance this bug report, please let me know.\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/151/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/1345", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/1345/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/1345/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/1345/events", "html_url": "https://github.com/lovell/sharp/issues/1345", "id": 352103705, "node_id": "MDU6SXNzdWUzNTIxMDM3MDU=", "number": 1345, "title": "Google Cloud Functions - EXDEV: cross-device link not permitted - v0.20.6", "user": {"login": "amitbravo", "id": 16644357, "node_id": "MDQ6VXNlcjE2NjQ0MzU3", "avatar_url": "https://avatars.githubusercontent.com/u/16644357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amitbravo", "html_url": "https://github.com/amitbravo", "followers_url": "https://api.github.com/users/amitbravo/followers", "following_url": "https://api.github.com/users/amitbravo/following{/other_user}", "gists_url": "https://api.github.com/users/amitbravo/gists{/gist_id}", "starred_url": "https://api.github.com/users/amitbravo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amitbravo/subscriptions", "organizations_url": "https://api.github.com/users/amitbravo/orgs", "repos_url": "https://api.github.com/users/amitbravo/repos", "events_url": "https://api.github.com/users/amitbravo/events{/privacy}", "received_events_url": "https://api.github.com/users/amitbravo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/44", "html_url": "https://github.com/lovell/sharp/milestone/44", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/44/labels", "id": 3583639, "node_id": "MDk6TWlsZXN0b25lMzU4MzYzOQ==", "number": 44, "title": "v0.20.7", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2018-08-20T13:42:23Z", "updated_at": "2018-08-21T11:22:09Z", "due_on": null, "closed_at": "2018-08-21T11:22:09Z"}, "comments": 17, "created_at": "2018-08-20T11:57:45Z", "updated_at": "2018-08-21T11:21:50Z", "closed_at": "2018-08-21T11:21:50Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\r\nnpm ERR! Linux 4.4.0-133-generic\r\nnpm ERR! argv \"/nodejs/bin/node\" \"/nodejs/bin/npm\" \"--global-style\" \"--production\" \"--fetch-retries=5\" \"--fetch-retry-factor=2\" \"--fetch-retry-mintimeout=1000\" \"install\" \"/workspace\"\r\nnpm ERR! node v6.14.0\r\nnpm ERR! npm  v3.10.10\r\nnpm ERR! code ELIFECYCLE\r\n\r\nnpm ERR! sharp@0.20.6 install: `(node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild && node install/dll-copy)`\r\nnpm ERR! Exit status 1\r\nnpm ERR! \r\nnpm ERR! Failed at the sharp@0.20.6 install script '(node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild && node install/dll-copy)'.\r\nnpm ERR! Make sure you have the latest version of node.js and npm installed.\r\nnpm ERR! If you do, this is most likely a problem with the sharp package,\r\nnpm ERR! not with npm itself.\r\nnpm ERR! Tell the author that this fails on your system:\r\nnpm ERR!     (node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild && node install/dll-copy)\r\nnpm ERR! You can get information on how to open an issue for this project with:\r\nnpm ERR!     npm bugs sharp\r\nnpm ERR! Or if that isn't available, you can get their info via:\r\nnpm ERR!     npm owner ls sharp\r\nnpm ERR! There is likely additional logging output above.\r\n\r\nnpm ERR! Please include the following file with any support request:\r\nnpm ERR!     /workspace/npm-debug.log\r\n\r\n\r\n\r\nFunctions deploy had errors. To continue deploying other features (such as database), run:\r\n    firebase deploy --except functions\r\n\r\nError: Functions did not deploy properly.\r\n\r\n==============\r\nI did brew upgrade npm  , result =  npm 10.9.0 already installed\r\n\r\n\r\n\r\n\r\nPackage.json\r\n````\r\n{\r\n  \"name\": \"functions\",\r\n  \"description\": \"Cloud Functions for Firebase\",\r\n  \"scripts\": {\r\n    \"serve\": \"firebase serve --only functions\",\r\n    \"shell\": \"firebase functions:shell\",\r\n    \"start\": \"npm run shell\",\r\n    \"deploy\": \"firebase deploy --only functions\",\r\n    \"logs\": \"firebase functions:log\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@google-cloud/storage\": \"^1.7.0\",\r\n    \"@google-cloud/vision\": \"^0.21.0\",\r\n    \"firebase-admin\": \"^6.0.0\",\r\n    \"firebase-functions\": \"^2.0.4\",\r\n    \"lodash\": \"^4.17.10\",\r\n    \"path\": \"^0.12.7\",\r\n    \"request-promise\": \"^4.2.2\",\r\n    \"sendotp\": \"^1.2.9\",\r\n    \"sharp\": \"^0.20.6\"\r\n  },\r\n  \"private\": true\r\n}\r\n````", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/1345/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/1345/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/301", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/301/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/301/events", "html_url": "https://github.com/lovell/sharp/issues/301", "id": 117107176, "node_id": "MDU6SXNzdWUxMTcxMDcxNzY=", "number": 301, "title": "SVG rendering seems incorrect.", "user": {"login": "izaakschroeder", "id": 206921, "node_id": "MDQ6VXNlcjIwNjkyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/206921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/izaakschroeder", "html_url": "https://github.com/izaakschroeder", "followers_url": "https://api.github.com/users/izaakschroeder/followers", "following_url": "https://api.github.com/users/izaakschroeder/following{/other_user}", "gists_url": "https://api.github.com/users/izaakschroeder/gists{/gist_id}", "starred_url": "https://api.github.com/users/izaakschroeder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/izaakschroeder/subscriptions", "organizations_url": "https://api.github.com/users/izaakschroeder/orgs", "repos_url": "https://api.github.com/users/izaakschroeder/repos", "events_url": "https://api.github.com/users/izaakschroeder/events{/privacy}", "received_events_url": "https://api.github.com/users/izaakschroeder/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/11", "html_url": "https://github.com/lovell/sharp/milestone/11", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/11/labels", "id": 1205986, "node_id": "MDk6TWlsZXN0b25lMTIwNTk4Ng==", "number": 11, "title": "v0.12.0", "description": "\"look\"", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2015-07-13T21:44:37Z", "updated_at": "2015-11-23T14:05:42Z", "due_on": "2015-11-23T00:00:00Z", "closed_at": "2015-11-23T14:05:42Z"}, "comments": 17, "created_at": "2015-11-16T11:45:54Z", "updated_at": "2015-11-22T10:08:15Z", "closed_at": "2015-11-22T10:08:15Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I have attempted to write a webpack loader for the glorious sharp. It is available here: https://github.com/izaakschroeder/sharp-loader. It's supposed to expose most of sharp to webpack to do things like create 1x,2x,3x versions of assets or webp for chrome and so on. The bug I'm dealing with right now is just about SVG though.\n\nSometimes original assets are present in SVG and PNG is needed for browsers that don't support SVG (_cough_ old satanic versions of IE).\n\nIn the spirit of that, using the aforementioned loader to do something like:\n\n``` javascript\nrequire('./visa.svg?height=100&format=png');\n```\n\nShould generate a sensible image (and indeed `vips pngsave visa.svg visa.png` produces something sane). Sadly, `sharp` appears to produce unintelligible gibberish when it comes to SVGs :cry: \n\n![test](https://cloud.githubusercontent.com/assets/206921/11181068/48a1de0a-8c14-11e5-84e0-f58ba3e5b2c8.png)\n\n^ Generated via `vips` command-line.\n\n![visa d556617b](https://cloud.githubusercontent.com/assets/206921/11181082/5b358d8c-8c14-11e5-8a94-7388c6b5c29d.png)\n\n^ Generated via `sharp`.\n\n![visa f5c80e77](https://cloud.githubusercontent.com/assets/206921/11181086/6302c7c8-8c14-11e5-8f4a-0d07cd6bdd68.png)\n\n^ Generated via `sharp` with `flatten()` applied first.\n\nNot quite sure what's going on here, but some general direction to troubleshooting this would be super appreciated :smile: \n\n```\nvips-8.1.1-Thu Nov 12 18:00:15 PST 2015\nsharp@0.11.4\n```\n\nThe results come from running this example: https://github.com/izaakschroeder/sharp-loader/tree/master/example and should be reproducible by something like:\n\n``` sh\ngit clone git@github.com:izaakschroeder/sharp-loader.git\ncd sharp-loader\nnpm install\ncd example\nnpm install webpack\n./node_modules/.bin/webpack\n```\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/301/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/4125", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/4125/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/4125/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/4125/events", "html_url": "https://github.com/lovell/sharp/issues/4125", "id": 2336832149, "node_id": "I_kwDOALqQ4s6LSTqV", "number": 4125, "title": "Windows: Experiencing silent crash when attempting to convert a JPEG to a GIF", "user": {"login": "travispaul", "id": 2118993, "node_id": "MDQ6VXNlcjIxMTg5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2118993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/travispaul", "html_url": "https://github.com/travispaul", "followers_url": "https://api.github.com/users/travispaul/followers", "following_url": "https://api.github.com/users/travispaul/following{/other_user}", "gists_url": "https://api.github.com/users/travispaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/travispaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/travispaul/subscriptions", "organizations_url": "https://api.github.com/users/travispaul/orgs", "repos_url": "https://api.github.com/users/travispaul/repos", "events_url": "https://api.github.com/users/travispaul/events{/privacy}", "received_events_url": "https://api.github.com/users/travispaul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 707935264, "node_id": "MDU6TGFiZWw3MDc5MzUyNjQ=", "url": "https://api.github.com/repos/lovell/sharp/labels/ready-to-ship", "name": "ready-to-ship", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/102", "html_url": "https://github.com/lovell/sharp/milestone/102", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/102/labels", "id": 11096289, "node_id": "MI_kwDOALqQ4s4AqVDh", "number": 102, "title": "v0.33.5", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2024-05-24T17:03:02Z", "updated_at": "2024-08-16T13:22:00Z", "due_on": null, "closed_at": "2024-08-16T13:22:00Z"}, "comments": 16, "created_at": "2024-06-05T21:04:10Z", "updated_at": "2024-08-16T13:19:14Z", "closed_at": "2024-08-16T13:19:14Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "<!-- If this issue relates to installation, please use https://github.com/lovell/sharp/issues/new?labels=installation&template=installation.md instead. -->\r\n\r\n## Possible bug\r\n\r\n### Is this a possible bug in a feature of sharp, unrelated to installation?\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] Running `npm install sharp` completes without error.\r\n- [x] Running `node -e \"require('sharp')\"` completes without error.\r\n\r\nIf you cannot confirm both of these, please open an [installation issue](https://github.com/lovell/sharp/issues/new?labels=installation&template=installation.md) instead.\r\n\r\n### Are you using the latest version of sharp?\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\r\n\r\nIf you cannot confirm this, please upgrade to the latest version and try again before opening an issue.\r\n\r\nIf you are using another package which depends on a version of `sharp` that is not the latest, please open an issue against that package instead.\r\n\r\n### What is the output of running `npx envinfo --binaries --system --npmPackages=sharp --npmGlobalPackages=sharp`?\r\n\r\n```\r\n  System:\r\n    OS: Windows 11 10.0.22631\r\n    CPU: (32) x64 13th Gen Intel(R) Core(TM) i9-13900\r\n    Memory: 38.11 GB / 63.70 GB\r\n  Binaries:\r\n    Node: 18.20.2 - X:\\bin\\nodejs\\node.EXE\r\n    npm: 10.5.0 - X:\\bin\\nodejs\\npm.CMD\r\n  npmPackages:\r\n    sharp: ^0.33.4 => 0.33.4\r\n```\r\n\r\n### Does this problem relate to file caching?\r\n\r\nThe default behaviour of libvips is to cache input files, which can lead to `EBUSY` or `EPERM` errors on Windows.\r\nUse [`sharp.cache(false)`](https://sharp.pixelplumbing.com/api-utility#cache) to switch this feature off.\r\n\r\n- [x] Adding `sharp.cache(false)` does not fix this problem.\r\n\r\n### Does this problem relate to images appearing to have been rotated by 90 degrees?\r\n\r\nImages that contain EXIF Orientation metadata are not auto-oriented. By default, EXIF metadata is removed.\r\n\r\n- To auto-orient pixel values use the parameter-less [`rotate()`](https://sharp.pixelplumbing.com/api-operation#rotate) operation.\r\n- To retain EXIF Orientation use [`keepExif()`](https://sharp.pixelplumbing.com/api-output#keepexif).\r\n\r\n- [x] Using `rotate()` or `keepExif()` does not fix this problem.\r\n\r\n### What are the steps to reproduce?\r\n\r\nUsing the reproducer, attempt to convert the attached JPEG image, into a GIF.\r\n\r\n### What is the expected behaviour?\r\n\r\nThe JPEG input image is converted into a GIF image or an error is returned in the `catch()` handler.\r\n\r\n### Please provide a minimal, standalone code sample, without other dependencies, that demonstrates this problem\r\n\r\nRunning the following script as: `node ./index.js 1.jpg`\r\nWhere `1.jpg` is the attached image will cause node to crash and return with an exit code of `5`\r\nThe file `converted.gif` will be created but contains 0 bytes.\r\nNeither the `then()` or `catch()` handlers are invoked. \r\n\r\n```js\r\nconst sharp = require('sharp')\r\nconst filename = process.argv[2]\r\nconsole.log(`Loading file: '${filename}'`)\r\nsharp(filename)\r\n  .toFormat('gif')\r\n  .toFile(`converted.gif`)\r\n  .then(info => {\r\n    console.log('got info:', info)\r\n  })\r\n  .catch(error => {\r\n    console.error('got error:', error)\r\n  })\r\n```\r\n\r\n### Please provide sample image(s) that help explain this problem\r\n\r\n![1](https://github.com/lovell/sharp/assets/2118993/e9a3fdbf-b30f-4b60-8e73-9f98a5446695)\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/4125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/4125/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/3893", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/3893/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/3893/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/3893/events", "html_url": "https://github.com/lovell/sharp/issues/3893", "id": 2036704867, "node_id": "I_kwDOALqQ4s55ZaZj", "number": 3893, "title": "Some images are only displayed in black & white, old Intel (before 2009) and QEMU-emulated CPUs", "user": {"login": "Zharkan", "id": 53452535, "node_id": "MDQ6VXNlcjUzNDUyNTM1", "avatar_url": "https://avatars.githubusercontent.com/u/53452535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zharkan", "html_url": "https://github.com/Zharkan", "followers_url": "https://api.github.com/users/Zharkan/followers", "following_url": "https://api.github.com/users/Zharkan/following{/other_user}", "gists_url": "https://api.github.com/users/Zharkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zharkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zharkan/subscriptions", "organizations_url": "https://api.github.com/users/Zharkan/orgs", "repos_url": "https://api.github.com/users/Zharkan/repos", "events_url": "https://api.github.com/users/Zharkan/events{/privacy}", "received_events_url": "https://api.github.com/users/Zharkan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 236294687, "node_id": "MDU6TGFiZWwyMzYyOTQ2ODc=", "url": "https://api.github.com/repos/lovell/sharp/labels/blocked-upstream-dependency", "name": "blocked-upstream-dependency", "color": "006666", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/99", "html_url": "https://github.com/lovell/sharp/milestone/99", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/99/labels", "id": 10345272, "node_id": "MI_kwDOALqQ4s4Ands4", "number": 99, "title": "v0.33.2", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2023-12-24T10:25:24Z", "updated_at": "2024-01-12T11:20:43Z", "due_on": null, "closed_at": "2024-01-12T11:20:43Z"}, "comments": 16, "created_at": "2023-12-11T23:25:40Z", "updated_at": "2025-06-23T11:02:08Z", "closed_at": "2024-01-12T11:20:02Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "## Possible install-time or require-time problem\r\n\r\n\r\n- [x] I have read the [documentation relating to installation](https://sharp.pixelplumbing.com/install).\r\n\r\n### Are you using the latest version of sharp?\r\n\r\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\r\n\r\n### Are you using a supported runtime?\r\n\r\n- [x] I am using Node.js with a version that satisfies `^18.17.0 || ^20.3.0 || >=21.0.0`\r\n\r\n### Are you using a supported package manager and installing optional dependencies?\r\n\r\n- [x] I am using npm >= 9.6.5 with `--include=optional`\r\n\r\n### What is the complete output of running `npm install --verbose --foreground-scripts sharp` in an empty directory?\r\n\r\n<details>\r\n\r\n```\r\nnpm info using npm@10.2.5\r\nnpm info using node@v20.10.0\r\nnpm verb title npm install sharp\r\nnpm verb argv \"install\" \"--loglevel\" \"verbose\" \"--foreground-scripts\" \"sharp\"\r\nnpm verb logfile logs-max:10 dir:/home/media_gestion/.npm/_logs/2023-12-11T23_18_28_144Z-\r\nnpm verb logfile /home/media_gestion/.npm/_logs/2023-12-11T23_18_28_144Z-debug-0.log\r\nnpm http fetch GET 200 https://registry.npmjs.org/sharp 353ms (cache revalidated)\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/fsevents\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-win32-x64-msvc\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-win32-ia32-msvc\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-win32-arm64-msvc\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-linux-arm64-musl\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-linux-arm64-gnu\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-darwin-x64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@next/swc-darwin-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-win32-x64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-win32-ia32\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-wasm32\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@emnapi/runtime\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-linuxmusl-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-linux-s390x\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-linux-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-linux-arm\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-linuxmusl-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-linux-s390x\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-linux-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-linux-arm\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-darwin-x64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-libvips-darwin-arm64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-darwin-x64\r\nnpm verb reify failed optional dependency /path/to/project/node_modules/@img/sharp-darwin-arm64\r\nnpm http fetch POST 200 https://registry.npmjs.org/-/npm/v1/security/advisories/bulk 308ms\r\n```\r\n\r\n</details>\r\n\r\n### What is the output of running `npx envinfo --binaries --system --npmPackages=sharp --npmGlobalPackages=sharp`?\r\n\r\n```\r\n  System:\r\n    OS: Linux 5.15 Ubuntu 22.04.3 LTS 22.04.3 LTS (Jammy Jellyfish)\r\n    CPU: (8) x64 Common KVM processor\r\n    Memory: 2.10 GB / 5.16 GB\r\n    Container: Yes\r\n    Shell: 5.8.1 - /usr/bin/zsh\r\n  Binaries:\r\n    Node: 20.10.0 - /usr/bin/node\r\n    Yarn: 1.22.19 - ~/.npm-global/bin/yarn\r\n    npm: 10.2.5 - ~/.npm-global/bin/npm\r\n  npmPackages:\r\n    sharp: ^0.33.0 => 0.33.0 \r\n```\r\n\r\nI'm building my project with Sharp (Next.js app) and some images are black & white. There's also a message when I'm running `npm run build` : \r\n\r\n```\r\n \u2713 Linting and checking validity of types    \r\n   \u25b2 Next.js 14.0.4\r\n   - Environments: .env.production\r\n   - Experiments (use at your own risk):\r\n     \u00b7 scrollRestoration\r\n\r\n   Creating an optimized production build  ...WARNING: CPU supports 0x6000000000004000, software requires 0x4000000000005000\r\nWARNING: CPU supports 0x6000000000004000, software requires 0x4000000000005000\r\nWARNING: CPU supports 0x6000000000004000, software requires 0x4000000000005000\r\n   Creating an optimized production build  .WARNING: CPU supports 0x6000000000004000, software requires 0x4000000000005000\r\nWARNING: CPU supports 0x6000000000004000, software requires 0x4000000000005000\r\n```\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/3893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/3893/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/3222", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/3222/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/3222/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/3222/events", "html_url": "https://github.com/lovell/sharp/issues/3222", "id": 1231760478, "node_id": "I_kwDOALqQ4s5Jayxe", "number": 3222, "title": "arm64, palette-based PNG input, Incorrect checksum for freed object", "user": {"login": "headfire94", "id": 14371261, "node_id": "MDQ6VXNlcjE0MzcxMjYx", "avatar_url": "https://avatars.githubusercontent.com/u/14371261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/headfire94", "html_url": "https://github.com/headfire94", "followers_url": "https://api.github.com/users/headfire94/followers", "following_url": "https://api.github.com/users/headfire94/following{/other_user}", "gists_url": "https://api.github.com/users/headfire94/gists{/gist_id}", "starred_url": "https://api.github.com/users/headfire94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/headfire94/subscriptions", "organizations_url": "https://api.github.com/users/headfire94/orgs", "repos_url": "https://api.github.com/users/headfire94/repos", "events_url": "https://api.github.com/users/headfire94/events{/privacy}", "received_events_url": "https://api.github.com/users/headfire94/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 236294687, "node_id": "MDU6TGFiZWwyMzYyOTQ2ODc=", "url": "https://api.github.com/repos/lovell/sharp/labels/blocked-upstream-dependency", "name": "blocked-upstream-dependency", "color": "006666", "default": false, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 16, "created_at": "2022-05-10T22:17:27Z", "updated_at": "2023-02-05T00:05:14Z", "closed_at": "2022-06-13T15:29:52Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "<!-- If this issue relates to installation, please use https://github.com/lovell/sharp/issues/new?labels=installation&template=installation.md instead. -->\r\n\r\n## Possible bug\r\n\r\nRandomly throws error\r\n```\r\nnode(35349,0x170cab000) malloc: Incorrect checksum for freed object 0x114018800: probably modified after being freed.\r\nCorrupt value: 0x709090907090909\r\nnode(35349,0x170cab000) malloc: *** set a breakpoint in malloc_error_break to debug\r\n```\r\n\r\nOr\r\n`[1]    35277 segmentation fault  node index.js`\r\n\r\n### Is this a possible bug in a feature of sharp, unrelated to installation?\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] Running `npm install sharp` completes without error.\r\n- [x] Running `node -e \"require('sharp')\"` completes without error.\r\n\r\n### Are you using the latest version of sharp?\r\n\r\n<!-- Please place an [x] in the box to confirm. -->\r\n\r\n- [x] I am using the latest version of `sharp` as reported by `npm view sharp dist-tags.latest`.\r\n\r\nIf you cannot confirm this, please upgrade to the latest version and try again before opening an issue.\r\n\r\nIf you are using another package which depends on a version of `sharp` that is not the latest, please open an issue against that package instead.\r\n\r\n### What is the output of running `npx envinfo --binaries --system --npmPackages=sharp --npmGlobalPackages=sharp`?\r\n\r\n<!-- Please provide output of the above command here. -->\r\n\r\n```\r\n\r\n  System:\r\n    OS: macOS 12.3.1\r\n    CPU: (10) arm64 Apple M1 Max\r\n    Memory: 1.53 GB / 32.00 GB\r\n    Shell: 5.8 - /bin/zsh\r\n  Binaries:\r\n    Node: 16.9.1 - ~/.nvm/versions/node/v16.9.1/bin/node\r\n    Yarn: 1.22.18 - /opt/homebrew/Cellar/yvm/4.1.4/shim/yarn\r\n    npm: 7.21.1 - ~/.nvm/versions/node/v16.9.1/bin/npm\r\n    Watchman: 2022.03.21.00 - /opt/homebrew/bin/watchman\r\n  npmPackages:\r\n    sharp: ^0.30.4 => 0.30.4 \r\n  npmGlobalPackages:\r\n    sharp: 0.30.4\r\n\r\n```\r\n\r\n### What are the steps to reproduce?\r\n\r\n`git clone https://github.com/headfire94/sharp-bug-report`\r\n`node index.js` - few times\r\n\r\n<!-- Please enter steps to reproduce here. -->\r\n\r\n### What is the expected behaviour?\r\n\r\ngenerate compressed PNG\r\n\r\n<!-- Please enter the expected behaviour here. -->\r\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/3222/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/3222/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/321", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/321/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/321/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/321/events", "html_url": "https://github.com/lovell/sharp/issues/321", "id": 120582684, "node_id": "MDU6SXNzdWUxMjA1ODI2ODQ=", "number": 321, "title": "Ensure embedded CMYK ICC profiles with \"relative\" intents use a \"perceptual\" intent for their output", "user": {"login": "vlapo", "id": 2484063, "node_id": "MDQ6VXNlcjI0ODQwNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/2484063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlapo", "html_url": "https://github.com/vlapo", "followers_url": "https://api.github.com/users/vlapo/followers", "following_url": "https://api.github.com/users/vlapo/following{/other_user}", "gists_url": "https://api.github.com/users/vlapo/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlapo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlapo/subscriptions", "organizations_url": "https://api.github.com/users/vlapo/orgs", "repos_url": "https://api.github.com/users/vlapo/repos", "events_url": "https://api.github.com/users/vlapo/events{/privacy}", "received_events_url": "https://api.github.com/users/vlapo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": {"url": "https://api.github.com/repos/lovell/sharp/milestones/16", "html_url": "https://github.com/lovell/sharp/milestone/16", "labels_url": "https://api.github.com/repos/lovell/sharp/milestones/16/labels", "id": 1445897, "node_id": "MDk6TWlsZXN0b25lMTQ0NTg5Nw==", "number": 16, "title": "v0.12.1", "description": "", "creator": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2015-12-05T23:31:20Z", "updated_at": "2015-12-23T21:09:53Z", "due_on": null, "closed_at": "2015-12-23T21:09:53Z"}, "comments": 16, "created_at": "2015-12-05T19:45:12Z", "updated_at": "2016-02-09T12:23:24Z", "closed_at": "2015-12-12T11:12:29Z", "assignee": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi, \n\nA little problem with colors after resize:\n\nOriginal and resized:\nhttps://drive.google.com/folderview?id=0BzIT1Z0iuXrUR3JZOTNjMU85TFU&usp=sharing\n\nCode: \n\n``` javascript\nvar sharp = require('sharp');\n\nsharp('./seamless-drops-2.jpg').resize(1000, 1000)\n.withMetadata()\n.max()\n.jpeg()\n.toFile('output-test.jpg');\n```\n\nI think this is because original is CMYK and output is sRGB (https://github.com/lovell/sharp/issues/218). Is there any way how to achieve right colors ?\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/321/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/lovell/sharp/issues/99", "repository_url": "https://api.github.com/repos/lovell/sharp", "labels_url": "https://api.github.com/repos/lovell/sharp/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/lovell/sharp/issues/99/comments", "events_url": "https://api.github.com/repos/lovell/sharp/issues/99/events", "html_url": "https://github.com/lovell/sharp/issues/99", "id": 44921886, "node_id": "MDU6SXNzdWU0NDkyMTg4Ng==", "number": 99, "title": "vips_colourspace: no known route between 'cmyk' and 'srgb'", "user": {"login": "jeromegv", "id": 86115, "node_id": "MDQ6VXNlcjg2MTE1", "avatar_url": "https://avatars.githubusercontent.com/u/86115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromegv", "html_url": "https://github.com/jeromegv", "followers_url": "https://api.github.com/users/jeromegv/followers", "following_url": "https://api.github.com/users/jeromegv/following{/other_user}", "gists_url": "https://api.github.com/users/jeromegv/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromegv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromegv/subscriptions", "organizations_url": "https://api.github.com/users/jeromegv/orgs", "repos_url": "https://api.github.com/users/jeromegv/repos", "events_url": "https://api.github.com/users/jeromegv/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromegv/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 52750122, "node_id": "MDU6TGFiZWw1Mjc1MDEyMg==", "url": "https://api.github.com/repos/lovell/sharp/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 16, "created_at": "2014-10-05T17:05:02Z", "updated_at": "2014-11-06T19:46:38Z", "closed_at": "2014-11-06T19:46:38Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi\n\nI'm trying to resize an image with sharp and I get this error:\nvips_colourspace: no known route between 'cmyk' and 'srgb'\nvips_image_pio_input: no image data\n\nI'm using vips: stable 7.40.10 (installed with homebrew on mac)\n\nThe image is here:\nhttps://infinitely-production.s3.amazonaws.com/uploads/assets/attachment/5187ae04f3317f2f1f00164a/Jacinto_Lirio_kwaderno.jpg\n\nHere's the full metadata of the image\n\nidentify -verbose Jacinto_Lirio_kwaderno.jpg\n\nImage: Jacinto_Lirio_kwaderno.jpg\nFormat: JPEG (Joint Photographic Experts Group JFIF format)\nMime type: image/jpeg\nClass: DirectClass\nGeometry: 4961x3508+0+0\nResolution: 300x300\nPrint size: 16.5367x11.6933\nUnits: PixelsPerInch\nType: ColorSeparation\nEndianess: Undefined\nColorspace: CMYK\nDepth: 8-bit\nChannel depth:\ncyan: 8-bit\nmagenta: 8-bit\nyellow: 8-bit\nblack: 8-bit\nChannel statistics:\nPixels: 17403188\nCyan:\nmin: 0 (0)\nmax: 100 (0.392157)\nmean: 3.0409 (0.0119251)\nstandard deviation: 16.4575 (0.0645393)\nkurtosis: 25.6952\nskewness: 5.25657\nMagenta:\nmin: 0 (0)\nmax: 135 (0.529412)\nmean: 4.28151 (0.0167902)\nstandard deviation: 23.1797 (0.0909008)\nkurtosis: 25.6952\nskewness: 5.25664\nYellow:\nmin: 0 (0)\nmax: 255 (1)\nmean: 8.29823 (0.0325421)\nstandard deviation: 44.9226 (0.176167)\nkurtosis: 25.6945\nskewness: 5.25658\nBlack:\nmin: 0 (0)\nmax: 49 (0.192157)\nmean: 1.50316 (0.00589474)\nstandard deviation: 8.13645 (0.0319076)\nkurtosis: 25.6944\nskewness: 5.2565\nImage statistics:\nOverall:\nmin: 0 (0)\nmax: 255 (1)\nmean: 4.28095 (0.016788)\nstandard deviation: 26.8905 (0.105453)\nkurtosis: 61.5876\nskewness: 7.59952\nTotal ink density: 209.02%\nRendering intent: Perceptual\nGamma: 0.454545\nChromaticity:\nred primary: (0.64,0.33)\ngreen primary: (0.3,0.6)\nblue primary: (0.15,0.06)\nwhite point: (0.3127,0.329)\nBackground color: cmyk(255,255,255,0)\nBorder color: cmyk(223,223,223,0)\nMatte color: cmyk(189,189,189,0)\nTransparent color: cmyk(0,0,0,0)\nInterlace: None\nIntensity: Undefined\nCompose: Over\nPage geometry: 4961x3508+0+0\nDispose: Undefined\nIterations: 0\nCompression: JPEG\nQuality: 99\nOrientation: Undefined\nProperties:\ndate:create: 2014-10-04T12:55:45-04:00\ndate:modify: 2013-05-06T09:20:13-04:00\njpeg:colorspace: 4\njpeg:sampling-factor: 1x1,1x1,1x1,1x1\nsignature: e2bee6d037910f0b23db5881471ba9e735bfa6e1ac26fad8a6eda20a1b277ed2\nProfiles:\nProfile-8bim: 28 bytes\nProfile-icc: 557168 bytes\nArtifacts:\nfilename: Jacinto_Lirio_kwaderno.jpg\nverbose: true\nTainted: False\nFilesize: 2.595MB\nNumber pixels: 17.4M\nPixels per second: 47.04MB\nUser time: 0.370u\nElapsed time: 0:01.370\nVersion: ImageMagick 6.8.9-7 Q16 x86_64 2014-08-31 http://www.imagemagick.org\n\nI've seen a similar bug to that on libvips tracker, but it's apparently already fixed (and it was affecting vipsthumbnail which I don't think is what we use here)\nhttps://github.com/jcupitt/libvips/issues/152#issuecomment-57929979\n", "closed_by": {"login": "lovell", "id": 210965, "node_id": "MDQ6VXNlcjIxMDk2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovell", "html_url": "https://github.com/lovell", "followers_url": "https://api.github.com/users/lovell/followers", "following_url": "https://api.github.com/users/lovell/following{/other_user}", "gists_url": "https://api.github.com/users/lovell/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovell/subscriptions", "organizations_url": "https://api.github.com/users/lovell/orgs", "repos_url": "https://api.github.com/users/lovell/repos", "events_url": "https://api.github.com/users/lovell/events{/privacy}", "received_events_url": "https://api.github.com/users/lovell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/lovell/sharp/issues/99/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lovell/sharp/issues/99/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}]}