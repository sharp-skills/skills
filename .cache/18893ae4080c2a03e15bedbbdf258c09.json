{"d": [{"url": "https://api.github.com/repos/pinojs/pino/issues/990", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/990/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/990/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/990/events", "html_url": "https://github.com/pinojs/pino/issues/990", "id": 839692211, "node_id": "MDU6SXNzdWU4Mzk2OTIyMTE=", "number": 990, "title": "CPU Hang with infinite decirc", "user": {"login": "SebastienElet", "id": 541937, "node_id": "MDQ6VXNlcjU0MTkzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/541937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SebastienElet", "html_url": "https://github.com/SebastienElet", "followers_url": "https://api.github.com/users/SebastienElet/followers", "following_url": "https://api.github.com/users/SebastienElet/following{/other_user}", "gists_url": "https://api.github.com/users/SebastienElet/gists{/gist_id}", "starred_url": "https://api.github.com/users/SebastienElet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SebastienElet/subscriptions", "organizations_url": "https://api.github.com/users/SebastienElet/orgs", "repos_url": "https://api.github.com/users/SebastienElet/repos", "events_url": "https://api.github.com/users/SebastienElet/events{/privacy}", "received_events_url": "https://api.github.com/users/SebastienElet/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 25, "created_at": "2021-03-24T12:53:15Z", "updated_at": "2022-02-02T14:14:51Z", "closed_at": "2021-10-26T12:26:15Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello,\r\n\r\nI experienced downtime from pino logger.\r\nA developer accidentally logged an express `req` in pino, and on catch It made our api hang with full CPU.\r\n\r\nHere a small exemple of the expressjs middleware used : \r\n```js\r\nimport { NextFunction, Request, Response } from 'express'\r\nimport pino from 'pino'\r\n\r\nexport const webhook = (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction,\r\n) => {\r\n  const logger = pino({\r\n    name: 'test',\r\n    prettyPrint: {\r\n      colorize: true,\r\n      translateTime: true,\r\n      messageFormat: '{hostname} - {pid} - {msg}',\r\n      ignore: 'hostname,pid',\r\n    },\r\n  })\r\n\r\n  logger.error({ req })\r\n}\r\n```\r\n\r\n**Node** version : 12.9.0\r\n**Typescript** : 4.1.3\r\n**Pino** : 6.11.2\r\n**Pino-pretty** : 4.7.1\r\n**Express** : 4.17.1\r\n\r\nHere is a profiler trace\r\n<img width=\"1076\" alt=\"Capture d\u2019\u00e9cran 2021-03-24 \u00e0 13 51 32\" src=\"https://user-images.githubusercontent.com/541937/112313397-159df580-8ca8-11eb-858f-68d948e26c16.png\">", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/990/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/491", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/491/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/491/events", "html_url": "https://github.com/pinojs/pino/issues/491", "id": 351728695, "node_id": "MDU6SXNzdWUzNTE3Mjg2OTU=", "number": 491, "title": "Doesn't work with pm2?", "user": {"login": "ronag", "id": 3065230, "node_id": "MDQ6VXNlcjMwNjUyMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3065230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronag", "html_url": "https://github.com/ronag", "followers_url": "https://api.github.com/users/ronag/followers", "following_url": "https://api.github.com/users/ronag/following{/other_user}", "gists_url": "https://api.github.com/users/ronag/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronag/subscriptions", "organizations_url": "https://api.github.com/users/ronag/orgs", "repos_url": "https://api.github.com/users/ronag/repos", "events_url": "https://api.github.com/users/ronag/events{/privacy}", "received_events_url": "https://api.github.com/users/ronag/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 19, "created_at": "2018-08-17T20:29:12Z", "updated_at": "2022-02-03T00:02:58Z", "closed_at": "2018-08-19T16:22:14Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I can't see anything from pino when running through pm2 & pm2 logs?", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/491/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1861", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1861/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1861/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1861/events", "html_url": "https://github.com/pinojs/pino/issues/1861", "id": 2030759605, "node_id": "I_kwDOAxcHIs55Cu61", "number": 1861, "title": "Log level functionality broken when describing `transmit`", "user": {"login": "kyranjamie", "id": 1618764, "node_id": "MDQ6VXNlcjE2MTg3NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1618764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyranjamie", "html_url": "https://github.com/kyranjamie", "followers_url": "https://api.github.com/users/kyranjamie/followers", "following_url": "https://api.github.com/users/kyranjamie/following{/other_user}", "gists_url": "https://api.github.com/users/kyranjamie/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyranjamie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyranjamie/subscriptions", "organizations_url": "https://api.github.com/users/kyranjamie/orgs", "repos_url": "https://api.github.com/users/kyranjamie/repos", "events_url": "https://api.github.com/users/kyranjamie/events{/privacy}", "received_events_url": "https://api.github.com/users/kyranjamie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 18, "created_at": "2023-12-07T13:24:59Z", "updated_at": "2024-08-16T00:05:05Z", "closed_at": "2024-07-12T12:32:15Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We're using Pino in the [Leather web extension project](https://github.com/leather-wallet/extension/blob/fd5be9b0cde701f720207535ed09c1ce436dc60c/src/shared/logger.ts#L21-L34), with the config:\r\n\r\n```ts\r\nconst pinoLogger = pino({\r\n  enabled: !IS_TEST_ENV,\r\n  level: 'info',\r\n  browser: {\r\n    asObject: false,\r\n    transmit: {\r\n      level: 'info',\r\n      send(_level, logEvent) {\r\n        if (!chrome) return;\r\n        logs$.next(logEvent);\r\n      },\r\n    },\r\n  },\r\n});\r\n```\r\n\r\nNot sure when this was introduced, but lately, `pinoLogger.debug` statements have been logging to console, despite the level being `info`. In debugging this, I've noticed that when removing the `browser.transmit` object, the logging behaviour works as expected.", "closed_by": {"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1861/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1774", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1774/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1774/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1774/events", "html_url": "https://github.com/pinojs/pino/issues/1774", "id": 1840063223, "node_id": "I_kwDOAxcHIs5trSL3", "number": 1774, "title": "When having single transport in pipelining the worker exit in the middle", "user": {"login": "rluvaton", "id": 16746759, "node_id": "MDQ6VXNlcjE2NzQ2NzU5", "avatar_url": "https://avatars.githubusercontent.com/u/16746759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rluvaton", "html_url": "https://github.com/rluvaton", "followers_url": "https://api.github.com/users/rluvaton/followers", "following_url": "https://api.github.com/users/rluvaton/following{/other_user}", "gists_url": "https://api.github.com/users/rluvaton/gists{/gist_id}", "starred_url": "https://api.github.com/users/rluvaton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rluvaton/subscriptions", "organizations_url": "https://api.github.com/users/rluvaton/orgs", "repos_url": "https://api.github.com/users/rluvaton/repos", "events_url": "https://api.github.com/users/rluvaton/events{/privacy}", "received_events_url": "https://api.github.com/users/rluvaton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 17, "created_at": "2023-08-07T19:11:00Z", "updated_at": "2023-09-11T00:04:06Z", "closed_at": "2023-08-11T08:36:06Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I know pipelining is intended to have multiple transports but in our tests, we sometimes don't have transport and only have our transformer as a transport.\r\n\r\n## Reproduction:\r\n\r\nGiven this code:\r\n```js\r\nconst pino = require(\"pino\");\r\nconst { setTimeout } = require(\"timers/promises\");\r\n\r\nconst log = pino({\r\n  level: \"info\",\r\n  transport: {\r\n    pipeline: [\r\n      {\r\n        target: \"./empty\",\r\n      },\r\n    ],\r\n  },\r\n});\r\n\r\nasync function run() {\r\n  while (true) {\r\n    log.info(\"Hello World!\");\r\n    await setTimeout(1);\r\n  }\r\n}\r\n\r\nrun();\r\n```\r\n\r\nand this transport :\r\n```js\r\n// empty.js\r\nconst build = require(\"pino-abstract-transport\");\r\n\r\nmodule.exports = {\r\n    default: async () =>\r\n        build(async function* (source) {\r\n                for await (const logEntry of source) {\r\n                    yield ''\r\n                }\r\n            },\r\n            {\r\n                // This is needed to be able to pipeline transports.\r\n                enablePipelining: false,\r\n            }),\r\n};\r\n```\r\n\r\nI get:\r\n```\r\nnode:events:491\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: the worker has exited\r\n    at ThreadStream.write (~/dev/tmp/pino-bug/node_modules/thread-stream/index.js:229:19)\r\n    at Pino.write (~/dev/tmp/pino-bug/node_modules/pino/lib/proto.js:217:10)\r\n    at Pino.LOG [as info] (~/dev/tmp/pino-bug/node_modules/pino/lib/tools.js:71:21)\r\n    at run (~/dev/tmp/pino-bug/index.js:20:9)\r\nEmitted 'error' event on ThreadStream instance at:\r\n    at Immediate.<anonymous> (~/dev/tmp/pino-bug/node_modules/thread-stream/index.js:360:12)\r\n    at process.processImmediate (node:internal/timers:476:21)\r\n\r\nNode.js v18.16.0\r\n```\r\n\r\nThe workaround is to add another proxy transport...", "closed_by": {"login": "rluvaton", "id": 16746759, "node_id": "MDQ6VXNlcjE2NzQ2NzU5", "avatar_url": "https://avatars.githubusercontent.com/u/16746759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rluvaton", "html_url": "https://github.com/rluvaton", "followers_url": "https://api.github.com/users/rluvaton/followers", "following_url": "https://api.github.com/users/rluvaton/following{/other_user}", "gists_url": "https://api.github.com/users/rluvaton/gists{/gist_id}", "starred_url": "https://api.github.com/users/rluvaton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rluvaton/subscriptions", "organizations_url": "https://api.github.com/users/rluvaton/orgs", "repos_url": "https://api.github.com/users/rluvaton/repos", "events_url": "https://api.github.com/users/rluvaton/events{/privacy}", "received_events_url": "https://api.github.com/users/rluvaton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1774/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/548", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/548/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/548/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/548/events", "html_url": "https://github.com/pinojs/pino/issues/548", "id": 382813535, "node_id": "MDU6SXNzdWUzODI4MTM1MzU=", "number": 548, "title": "Windows: incorrect encoding on Unicode output", "user": {"login": "budarin", "id": 8055157, "node_id": "MDQ6VXNlcjgwNTUxNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8055157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/budarin", "html_url": "https://github.com/budarin", "followers_url": "https://api.github.com/users/budarin/followers", "following_url": "https://api.github.com/users/budarin/following{/other_user}", "gists_url": "https://api.github.com/users/budarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/budarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/budarin/subscriptions", "organizations_url": "https://api.github.com/users/budarin/orgs", "repos_url": "https://api.github.com/users/budarin/repos", "events_url": "https://api.github.com/users/budarin/events{/privacy}", "received_events_url": "https://api.github.com/users/budarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 17, "created_at": "2018-11-20T19:24:56Z", "updated_at": "2022-02-08T00:03:25Z", "closed_at": "2018-11-22T17:14:14Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I try to log\r\n```bash\r\nlogger.info(`\u0421\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443:')\r\n```\r\nbut see in log\r\n```bash\r\n{\"level\":30,\"time\":1542741475885,\"msg\":\"\u2568\u0431\u2568\u2561\u2564\u0410\u2568\u2593\u2568\u2561\u2564\u0410 \u2568\u2556\u2568\u2591\u2568\u2510\u2564\u0413\u2564\u0419\u2568\u2561\u2568\u255c \u2568\u2510\u2568\u255b \u2568\u2591\u2568\u2524\u2564\u0410\u2568\u2561\u2564\u0411\u2564\u0413:\r\n```", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/548/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/521", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/521/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/521/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/521/events", "html_url": "https://github.com/pinojs/pino/issues/521", "id": 363293871, "node_id": "MDU6SXNzdWUzNjMyOTM4NzE=", "number": 521, "title": "Redaction modifies original object when redacted property is absent", "user": {"login": "dougmoscrop", "id": 586516, "node_id": "MDQ6VXNlcjU4NjUxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/586516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dougmoscrop", "html_url": "https://github.com/dougmoscrop", "followers_url": "https://api.github.com/users/dougmoscrop/followers", "following_url": "https://api.github.com/users/dougmoscrop/following{/other_user}", "gists_url": "https://api.github.com/users/dougmoscrop/gists{/gist_id}", "starred_url": "https://api.github.com/users/dougmoscrop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dougmoscrop/subscriptions", "organizations_url": "https://api.github.com/users/dougmoscrop/orgs", "repos_url": "https://api.github.com/users/dougmoscrop/repos", "events_url": "https://api.github.com/users/dougmoscrop/events{/privacy}", "received_events_url": "https://api.github.com/users/dougmoscrop/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 17, "created_at": "2018-09-24T19:47:18Z", "updated_at": "2022-02-09T00:05:37Z", "closed_at": "2018-10-09T18:17:01Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "`pino-noir` does not exhibit this behaviour; it was quite a surprise that my logged object was being manipulated. Made some `joi` validation very unhappy, but only when the log level happened to be DEBUG ;)\r\n\r\n```js\r\nconst pino = require('.');\r\nconst log = pino({ redact:  { paths: ['obj.foo'] } });\r\n\r\nconst first = {}; <--- obj is empty\r\nconst second = { foo: 'test' };\r\n\r\nlog.info({ obj: first }, 'first');\r\nconsole.log('first', first); <----- obj now has property set to null\r\n\r\nlog.info({ obj: second }, 'second');\r\nconsole.log('second', second);\r\n```\r\n\r\nOutputs:\r\n\r\n```\r\n{\"msg\":\"first\",\"obj\":{}}\r\nfirst { foo: null } \r\n```\r\n```\r\n{\"msg\":\"second\",\"obj\":{\"foo\":\"[Redacted]\"}}\r\nsecond { foo: 'test' }\r\n```\r\n", "closed_by": {"login": "dougmoscrop", "id": 586516, "node_id": "MDQ6VXNlcjU4NjUxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/586516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dougmoscrop", "html_url": "https://github.com/dougmoscrop", "followers_url": "https://api.github.com/users/dougmoscrop/followers", "following_url": "https://api.github.com/users/dougmoscrop/following{/other_user}", "gists_url": "https://api.github.com/users/dougmoscrop/gists{/gist_id}", "starred_url": "https://api.github.com/users/dougmoscrop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dougmoscrop/subscriptions", "organizations_url": "https://api.github.com/users/dougmoscrop/orgs", "repos_url": "https://api.github.com/users/dougmoscrop/repos", "events_url": "https://api.github.com/users/dougmoscrop/events{/privacy}", "received_events_url": "https://api.github.com/users/dougmoscrop/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/521/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1074", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1074/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1074/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1074/events", "html_url": "https://github.com/pinojs/pino/issues/1074", "id": 951344986, "node_id": "MDU6SXNzdWU5NTEzNDQ5ODY=", "number": 1074, "title": "Calling pino.transport() results in \"Error: Not supported\"", "user": {"login": "giuscri", "id": 4048120, "node_id": "MDQ6VXNlcjQwNDgxMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4048120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giuscri", "html_url": "https://github.com/giuscri", "followers_url": "https://api.github.com/users/giuscri/followers", "following_url": "https://api.github.com/users/giuscri/following{/other_user}", "gists_url": "https://api.github.com/users/giuscri/gists{/gist_id}", "starred_url": "https://api.github.com/users/giuscri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giuscri/subscriptions", "organizations_url": "https://api.github.com/users/giuscri/orgs", "repos_url": "https://api.github.com/users/giuscri/repos", "events_url": "https://api.github.com/users/giuscri/events{/privacy}", "received_events_url": "https://api.github.com/users/giuscri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [{"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2021-07-23T08:01:54Z", "updated_at": "2022-02-03T00:03:19Z", "closed_at": "2021-07-23T16:24:14Z", "assignee": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "pino version: '7.0.0-rc.1'\r\n\r\n```\r\n$ cat main.js\r\nrequire(\"pino\").transport({target: \"/dev/null\"})\r\n$ node main.js\r\nevents.js:187\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: Not supported\r\n    at start (/Users/g.crino/pino-poc/node_modules/thread-stream/lib/worker.js:18:39)\r\n    at Object.<anonymous> (/Users/g.crino/pino-poc/node_modules/thread-stream/lib/worker.js:42:1)\r\n    at Module._compile (internal/modules/cjs/loader.js:959:30)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:995:10)\r\n    at Module.load (internal/modules/cjs/loader.js:815:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:727:14)\r\n    at Function.Module.runMain (internal/modules/cjs/loader.js:1047:10)\r\n    at MessagePort.<anonymous> (internal/main/worker_thread.js:139:25)\r\n    at MessagePort.emit (events.js:210:5)\r\n    at MessagePort.onmessage (internal/worker/io.js:70:8)\r\nEmitted 'error' event on ThreadStream instance at:\r\n    at /Users/g.crino/pino-poc/node_modules/thread-stream/index.js:155:16\r\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)\r\n```", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1074/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1074/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/479", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/479/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/479/events", "html_url": "https://github.com/pinojs/pino/issues/479", "id": 349334254, "node_id": "MDU6SXNzdWUzNDkzMzQyNTQ=", "number": 479, "title": "Global serializer not invoked for strings when `base: null`", "user": {"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-08-10T00:17:04Z", "updated_at": "2022-02-07T00:03:36Z", "closed_at": "2019-04-05T11:10:07Z", "assignee": null, "author_association": "MEMBER", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "```js\r\n'use strict'\r\n\r\nconst pino = require('pino')\r\nconst log = pino({\r\n  base: null,\r\n  serializers: {\r\n    [Symbol.for('pino.*')]: (input) => {\r\n      console.log('global serializer invoked')\r\n      return input\r\n    }\r\n  }\r\n})\r\n\r\nlog.info('does not invoke global serializer')\r\nlog.info({will: 'invoke global serializer'})\r\n```\r\n\r\nBut this will work as expected:\r\n\r\n```js\r\n'use strict'\r\n\r\nconst pino = require('pino')\r\nconst log = pino({\r\n//  base: null,\r\n  serializers: {\r\n    [Symbol.for('pino.*')]: (input) => {\r\n      console.log('global serializer invoked')\r\n      return input\r\n    }\r\n  }\r\n})\r\n\r\nlog.info('will invoke global serializer')\r\nlog.info({will: 'invoke global serializer'})\r\n```", "closed_by": {"login": "davidmarkclements", "id": 1190716, "node_id": "MDQ6VXNlcjExOTA3MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1190716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmarkclements", "html_url": "https://github.com/davidmarkclements", "followers_url": "https://api.github.com/users/davidmarkclements/followers", "following_url": "https://api.github.com/users/davidmarkclements/following{/other_user}", "gists_url": "https://api.github.com/users/davidmarkclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmarkclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmarkclements/subscriptions", "organizations_url": "https://api.github.com/users/davidmarkclements/orgs", "repos_url": "https://api.github.com/users/davidmarkclements/repos", "events_url": "https://api.github.com/users/davidmarkclements/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmarkclements/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/479/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/362", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/362/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/362/events", "html_url": "https://github.com/pinojs/pino/issues/362", "id": 298600853, "node_id": "MDU6SXNzdWUyOTg2MDA4NTM=", "number": 362, "title": "How to serialize the whole object, not properties?", "user": {"login": "PavloPoliakov", "id": 839290, "node_id": "MDQ6VXNlcjgzOTI5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/839290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PavloPoliakov", "html_url": "https://github.com/PavloPoliakov", "followers_url": "https://api.github.com/users/PavloPoliakov/followers", "following_url": "https://api.github.com/users/PavloPoliakov/following{/other_user}", "gists_url": "https://api.github.com/users/PavloPoliakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/PavloPoliakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PavloPoliakov/subscriptions", "organizations_url": "https://api.github.com/users/PavloPoliakov/orgs", "repos_url": "https://api.github.com/users/PavloPoliakov/repos", "events_url": "https://api.github.com/users/PavloPoliakov/events{/privacy}", "received_events_url": "https://api.github.com/users/PavloPoliakov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-02-20T13:51:17Z", "updated_at": "2022-02-10T00:02:45Z", "closed_at": "2018-04-05T00:59:54Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello,\r\n\r\nPlease, advice what is expected way to achieve the desired behaviour.\r\n\r\nI use `pino` through fastify, therefore I use it usually through the request directly:\r\n```\r\nrequest.log.info('message');\r\nrequest.log.error(error);\r\n```\r\n\r\nImagine the next code:\r\n```js\r\nconst axios = require('axios');\r\n\r\n(async () => {\r\n    try {\r\n        const r = await axios.get('https://google.com/404');\r\n    }catch(error) {\r\n        console.log(error);\r\n    }\r\n})()\r\n```\r\n\r\n`axios` will throw the `error` with the GIANT object, like:\r\nhttps://pastebin.com/ZXccMRvw\r\n\r\n`pino` will try to log it, while I want to work on the serialisation of the logged object.\r\n\r\nBUT, serializers object supports only per property serialization. In my case these are three properties `request`, `response`, `config` only the fact that three of them are present is the evidence of the `axios` error. \r\n\r\n> serializers (object): an object containing functions for custom serialization of objects. These functions should return an JSONifiable object and they should never throw. When logging an object, each top-level property matching the exact key of a serializer will be serialized using the defined serializer.\r\n\r\nHow can I put the logic on top three of them together, not one by one? Let's say if only `config` is present - I want to log it as is.\r\n\r\nI actually achieved it with `prettyPrint`, but when I tried to test this using unit-tests, and declared the custom write stream - pino init fails, since `prettyPrint` is not available if you are not using `process.stdout`.\r\n\r\nWhat can be done about it?\r\n\r\nRegards,", "closed_by": {"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/362/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/983", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/983/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/983/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/983/events", "html_url": "https://github.com/pinojs/pino/issues/983", "id": 829479119, "node_id": "MDU6SXNzdWU4Mjk0NzkxMTk=", "number": 983, "title": "After upgrade the msg field is missing from the logs", "user": {"login": "budarin", "id": 8055157, "node_id": "MDQ6VXNlcjgwNTUxNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8055157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/budarin", "html_url": "https://github.com/budarin", "followers_url": "https://api.github.com/users/budarin/followers", "following_url": "https://api.github.com/users/budarin/following{/other_user}", "gists_url": "https://api.github.com/users/budarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/budarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/budarin/subscriptions", "organizations_url": "https://api.github.com/users/budarin/orgs", "repos_url": "https://api.github.com/users/budarin/repos", "events_url": "https://api.github.com/users/budarin/events{/privacy}", "received_events_url": "https://api.github.com/users/budarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-03-11T20:00:08Z", "updated_at": "2022-02-04T00:02:58Z", "closed_at": "2021-03-12T14:08:32Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "After last upgrade pino deps have noticed that msg field is missing from all my logs\r\n\r\nI do log like this:\r\n`logger.info({ msg: 'Log something...', params, options })`\r\n\r\nI see in loki\r\n`{..., msg: \"\", params, options }`\r\n\r\nmy pino configuration\r\n```\r\nconst formatters = {\r\n    level(label) {\r\n        return { level: label };\r\n    },\r\n};\r\nconst options = {\r\n    formatters,\r\n    ...(__DEV__ && !CI && prettyPrint),\r\n    level: \"info\",\r\n    base: null,\r\n};\r\n\r\n let logger!;\r\n\r\nif (__DEV__) {\r\n    logger = pino(options, pino.destination(1));\r\n}\r\n\r\nif (__PROD__) {\r\n    logger = pino(\r\n        options,\r\n        pino.destination({\r\n            minLength: 4096,\r\n            sync: false,\r\n        }),\r\n    );\r\n\r\n    setInterval(function () {\r\n        logger.flush();\r\n    }, logFlushInterval).unref();\r\n}\r\n\r\nmodule.exports = logger;\r\n```\r\n\r\n\"pino\": \"^6.11.1\",\r\n\"pino-pretty\": \"^4.7.1\",\r\n\r\n\r\nWhat is changed ? I have not found any in releases about it", "closed_by": {"login": "davidmarkclements", "id": 1190716, "node_id": "MDQ6VXNlcjExOTA3MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1190716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmarkclements", "html_url": "https://github.com/davidmarkclements", "followers_url": "https://api.github.com/users/davidmarkclements/followers", "following_url": "https://api.github.com/users/davidmarkclements/following{/other_user}", "gists_url": "https://api.github.com/users/davidmarkclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmarkclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmarkclements/subscriptions", "organizations_url": "https://api.github.com/users/davidmarkclements/orgs", "repos_url": "https://api.github.com/users/davidmarkclements/repos", "events_url": "https://api.github.com/users/davidmarkclements/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmarkclements/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/983/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1595", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1595/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1595/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1595/events", "html_url": "https://github.com/pinojs/pino/issues/1595", "id": 1457131475, "node_id": "I_kwDOAxcHIs5W2g_T", "number": 1595, "title": "Can't use custom levels in multistream with TypeScript", "user": {"login": "frzsombor", "id": 7306657, "node_id": "MDQ6VXNlcjczMDY2NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7306657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frzsombor", "html_url": "https://github.com/frzsombor", "followers_url": "https://api.github.com/users/frzsombor/followers", "following_url": "https://api.github.com/users/frzsombor/following{/other_user}", "gists_url": "https://api.github.com/users/frzsombor/gists{/gist_id}", "starred_url": "https://api.github.com/users/frzsombor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frzsombor/subscriptions", "organizations_url": "https://api.github.com/users/frzsombor/orgs", "repos_url": "https://api.github.com/users/frzsombor/repos", "events_url": "https://api.github.com/users/frzsombor/events{/privacy}", "received_events_url": "https://api.github.com/users/frzsombor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 3053382964, "node_id": "MDU6TGFiZWwzMDUzMzgyOTY0", "url": "https://api.github.com/repos/pinojs/pino/labels/TypeScript", "name": "TypeScript", "color": "AAD5C4", "default": false, "description": ""}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-11-21T01:14:11Z", "updated_at": "2023-09-21T00:04:07Z", "closed_at": "2023-08-21T11:04:52Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "The following code worked totally fine in JS, but I'm currently in the process of converting my NodeJS app to typescript.\r\nI would like to use custom levels in multistream with TypeScript, but the definitions are not allowing me to do so.\r\nI have this file, where I prepare and configure pino to use it in different parts of my application:\r\n\r\n```ts\r\nimport * as fs from 'fs';\r\nimport pino, { StreamEntry } from 'pino';\r\nimport pretty from 'pino-pretty';\r\n\r\nconst customLevels = {\r\n    debug   : 1,\r\n    info    : 2,\r\n    network : 3, // <- my custom level\r\n    error   : 4,\r\n};\r\n\r\nconst pinoOpts = {\r\n    //...\r\n    useOnlyCustomLevels: true,\r\n    customLevels: customLevels,\r\n    //...\r\n};\r\n\r\nconst multistreamOpts = {\r\n    dedupe: true, //send logs only to the stream with the higher level\r\n    levels: customLevels,\r\n};\r\n\r\nconst streams: StreamEntry[] = [\r\n    { level : 'debug',   stream : fs.createWriteStream(`./log/log-debug.log`,   { flags: 'a' }) },\r\n    { level : 'info',    stream : pretty() },\r\n    { level : 'info',    stream : fs.createWriteStream(`./log/log-info.log`,    { flags: 'a' }) },\r\n    { level : 'network', stream : fs.createWriteStream(`./log/log-network.log`, { flags: 'a' }) },\r\n/*             ^^^^^^^\r\n                  \u2514 - \u2757 TypeScript error \u2757\r\n*/\r\n    { level : 'error',   stream : pretty() },\r\n    { level : 'error',   stream : fs.createWriteStream(`./log/log-error.log`,   { flags: 'a' }) },\r\n];\r\n\r\nexport default pino(pinoOpts, pino.multistream(streams, multistreamOpts));\r\n```\r\n\r\nHowever, I get the following error where I define `streams`:\r\n`Type '\"network\"' is not assignable to type 'Level | undefined'.ts(2322)`\r\n\r\nThe reason is that in pino.d.ts, [Level is explicitly defined](https://github.com/pinojs/pino/blob/v8.7.0/pino.d.ts#L220) to be `\"fatal\" | \"error\" | \"warn\" | \"info\" | \"debug\" | \"trace\"` and no matter how many times and different approaches I tried to override/extend the definition, none of my attempts worked.", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1595/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1353", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1353/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1353/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1353/events", "html_url": "https://github.com/pinojs/pino/issues/1353", "id": 1156733835, "node_id": "I_kwDOAxcHIs5E8luL", "number": 1353, "title": "formatters level set label cant transport", "user": {"login": "zhongshanxian", "id": 25564430, "node_id": "MDQ6VXNlcjI1NTY0NDMw", "avatar_url": "https://avatars.githubusercontent.com/u/25564430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhongshanxian", "html_url": "https://github.com/zhongshanxian", "followers_url": "https://api.github.com/users/zhongshanxian/followers", "following_url": "https://api.github.com/users/zhongshanxian/following{/other_user}", "gists_url": "https://api.github.com/users/zhongshanxian/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhongshanxian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhongshanxian/subscriptions", "organizations_url": "https://api.github.com/users/zhongshanxian/orgs", "repos_url": "https://api.github.com/users/zhongshanxian/repos", "events_url": "https://api.github.com/users/zhongshanxian/events{/privacy}", "received_events_url": "https://api.github.com/users/zhongshanxian/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 743206425, "node_id": "MDU6TGFiZWw3NDMyMDY0MjU=", "url": "https://api.github.com/repos/pinojs/pino/labels/good%20first%20issue", "name": "good first issue", "color": "f280a6", "default": true, "description": null}, {"id": 743206758, "node_id": "MDU6TGFiZWw3NDMyMDY3NTg=", "url": "https://api.github.com/repos/pinojs/pino/labels/documentation", "name": "documentation", "color": "3d77aa", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-03-02T08:10:35Z", "updated_at": "2022-04-09T00:03:45Z", "closed_at": "2022-03-09T13:44:33Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "why set level => label, cant record the log, test.log is empty?\r\n\r\n\"pino\": \"^7.8.0\"\r\n\r\n```\r\nconst logger = pino({\r\n    formatters: {\r\n        level(label) {\r\n            // if set level => label, cant record the log, test.log is empty\r\n            // if set level => number, Everything is all right\r\n            return { level: label };\r\n        }\r\n    },\r\n    transport: {\r\n        targets: [\r\n            {\r\n                target: 'pino/file',\r\n                options: { destination: './test.log' }\r\n            }\r\n        ]\r\n    }\r\n});\r\n\r\nexport default logger\r\n```", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1353/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/177", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/177/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/177/events", "html_url": "https://github.com/pinojs/pino/issues/177", "id": 201612644, "node_id": "MDU6SXNzdWUyMDE2MTI2NDQ=", "number": 177, "title": "logLevel for custom levels", "user": {"login": "nemisj", "id": 182848, "node_id": "MDQ6VXNlcjE4Mjg0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/182848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nemisj", "html_url": "https://github.com/nemisj", "followers_url": "https://api.github.com/users/nemisj/followers", "following_url": "https://api.github.com/users/nemisj/following{/other_user}", "gists_url": "https://api.github.com/users/nemisj/gists{/gist_id}", "starred_url": "https://api.github.com/users/nemisj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nemisj/subscriptions", "organizations_url": "https://api.github.com/users/nemisj/orgs", "repos_url": "https://api.github.com/users/nemisj/repos", "events_url": "https://api.github.com/users/nemisj/events{/privacy}", "received_events_url": "https://api.github.com/users/nemisj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [{"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-01-18T15:53:22Z", "updated_at": "2022-02-11T00:03:28Z", "closed_at": "2017-01-19T13:24:58Z", "assignee": {"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Didn't know where to ask, that's why asking here.\r\n\r\nI wanted to use custom level, but in my stream, even when i log using the custom method i get the `level` which is currently set and not the custom one.\r\n\r\nI've found that it's get set in the code:\r\n\r\n```javascript\r\nthis[key] = isStandardLevel(key) ? Pino.prototype[key] : genLog(num)\r\n```\r\n\r\nIs this a desired behaviour or can we change it to real level of custom? into something like:\r\n\r\n```javascript\r\nthis[key] = isStandardLevel(key) ? Pino.prototype[key] : genLog(this.levels.values[key])\r\n```\r\n", "closed_by": {"login": "jsumners", "id": 321201, "node_id": "MDQ6VXNlcjMyMTIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/321201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsumners", "html_url": "https://github.com/jsumners", "followers_url": "https://api.github.com/users/jsumners/followers", "following_url": "https://api.github.com/users/jsumners/following{/other_user}", "gists_url": "https://api.github.com/users/jsumners/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsumners/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsumners/subscriptions", "organizations_url": "https://api.github.com/users/jsumners/orgs", "repos_url": "https://api.github.com/users/jsumners/repos", "events_url": "https://api.github.com/users/jsumners/events{/privacy}", "received_events_url": "https://api.github.com/users/jsumners/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/177/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1735", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1735/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1735/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1735/events", "html_url": "https://github.com/pinojs/pino/issues/1735", "id": 1764783482, "node_id": "I_kwDOAxcHIs5pMHV6", "number": 1735, "title": "Programmatic Integration as a transport fails", "user": {"login": "altearius", "id": 270430, "node_id": "MDQ6VXNlcjI3MDQzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/270430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/altearius", "html_url": "https://github.com/altearius", "followers_url": "https://api.github.com/users/altearius/followers", "following_url": "https://api.github.com/users/altearius/following{/other_user}", "gists_url": "https://api.github.com/users/altearius/gists{/gist_id}", "starred_url": "https://api.github.com/users/altearius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/altearius/subscriptions", "organizations_url": "https://api.github.com/users/altearius/orgs", "repos_url": "https://api.github.com/users/altearius/repos", "events_url": "https://api.github.com/users/altearius/events{/privacy}", "received_events_url": "https://api.github.com/users/altearius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 9, "created_at": "2023-06-16T14:39:37Z", "updated_at": "2023-09-22T00:04:18Z", "closed_at": "2023-07-27T17:14:18Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "The [Programmatic Integration][1] section currently contains this code example:\r\n\r\n```js\r\nconst pino = require('pino')\r\nconst logger = pino({\r\n  transport: {\r\n    target: 'pino-pretty'\r\n  },\r\n})\r\n\r\nlogger.info('hi')\r\n```\r\n\r\nThe sample currently fails when executed with `pino@8.14.1` and `pino-pretty@10.0.0` on node 18.16.0:\r\n\r\n```\r\n$ node\r\nWelcome to Node.js v18.16.0.\r\nType \".help\" for more information.\r\n> const pino = require('pino')\r\nundefined\r\n> const logger = pino({\r\n...   transport: {\r\n...     target: 'pino-pretty'\r\n...   },\r\n... })\r\nUncaught Error: unable to determine transport target for \"pino-pretty\"\r\n    at fixTarget (/home/...redacted.../node_modules/pino/lib/transport.js:140:13)\r\n    at transport (/home/...redacted.../node_modules/pino/lib/transport.js:114:22)\r\n    at normalizeArgs (/home/...redacted.../node_modules/pino/lib/tools.js:311:16)\r\n    at pino (/home/...redacted.../node_modules/pino/pino.js:87:28)\r\n```\r\n\r\n[1]: https://github.com/pinojs/pino-pretty#programmatic-integration 'Programmatic Integration'", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1735/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/833", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/833/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/833/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/833/events", "html_url": "https://github.com/pinojs/pino/issues/833", "id": 613934166, "node_id": "MDU6SXNzdWU2MTM5MzQxNjY=", "number": 833, "title": "TypeError: Cannot read property 'labels' of undefined", "user": {"login": "openainext", "id": 456516, "node_id": "MDQ6VXNlcjQ1NjUxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/456516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/openainext", "html_url": "https://github.com/openainext", "followers_url": "https://api.github.com/users/openainext/followers", "following_url": "https://api.github.com/users/openainext/following{/other_user}", "gists_url": "https://api.github.com/users/openainext/gists{/gist_id}", "starred_url": "https://api.github.com/users/openainext/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/openainext/subscriptions", "organizations_url": "https://api.github.com/users/openainext/orgs", "repos_url": "https://api.github.com/users/openainext/repos", "events_url": "https://api.github.com/users/openainext/events{/privacy}", "received_events_url": "https://api.github.com/users/openainext/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-05-07T10:08:05Z", "updated_at": "2022-02-05T00:03:12Z", "closed_at": "2020-07-15T13:16:00Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "```js\r\n//test.js\r\nconst pino = require('pino')();\r\n\r\nprocess.on('warning', (warning) => {\r\n  pino.info(warning);\r\n});\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\nprocess.on('foo', () => {});\r\nprocess.on('foo', () => {})\r\n\r\n```\r\n\r\n\r\n  return levels.labels[levelVal]\r\n               ^\r\n\r\nTypeError: Cannot read property 'labels' of undefined", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/833/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1708", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1708/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1708/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1708/events", "html_url": "https://github.com/pinojs/pino/issues/1708", "id": 1696368494, "node_id": "I_kwDOAxcHIs5lHIdu", "number": 1708, "title": "redaction is not working for wild cards after level 2", "user": {"login": "gurjotkaur20", "id": 88080236, "node_id": "MDQ6VXNlcjg4MDgwMjM2", "avatar_url": "https://avatars.githubusercontent.com/u/88080236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gurjotkaur20", "html_url": "https://github.com/gurjotkaur20", "followers_url": "https://api.github.com/users/gurjotkaur20/followers", "following_url": "https://api.github.com/users/gurjotkaur20/following{/other_user}", "gists_url": "https://api.github.com/users/gurjotkaur20/gists{/gist_id}", "starred_url": "https://api.github.com/users/gurjotkaur20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gurjotkaur20/subscriptions", "organizations_url": "https://api.github.com/users/gurjotkaur20/orgs", "repos_url": "https://api.github.com/users/gurjotkaur20/repos", "events_url": "https://api.github.com/users/gurjotkaur20/events{/privacy}", "received_events_url": "https://api.github.com/users/gurjotkaur20/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-05-04T16:59:45Z", "updated_at": "2023-06-15T00:04:21Z", "closed_at": "2023-05-15T12:52:23Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Issue: redaction is working upto level 2 when we use wildcards like ..* but after level 2, it is not working.\r\n\r\nHere is the code where I want to redact field at level 3:\r\n`\r\nconst logger = require('pino')({\r\n    redact: {\r\n        paths: [\r\n            'entityPanNumber',\r\n            '*.entityPanNumber',\r\n            '*.*.entityPanNumber',\r\n            '*.*.*.entityPanNumber'\r\n        ],\r\n        censor: '*****'\r\n    }\r\n  })\r\n\r\nlogger.info('temp: %o', { \"entityPanNumber\": \"DEF\" });\r\nlogger.info('temp: %o', { \"1\": { \"entityPanNumber\": \"DEF\" } });\r\nlogger.info('temp: %o', { \"1\": { \"2\": { \"entityPanNumber\": \"DEF\" } } });\r\nlogger.info('temp: %o', { \"1\": { \"2\": { \"3\": { \"entityPanNumber\": \"DEF\" } } }});\r\n`\r\n\r\nThe output is:\r\n`{\"level\":30,\"time\":1683219381177,\"pid\":166336,\"hostname\":\"ThinkPadT480s\",\"msg\":\"temp: {\\\"entityPanNumber\\\":\\\"*****\\\"}\"}\r\n{\"level\":30,\"time\":1683219381179,\"pid\":166336,\"hostname\":\"ThinkPadT480s\",\"msg\":\"temp: {\\\"1\\\":{\\\"entityPanNumber\\\":\\\"*****\\\"}}\"}\r\n{\"level\":30,\"time\":1683219381180,\"pid\":166336,\"hostname\":\"ThinkPadT480s\",\"msg\":\"temp: {\\\"1\\\":{\\\"2\\\":{\\\"entityPanNumber\\\":\\\"*****\\\"}}}\"}\r\n{\"level\":30,\"time\":1683219381182,\"pid\":166336,\"hostname\":\"ThinkPadT480s\",\"msg\":\"temp: {\\\"1\\\":{\\\"2\\\":{\\\"3\\\":{\\\"entityPanNumber\\\":\\\"DEF\\\"}}}}\"}\r\n`", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1708/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1400", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1400/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1400/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1400/events", "html_url": "https://github.com/pinojs/pino/issues/1400", "id": 1197158941, "node_id": "I_kwDOAxcHIs5HWzId", "number": 1400, "title": "Logging inside process exit event?", "user": {"login": "06000208", "id": 52764066, "node_id": "MDQ6VXNlcjUyNzY0MDY2", "avatar_url": "https://avatars.githubusercontent.com/u/52764066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/06000208", "html_url": "https://github.com/06000208", "followers_url": "https://api.github.com/users/06000208/followers", "following_url": "https://api.github.com/users/06000208/following{/other_user}", "gists_url": "https://api.github.com/users/06000208/gists{/gist_id}", "starred_url": "https://api.github.com/users/06000208/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/06000208/subscriptions", "organizations_url": "https://api.github.com/users/06000208/orgs", "repos_url": "https://api.github.com/users/06000208/repos", "events_url": "https://api.github.com/users/06000208/events{/privacy}", "received_events_url": "https://api.github.com/users/06000208/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 326966277, "node_id": "MDU6TGFiZWwzMjY5NjYyNzc=", "url": "https://api.github.com/repos/pinojs/pino/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [{"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-04-08T10:45:13Z", "updated_at": "2022-07-23T00:04:18Z", "closed_at": "2022-06-22T11:52:56Z", "assignee": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Before migrating to pino, I used this pattern with various loggers:\r\n```js\r\nprocess.on(\"exit\", (code) => code == 0 ? console.log(\"Exiting peacefully\") : console.error(`Exiting abnormally with code ${code}`));\r\n```\r\nThis works correctly with pino with the defaults:\r\n```js\r\nimport pino from \"pino\";\r\nimport process from \"node:process\";\r\nconst log = pino();\r\nlog.info(\"hello world!\");\r\nprocess.on(\"exit\", (code) => code == 0 ? log.info(\"Exiting peacefully\") : log.fatal(`Exiting abnormally with code ${code}`));\r\n```\r\n```\r\n{\"level\":30,\"time\":1649412627196,\"pid\":20108,\"hostname\":\"pc\",\"msg\":\"hello world!\"}\r\n{\"level\":30,\"time\":1649412627198,\"pid\":20108,\"hostname\":\"pc\",\"msg\":\"Exiting peacefully\"}\r\n```\r\nHowever, when using a transport (such as pino/file), an error is thrown and the line isn't logged:\r\n```js\r\nimport pino from \"pino\";\r\nimport process from \"node:process\";\r\nconst log = pino({\r\n    transport: {\r\n        target: \"pino/file\",\r\n        options: { destination: `${Date.now()}.log` },\r\n    },\r\n});\r\nlog.info(\"hello world!\");\r\nprocess.on(\"exit\", (code) => code == 0 ? log.info(\"Exiting peacefully\") : log.fatal(`Exiting abnormally with code ${code}`));\r\n```\r\n```\r\n{\"level\":30,\"time\":1649413220294,\"pid\":15488,\"hostname\":\"pc\",\"msg\":\"hello world!\"}\r\n```\r\n```\r\nG:\\example>node index\r\nG:\\example\\node_modules\\thread-stream\\index.js:214\r\n      throw new Error('the worker has exited')\r\n      ^\r\n\r\nError: the worker has exited\r\n    at ThreadStream.write (G:\\example\\node_modules\\thread-stream\\index.js:214:13)\r\n    at Pino.write (G:\\example\\node_modules\\pino\\lib\\proto.js:208:10)\r\n    at Pino.LOG [as info] (G:\\example\\node_modules\\pino\\lib\\tools.js:60:21)\r\n    at process.<anonymous> (file:///G:/example/index.js:9:46)\r\n    at process.emit (node:events:390:28)\r\n```\r\nI noticed pino.final() in the docs, but it's deprecated, and doesn't seem intended for this anyway.\r\n\r\nIs there a way of logging from an exit event, or is this a bug/not possible?", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1400/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1166", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1166/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1166/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1166/events", "html_url": "https://github.com/pinojs/pino/issues/1166", "id": 1028397142, "node_id": "I_kwDOAxcHIs49TBhW", "number": 1166, "title": "A \"nestedKeyName: {}\" is always added to the log and displayed by pretty even if there is nothing to nest", "user": {"login": "frzsombor", "id": 7306657, "node_id": "MDQ6VXNlcjczMDY2NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7306657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frzsombor", "html_url": "https://github.com/frzsombor", "followers_url": "https://api.github.com/users/frzsombor/followers", "following_url": "https://api.github.com/users/frzsombor/following{/other_user}", "gists_url": "https://api.github.com/users/frzsombor/gists{/gist_id}", "starred_url": "https://api.github.com/users/frzsombor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frzsombor/subscriptions", "organizations_url": "https://api.github.com/users/frzsombor/orgs", "repos_url": "https://api.github.com/users/frzsombor/repos", "events_url": "https://api.github.com/users/frzsombor/events{/privacy}", "received_events_url": "https://api.github.com/users/frzsombor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 743206425, "node_id": "MDU6TGFiZWw3NDMyMDY0MjU=", "url": "https://api.github.com/repos/pinojs/pino/labels/good%20first%20issue", "name": "good first issue", "color": "f280a6", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-10-17T18:06:11Z", "updated_at": "2022-02-02T14:14:45Z", "closed_at": "2021-10-29T13:10:35Z", "assignee": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "If I set the `nestedKey: payload` option, the nested key is always added to the log and pino-pretty also displays it every time, even if I try to log a simple string (and if I can remember correctly, this was not the case with v6).\r\n\r\nA simple `logger.info('info');` makes pino-pretty (with `base: undefined, timestamp: pino.stdTimeFunctions.isoTime` options) show the following:\r\n```\r\n[2021-10-17T17:52:12.208Z] INFO: info\r\n    payload: {}\r\n```\r\n\r\n---\r\n\r\n_My current workaround:\r\nRight now I'm using the following hook method to achieve similar results as v6 (only wrap object if necessary):_\r\n\r\n```javascript\r\nhooks: {\r\n    logMethod (inputArgs, method, level) {\r\n        if (typeof inputArgs[0] !== 'string' && !(inputArgs[0] instanceof Error)) {\r\n            return method.apply(this, [ { object: inputArgs[0] } ]);\r\n        }\r\n        return method.apply(this, inputArgs);\r\n    }\r\n},\r\n```", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1166/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1575", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1575/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1575/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1575/events", "html_url": "https://github.com/pinojs/pino/issues/1575", "id": 1415245196, "node_id": "I_kwDOAxcHIs5UWu2M", "number": 1575, "title": "Redact mutates the original object", "user": {"login": "AlexRex", "id": 2911626, "node_id": "MDQ6VXNlcjI5MTE2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2911626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexRex", "html_url": "https://github.com/AlexRex", "followers_url": "https://api.github.com/users/AlexRex/followers", "following_url": "https://api.github.com/users/AlexRex/following{/other_user}", "gists_url": "https://api.github.com/users/AlexRex/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexRex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexRex/subscriptions", "organizations_url": "https://api.github.com/users/AlexRex/orgs", "repos_url": "https://api.github.com/users/AlexRex/repos", "events_url": "https://api.github.com/users/AlexRex/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexRex/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-10-19T16:07:10Z", "updated_at": "2024-06-18T00:05:14Z", "closed_at": "2024-05-15T12:52:20Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We noticed that redact is mutating the original object, and not bringing back its properties.\r\n\r\nSnippet to reproduce:\r\n\r\n```ts\r\nimport pino from 'pino'\r\n\r\nconst config: pino.LoggerOptions = {\r\n  level: 'debug',\r\n  redact: [ // Eliminate these fields from the logs!\r\n    'context.password',\r\n    'password',\r\n    'context.*.password',\r\n    'context[*].password'\r\n  ]\r\n}\r\n\r\nconst logger = pino(config)\r\n\r\nconst test = {\r\n  whatever: { password: '1234' }\r\n}\r\n\r\nlogger.info({ context: test }, 'info')\r\n\r\nconsole.log(test) //  { whatever: { password: '[Redacted]' } }\r\n\r\n```\r\n\r\nVersions used:\r\n```json\r\n\"pino\": \"7.11.0\",\r\n\"pino-pretty\": \"7.6.1\"\r\n```", "closed_by": {"login": "mcollina", "id": 52195, "node_id": "MDQ6VXNlcjUyMTk1", "avatar_url": "https://avatars.githubusercontent.com/u/52195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcollina", "html_url": "https://github.com/mcollina", "followers_url": "https://api.github.com/users/mcollina/followers", "following_url": "https://api.github.com/users/mcollina/following{/other_user}", "gists_url": "https://api.github.com/users/mcollina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcollina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcollina/subscriptions", "organizations_url": "https://api.github.com/users/mcollina/orgs", "repos_url": "https://api.github.com/users/mcollina/repos", "events_url": "https://api.github.com/users/mcollina/events{/privacy}", "received_events_url": "https://api.github.com/users/mcollina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1575/reactions", "total_count": 3, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1575/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/pinojs/pino/issues/1513", "repository_url": "https://api.github.com/repos/pinojs/pino", "labels_url": "https://api.github.com/repos/pinojs/pino/issues/1513/labels{/name}", "comments_url": "https://api.github.com/repos/pinojs/pino/issues/1513/comments", "events_url": "https://api.github.com/repos/pinojs/pino/issues/1513/events", "html_url": "https://github.com/pinojs/pino/issues/1513", "id": 1334360162, "node_id": "I_kwDOAxcHIs5PiLhi", "number": 1513, "title": "Redact causes infinite recursion", "user": {"login": "meirkeller", "id": 86711663, "node_id": "MDQ6VXNlcjg2NzExNjYz", "avatar_url": "https://avatars.githubusercontent.com/u/86711663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meirkeller", "html_url": "https://github.com/meirkeller", "followers_url": "https://api.github.com/users/meirkeller/followers", "following_url": "https://api.github.com/users/meirkeller/following{/other_user}", "gists_url": "https://api.github.com/users/meirkeller/gists{/gist_id}", "starred_url": "https://api.github.com/users/meirkeller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meirkeller/subscriptions", "organizations_url": "https://api.github.com/users/meirkeller/orgs", "repos_url": "https://api.github.com/users/meirkeller/repos", "events_url": "https://api.github.com/users/meirkeller/events{/privacy}", "received_events_url": "https://api.github.com/users/meirkeller/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 326966275, "node_id": "MDU6TGFiZWwzMjY5NjYyNzU=", "url": "https://api.github.com/repos/pinojs/pino/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 326966278, "node_id": "MDU6TGFiZWwzMjY5NjYyNzg=", "url": "https://api.github.com/repos/pinojs/pino/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": true, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-10T09:45:26Z", "updated_at": "2022-09-23T00:05:09Z", "closed_at": "2022-08-23T05:53:28Z", "assignee": null, "author_association": "NONE", "type": null, "active_lock_reason": "resolved", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "#### Reproduction\r\n\r\n```js\r\nconst pino = require('pino');\r\n\r\nconst logger = pino({\r\n  redact: { paths: ['*.d', '*.*.d', '*.*.*.d'] },\r\n});\r\n\r\nconst obj = {\r\n  x: { c: { d: 'hide me', e: 'leave me be' } },\r\n  y: { c: { d: 'and me', f: 'I want to live' } },\r\n  z: { c: { d: 'and also I', g: 'I want to run in a stream' } },\r\n};\r\n\r\nlogger.info(obj);\r\nconsole.log(obj);\r\n```\r\n\r\n#### Output\r\n```\r\n{\"level\":30,\"time\":1660124503113,\"pid\":28160,\"hostname\":\"MAC-Meir Keller\",\"x\":{\"c\":{\"d\":\"[Redacted]\",\"e\":\"leave me be\"}},\"y\":{\"c\":{\"d\":\"[Redacted]\",\"f\":\"I want to live\"}},\"z\":{\"c\":{\"d\":\"[Redacted]\",\"g\":\"I want to run in a stream\"}}}\r\n{\r\n  x: { c: <ref *1> { d: [Circular *1], e: 'leave me be' } },\r\n  y: { c: <ref *2> { d: [Circular *2], f: 'I want to live' } },\r\n  z: {\r\n    c: <ref *3> {\r\n      d: [Circular *3],\r\n      g: 'I want to run in a stream'\r\n    }\r\n  }\r\n}\r\n```", "closed_by": {"login": "meirkeller", "id": 86711663, "node_id": "MDQ6VXNlcjg2NzExNjYz", "avatar_url": "https://avatars.githubusercontent.com/u/86711663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meirkeller", "html_url": "https://github.com/meirkeller", "followers_url": "https://api.github.com/users/meirkeller/followers", "following_url": "https://api.github.com/users/meirkeller/following{/other_user}", "gists_url": "https://api.github.com/users/meirkeller/gists{/gist_id}", "starred_url": "https://api.github.com/users/meirkeller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meirkeller/subscriptions", "organizations_url": "https://api.github.com/users/meirkeller/orgs", "repos_url": "https://api.github.com/users/meirkeller/repos", "events_url": "https://api.github.com/users/meirkeller/events{/privacy}", "received_events_url": "https://api.github.com/users/meirkeller/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/pinojs/pino/issues/1513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pinojs/pino/issues/1513/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}]}