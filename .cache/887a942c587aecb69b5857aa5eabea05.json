{"d": [{"url": "https://api.github.com/repos/jaredhanson/passport/issues/877", "repository_url": "https://api.github.com/repos/jaredhanson/passport", "labels_url": "https://api.github.com/repos/jaredhanson/passport/issues/877/labels{/name}", "comments_url": "https://api.github.com/repos/jaredhanson/passport/issues/877/comments", "events_url": "https://api.github.com/repos/jaredhanson/passport/issues/877/events", "html_url": "https://github.com/jaredhanson/passport/issues/877", "id": 1082220812, "node_id": "I_kwDOACbDUM5AgWEM", "number": 877, "title": "URGENT ISSUE NPM 0.5.1 BREAKING CHANGE PUBLISHED!??! (Error seen: 'middleware not in use')", "user": {"login": "jfstephe", "id": 3627080, "node_id": "MDQ6VXNlcjM2MjcwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/3627080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfstephe", "html_url": "https://github.com/jfstephe", "followers_url": "https://api.github.com/users/jfstephe/followers", "following_url": "https://api.github.com/users/jfstephe/following{/other_user}", "gists_url": "https://api.github.com/users/jfstephe/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfstephe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfstephe/subscriptions", "organizations_url": "https://api.github.com/users/jfstephe/orgs", "repos_url": "https://api.github.com/users/jfstephe/repos", "events_url": "https://api.github.com/users/jfstephe/events{/privacy}", "received_events_url": "https://api.github.com/users/jfstephe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3544541044, "node_id": "LA_kwDOACbDUM7TRWd0", "url": "https://api.github.com/repos/jaredhanson/passport/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-12-16T13:50:55Z", "updated_at": "2021-12-16T20:39:07Z", "closed_at": "2021-12-16T20:39:07Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi,\r\n\r\nMaximum strangeness. The latest version on npm is 0.5.1 with breaking changes (e.g. req._passport isn't defined, and therefore we got 'middleware not in use' related errors as-of-today's recent builds).\r\n\r\nCan someone take a look at this urgently please, before more people are affected?\r\n\r\nThanks,\r\nJohn", "closed_by": {"login": "jaredhanson", "id": 10355, "node_id": "MDQ6VXNlcjEwMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/10355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredhanson", "html_url": "https://github.com/jaredhanson", "followers_url": "https://api.github.com/users/jaredhanson/followers", "following_url": "https://api.github.com/users/jaredhanson/following{/other_user}", "gists_url": "https://api.github.com/users/jaredhanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredhanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredhanson/subscriptions", "organizations_url": "https://api.github.com/users/jaredhanson/orgs", "repos_url": "https://api.github.com/users/jaredhanson/repos", "events_url": "https://api.github.com/users/jaredhanson/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredhanson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/jaredhanson/passport/issues/877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/jaredhanson/passport/issues/877/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/jaredhanson/passport/issues/881", "repository_url": "https://api.github.com/repos/jaredhanson/passport", "labels_url": "https://api.github.com/repos/jaredhanson/passport/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/jaredhanson/passport/issues/881/comments", "events_url": "https://api.github.com/repos/jaredhanson/passport/issues/881/events", "html_url": "https://github.com/jaredhanson/passport/issues/881", "id": 1086020271, "node_id": "I_kwDOACbDUM5Au1qv", "number": 881, "title": "0.5.x has no req.login unless authenticate middleware used, contradicting documentation, unclear how it should work", "user": {"login": "boutell", "id": 32125, "node_id": "MDQ6VXNlcjMyMTI1", "avatar_url": "https://avatars.githubusercontent.com/u/32125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boutell", "html_url": "https://github.com/boutell", "followers_url": "https://api.github.com/users/boutell/followers", "following_url": "https://api.github.com/users/boutell/following{/other_user}", "gists_url": "https://api.github.com/users/boutell/gists{/gist_id}", "starred_url": "https://api.github.com/users/boutell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boutell/subscriptions", "organizations_url": "https://api.github.com/users/boutell/orgs", "repos_url": "https://api.github.com/users/boutell/repos", "events_url": "https://api.github.com/users/boutell/events{/privacy}", "received_events_url": "https://api.github.com/users/boutell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3544541044, "node_id": "LA_kwDOACbDUM7TRWd0", "url": "https://api.github.com/repos/jaredhanson/passport/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-21T16:42:31Z", "updated_at": "2022-05-16T15:03:47Z", "closed_at": "2022-05-16T14:55:22Z", "assignee": null, "author_association": "NONE", "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When I attempt to upgrade to 0.5.x I get errors because I'm using `req.login` explicitly.\r\n\r\nAccording to the changelog this is because `req.login` is only added by the `authenticate` middleware now.\r\n\r\nThis doesn't seem to make sense. According to the documentation it is always there (i.e., added by `initialize`), and if it is only available with `authenticate` then you would never get to use it because your login would have been rejected for lack of authentication already. That's why we only apply `authenticate` middleware to login routes. That, and the performance impact.\r\n\r\n`req.logout` is also absent from ordinary requests using only the `initialize` middleware, which also contradicts the documentation and doesn't seem to make sense.\r\n\r\nHow am I meant to log in a user explicitly in 0.5.x?\r\n\r\nThanks for your hard work on Passport!", "closed_by": {"login": "jaredhanson", "id": 10355, "node_id": "MDQ6VXNlcjEwMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/10355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredhanson", "html_url": "https://github.com/jaredhanson", "followers_url": "https://api.github.com/users/jaredhanson/followers", "following_url": "https://api.github.com/users/jaredhanson/following{/other_user}", "gists_url": "https://api.github.com/users/jaredhanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredhanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredhanson/subscriptions", "organizations_url": "https://api.github.com/users/jaredhanson/orgs", "repos_url": "https://api.github.com/users/jaredhanson/repos", "events_url": "https://api.github.com/users/jaredhanson/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredhanson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/jaredhanson/passport/issues/881/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/jaredhanson/passport/issues/881/timeline", "performed_via_github_app": null, "state_reason": "completed", "pinned_comment": null}, {"url": "https://api.github.com/repos/jaredhanson/passport/issues/898", "repository_url": "https://api.github.com/repos/jaredhanson/passport", "labels_url": "https://api.github.com/repos/jaredhanson/passport/issues/898/labels{/name}", "comments_url": "https://api.github.com/repos/jaredhanson/passport/issues/898/comments", "events_url": "https://api.github.com/repos/jaredhanson/passport/issues/898/events", "html_url": "https://github.com/jaredhanson/passport/pull/898", "id": 1237285748, "node_id": "PR_kwDOACbDUM434s9B", "number": 898, "title": "Extend request in initialize middleware", "user": {"login": "jaredhanson", "id": 10355, "node_id": "MDQ6VXNlcjEwMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/10355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredhanson", "html_url": "https://github.com/jaredhanson", "followers_url": "https://api.github.com/users/jaredhanson/followers", "following_url": "https://api.github.com/users/jaredhanson/following{/other_user}", "gists_url": "https://api.github.com/users/jaredhanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredhanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredhanson/subscriptions", "organizations_url": "https://api.github.com/users/jaredhanson/orgs", "repos_url": "https://api.github.com/users/jaredhanson/repos", "events_url": "https://api.github.com/users/jaredhanson/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredhanson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3544541044, "node_id": "LA_kwDOACbDUM7TRWd0", "url": "https://api.github.com/repos/jaredhanson/passport/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-16T14:54:38Z", "updated_at": "2022-05-16T14:55:22Z", "closed_at": "2022-05-16T14:55:22Z", "assignee": null, "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/jaredhanson/passport/pulls/898", "html_url": "https://github.com/jaredhanson/passport/pull/898", "diff_url": "https://github.com/jaredhanson/passport/pull/898.diff", "patch_url": "https://github.com/jaredhanson/passport/pull/898.patch", "merged_at": "2022-05-16T14:55:22Z"}, "body": "This PR reverts a change in v0.5.1, so that `passport.initialize()` now (as it did before) extends the request with `login()`, etc. functions.  Fixes #881.", "closed_by": {"login": "jaredhanson", "id": 10355, "node_id": "MDQ6VXNlcjEwMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/10355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredhanson", "html_url": "https://github.com/jaredhanson", "followers_url": "https://api.github.com/users/jaredhanson/followers", "following_url": "https://api.github.com/users/jaredhanson/following{/other_user}", "gists_url": "https://api.github.com/users/jaredhanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredhanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredhanson/subscriptions", "organizations_url": "https://api.github.com/users/jaredhanson/orgs", "repos_url": "https://api.github.com/users/jaredhanson/repos", "events_url": "https://api.github.com/users/jaredhanson/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredhanson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/jaredhanson/passport/issues/898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/jaredhanson/passport/issues/898/timeline", "performed_via_github_app": null, "state_reason": null}]}